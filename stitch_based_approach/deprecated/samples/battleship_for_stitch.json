[
  "(lam (lam (let ship_ids (app np-unique true-board) 0)))",
  "(lam (lam (let rows_to_check unknown (let ncols (app (app subscript true-board.shape) 1) 0))))",
  "(lam (lam (let queries unknown 0)))",
  "(lam (lam (let ship_types unknown (let remaining_ship () (let row_G_index (app (app sub (app ord \"G\")) (app ord \"A\")) (app np-any (app (app gt (app (app subscript remaining_ship) (pair (slice 0 inf) 0))) row_G_index)))))))",
  "(lam (lam (let unrevealed (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let $v0 (app np-where unrevealed) (app np-any (app (app lt rows) 2))))))",
  "(lam (lam (let green_mask (app (app eq true-board) 2) (app np-all (app (app eq (app (app subscript partial-board) green_mask)) 2)))))",
  "(lam (lam (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) (let sunk_count 0 (app (app gte sunk_count) 2))))))",
  "(lam (lam (let unrevealed (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let $v0 (app np-nonzero unrevealed) (app bool (app np-any (app (app gt rows) 4)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let col_idx (app (app sub 7) 1) (let neighbors unknown (let $v0 true-board.shape 0))))))",
  "(lam (lam (let $v0 (app np-where (app (app eq true-board) 2)) 0)))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let col_idx (app (app sub 3) 1) (let below_row (app (app add row_idx) 1) (app bool (app (app gt (app (app subscript true-board) (pair below_row col_idx))) 0)))))))",
  "(lam (lam (let $v0 true-board.shape (let row_idx (app (app subscript (app np-arange n_rows)) (pair (slice 0 inf) ())) (let col_idx (app (app subscript (app np-arange n_cols)) (pair () (slice 0 inf))) (let region_mask (app (app and (app (app gt row_idx) 3)) (app (app lt col_idx) 4)) (let unrevealed_ship_mask (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app and region_mask) unrevealed_ship_mask))))))))))",
  "(lam (lam (let f_index (app (app sub (app ord \"F\")) (app ord \"A\")) (let rows_after_f (app (app slice (app (app add f_index) 1)) ()) (let true_sub (app (app subscript true-board) (pair rows_after_f (slice 0 inf))) (let partial_sub (app (app subscript partial-board) (pair rows_after_f (slice 0 inf))) (let concealed_ship_tiles (app (app and (app (app gt true_sub) 0)) (app (app eq partial_sub) unknown)) (app bool (app np-any concealed_ship_tiles)))))))))",
  "(lam (lam (let row 6 (let unrevealed (app (app eq (app (app subscript partial-board) (pair row (slice 0 inf)))) unknown) (let ship_tiles (app (app gt (app (app subscript true-board) (pair row (slice 0 inf)))) 0) (app bool (app np-any (app (app and unrevealed) ship_tiles))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let hidden_ship_in_row (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ship_in_row))))))",
  "(lam (lam (let region_mask (app np-zeros_like true-board) (let $v0 1 (let unrevealed_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app and region_mask) unrevealed_ship))))))))",
  "(lam (lam (let col_idx 7 (let hidden_ship_mask (app (app and (app (app eq (app (app subscript partial-board) (pair (slice 0 6) col_idx))) unknown)) (app (app gt (app (app subscript true-board) (pair (slice 0 6) col_idx))) 0)) (app bool (app np-any hidden_ship_mask))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"C\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_index) (let partial_row (app (app subscript partial-board) row_index) (let hidden_ship_mask (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any hidden_ship_mask))))))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let ship_tiles (app (app gt true-board) 0) (let cols (app np-arange (app (app subscript true-board.shape) 1)) (let after_four (app (app gte cols) 4) (let after_four_mask (app (app subscript after_four) (pair np.newaxis (slice 0 inf))) (let target_mask (app (app and (app (app and hidden) ship_tiles)) after_four_mask) (app bool (app np-any target_mask))))))))))",
  "(lam (lam (let neighbors unknown (let $v0 true-board.shape 0))))",
  "(lam (lam (let $v0 true-board.shape (let mid_row (app (app unknown n_rows) 2) (let mid_col (app (app unknown n_cols) 2) (let q1_true (app (app subscript true-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let q1_part (app (app subscript partial-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let q2_true (app (app subscript true-board) (pair (slice 0 mid_row) (slice mid_col inf))) (let q2_part (app (app subscript partial-board) (pair (slice 0 mid_row) (slice mid_col inf))) (let q1_has_hidden_ship (app np-any (app (app and (app (app gt q1_true) 0)) (app (app eq q1_part) unknown))) (let q2_has_hidden_ship (app np-any (app (app and (app (app gt q2_true) 0)) (app (app eq q2_part) unknown))) (app bool (app (app or q1_has_hidden_ship) q2_has_hidden_ship)))))))))))))",
  "(lam (lam (let col_index 2 (let ship_mask (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_index))) 0) (let hidden_mask (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_index))) unknown) (app bool (app np-any (app (app and ship_mask) hidden_mask))))))))",
  "(lam (lam (let $v0 true-board.shape (let half_rows (app (app unknown n_rows) 2) (let half_cols (app (app unknown n_cols) 2) (let true_q1 (app (app subscript true-board) (pair (slice 0 half_rows) (slice 0 half_cols))) (let partial_q1 (app (app subscript partial-board) (pair (slice 0 half_rows) (slice 0 half_cols))) (let unrevealed_ship_in_q1 (app np-any (app (app and (app (app gt true_q1) 0)) (app (app eq partial_q1) unknown))) (app bool unrevealed_ship_in_q1)))))))))",
  "(lam (lam (let row_limit (app (app sub (app ord \"E\")) (app ord \"A\")) (let col_limit (app (app sub 4) 1) (let true_region (app (app subscript true-board) (pair (slice 0 row_limit) (slice 0 col_limit))) (let partial_region (app (app subscript partial-board) (pair (slice 0 row_limit) (slice 0 col_limit))) (let mask_unrevealed (app (app eq partial_region) unknown) (let mask_ship (app (app gt true_region) 0) (app bool (app np-any (app (app and mask_unrevealed) mask_ship)))))))))))",
  "(lam (lam (let ship_labels (app np-unique true-board) (let ship_labels (app (app subscript ship_labels) (app (app gt ship_labels) 0)) 0))))",
  "(lam (lam (let unrevealed (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript unrevealed) (pair 2 (slice 0 inf))))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (slice 5 inf)) (let sub_partial (app (app subscript partial-board) (slice 5 inf)) (app bool (app np-any (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown))))))))",
  "(lam (lam (let row_index 0 (let hidden_ship_mask (app (app and (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app (app gt (app (app subscript true-board) row_index)) 0)) (app bool (app np-any hidden_ship_mask))))))",
  "(lam (lam (let unrevealed_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool ('app', ('app', 'subscript', 'unrevealed_ship'), ('pair', ('slice', '4', 'inf'), ('slice', '0', 'inf'))).any))))",
  "(lam (lam (let hidden_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let cols (app (app subscript (app np-arange (app (app subscript true-board.shape) 1))) (pair () (slice 0 inf))) (let after4 (app (app gte cols) 4) (app bool (app np-any (app (app and hidden_ship) after4))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let mask_ship (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (let mask_hidden (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (app bool (app np-any (app (app and mask_ship) mask_hidden))))))))",
  "(lam (lam (let green_cells (app np-argwhere (app (app eq true-board) 2)) 0)))",
  "(lam (lam (let region_mask (app np-zeros_like true-board) (let $v0 1 (let hidden_ships_in_region (app (app and (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) region_mask) (app bool (app np-any hidden_ships_in_region)))))))",
  "(lam (lam (let green_coords (app np-argwhere (app (app eq true-board) 2)) (let cols (app (app subscript green_coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) (let max_length 0 (let info unknown 1))))))",
  "(lam (lam (let row_mask (app (app lt (app np-arange (app (app subscript true-board.shape) 0))) 4) (let col_mask (app (app gt (app np-arange (app (app subscript true-board.shape) 1))) 4) (let region_mask (app (app np-outer row_mask) col_mask) (let ship_mask (app (app gt true-board) 0) (let hidden_mask (app (app eq partial-board) unknown) (app bool (app np-any (app (app and (app (app and region_mask) ship_mask)) hidden_mask))))))))))",
  "(lam (lam (let target_rows unknown (let row_mask (app np-zeros_like true-board) (let $v0 1 (let ship_mask (app (app gt true-board) 0) (let unrevealed_mask (app (app eq partial-board) unknown) (app bool (app np-any (app (app and (app (app and row_mask) ship_mask)) unrevealed_mask))))))))))",
  "(lam (lam (let row_index 2 (let hidden_ship_mask (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ship_mask))))))",
  "(lam (lam (let rows_below_E (app (app gt (app np-arange (app (app subscript true-board.shape) 0))) 4) (let cols_after_5 (app (app gt (app np-arange (app (app subscript true-board.shape) 1))) 5) (let region_mask (app (app np-outer rows_below_E) cols_after_5) (let hidden_ship_tiles_in_region (app (app and (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) region_mask) (app bool (app np-any hidden_ship_tiles_in_region))))))))",
  "(lam (lam (let unrevealed (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let row_limit (app (app sub (app ord \"c\")) (app ord \"a\")) (let col_limit (app (app sub 5) 1) (let region_mask (app np-zeros_like unrevealed) (let $v0 1 (app bool (app np-any (app (app and unrevealed) region_mask))))))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (pair (slice 0 2) (slice 0 4))) (let sub_partial (app (app subscript partial-board) (pair (slice 0 2) (slice 0 4))) (app bool ('app', ('app', 'and', ('app', ('app', 'gt', 'sub_true'), '0')), ('app', ('app', 'eq', 'sub_partial'), 'unknown')).any)))))",
  "(lam (lam (let unrevealed_ship (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (app bool (app (app or (app np-any (app (app subscript unrevealed_ship) 2))) (app np-any (app (app subscript unrevealed_ship) 4)))))))",
  "(lam (lam (let orange_positions (app np-argwhere (app (app eq true-board) 4)) (let cols (app (app subscript orange_positions) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"f\")) (app ord \"a\")) (let region_true (app (app subscript true-board) (pair row_idx (slice 0 5))) (let region_partial (app (app subscript partial-board) (pair row_idx (slice 0 5))) (let region_true (app (app subscript region_true) (slice 0 4)) (let region_partial (app (app subscript region_partial) (slice 0 4)) (let hidden_ship_tiles (app (app and (app (app gt region_true) 0)) (app (app eq region_partial) unknown)) (app bool (app np-any hidden_ship_tiles))))))))))",
  "(lam (lam (let row_F 5 (let row_G 6 (let f_slice (app (app gt (app (app subscript true-board) (pair row_F (slice 6 inf)))) 0) (let f_unrevealed (app (app eq (app (app subscript partial-board) (pair row_F (slice 6 inf)))) unknown) (let g_slice (app (app gt (app (app subscript true-board) (pair row_G (slice 0 inf)))) 0) (let g_unrevealed (app (app eq (app (app subscript partial-board) (pair row_G (slice 0 inf)))) unknown) (app bool (app (app or (app np-any (app (app and f_slice) f_unrevealed))) (app np-any (app (app and g_slice) g_unrevealed))))))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) (app np-any (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown))))))",
  "(lam (lam (let rows_mask (app np-zeros_like true-board) (let $v0 1 (let ship_mask (app (app gt true-board) 0) (let hidden_mask (app (app eq partial-board) unknown) (app bool (app np-any (app (app and (app (app and rows_mask) ship_mask)) hidden_mask)))))))))",
  "(lam (lam (let orange_coords (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript orange_coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript orange_coords) (pair (slice 0 inf) 1)) (let $v0 true-board.shape (let bottom_row rows.max (let col (app (app subscript cols) 0) (let below (app (app add bottom_row) 1) 0)))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let hidden_ships_in_E (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ships_in_E))))))",
  "(lam (lam (let true_even_cols (app (app subscript true-board) (pair (slice 0 inf) (slice 1 inf))) (let partial_even_cols (app (app subscript partial-board) (pair (slice 0 inf) (slice 1 inf))) (let unrevealed_ships_in_evens (app (app and (app (app gt true_even_cols) 0)) (app (app eq partial_even_cols) unknown)) (app bool (app np-any unrevealed_ships_in_evens)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let hidden_ships_in_G (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ships_in_G))))))",
  "(lam (lam (let $v0 true-board.shape 0)))",
  "(lam (lam (let ship_ids (app (app sub (app set (app np-unique true-board))) unknown) 0)))",
  "(lam (lam (let known_mask (app (app or (app (app eq partial-board) 2)) (app (app eq partial-board) 4)) (let $v0 (app np-where known_mask) (let known_ids (app set (app np-unique (app (app subscript partial-board) known_mask))) 0)))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 4)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam 0))",
  "(lam (lam (let ship_colors (app (app sub (app set (app np-unique true-board))) unknown) (let discovered_colors (app (app sub (app set (app np-unique partial-board))) unknown) (let remaining_colors (app (app sub ship_colors) discovered_colors) (let coords (app np-argwhere (app (app eq true-board) target_color)) (app bool (app np-any (app (app eq (app (app subscript coords) (pair (slice 0 inf) 1))) 5)))))))))",
  "(lam (lam (let all_ships unknown (let revealed_ships unknown (let remaining (app (app sub all_ships) revealed_ships) (let ship_value remaining.pop (let positions (app np-argwhere (app (app eq true-board) ship_value)) (app np-any (app (app eq (app (app subscript positions) (pair (slice 0 inf) 1))) 4)))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) (let unrevealed_ship_in_H (app (app and (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app bool (app np-any unrevealed_ship_in_H))))))",
  "(lam (lam (let row_cut (app (app sub (app ord \"E\")) (app ord \"A\")) (let col_cut 4 (let true_region (app (app subscript true-board) (pair (slice 0 row_cut) (slice col_cut inf))) (let partial_region (app (app subscript partial-board) (pair (slice 0 row_cut) (slice col_cut inf))) (let unrevealed_ship_tiles (app (app and (app (app gt true_region) 0)) (app (app eq partial_region) unknown)) (app bool (app np-any unrevealed_ship_tiles)))))))))",
  "(lam (lam (let ship_ids unknown (let last_ships unknown (let last_id (app (app subscript last_ships) 0) (let $v0 true-board.shape (let purple_positions (app np-argwhere (app (app eq true-board) 3)) 0)))))))",
  "(lam (lam 0))",
  "(lam (lam (let ALL_SHIPS unknown (let revealed (app (app and (app set (app np-unique partial-board))) ALL_SHIPS) (let unknown (app (app sub ALL_SHIPS) revealed) (let unknown_code unknown.pop (let yellow_code 4 (let $v0 (app np-where (app (app eq true-board) unknown_code)) 0))))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (pair (slice 4 8) (slice 0 inf))) (let sub_partial (app (app subscript partial-board) (pair (slice 4 8) (slice 0 inf))) (let hidden_ship_tiles (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app bool (app np-any hidden_ship_tiles)))))))",
  "(lam (lam (let rowA_true (app (app subscript true-board) (pair 0 (slice 0 inf))) (let rowA_partial (app (app subscript partial-board) (pair 0 (slice 0 inf))) (let hidden_ship_tiles (app (app and (app (app gt rowA_true) 0)) (app (app eq rowA_partial) unknown)) (app bool (app np-any hidden_ship_tiles)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let cols (app (app slice 0) 4) (let unrevealed_ships (app (app and (app (app gt (app (app subscript true-board) (pair row_idx cols))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx cols))) unknown)) (app bool (app np-any unrevealed_ships)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let true_segment (app (app subscript true-board) (pair row_idx (slice 0 8))) (let partial_segment (app (app subscript partial-board) (pair row_idx (slice 0 8))) (let unrevealed_ship_mask (app (app and (app (app gt true_segment) 0)) (app (app eq partial_segment) unknown)) (app bool (app np-any unrevealed_ship_mask))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"B\")) (app ord \"A\")) (let true_segment (app (app subscript true-board) (pair row_index (slice 0 8))) (let partial_segment (app (app subscript partial-board) (pair row_index (slice 0 8))) (let unrevealed_orange (app (app and (app (app eq true_segment) 4)) (app (app eq partial_segment) unknown)) (app bool (app np-any unrevealed_orange))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) (let is_purple (app (app eq (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 3) (let is_unrevealed (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (app bool (app np-any (app (app and is_purple) is_unrevealed))))))))",
  "(lam (lam (let column_1 (app (app subscript true-board) (pair (slice 0 inf) 0)) (let ship_ids (app set (app (app subscript column_1) (app (app gt column_1) 0))) (app (app gt (app len ship_ids)) 1)))))",
  "(lam (lam (let row_index 3 (let unrevealed_in_row (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_in_row))))))",
  "(lam (lam (let true_col (app (app subscript true-board) (pair (slice 0 inf) 0)) (let partial_col (app (app subscript partial-board) (pair (slice 0 inf) 0)) (let unrevealed_ships (app (app and (app (app gt true_col) 0)) (app (app eq partial_col) unknown)) (app bool (app np-any unrevealed_ships)))))))",
  "(lam (lam (let col_idx 7 (let ship_tiles (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and ship_tiles) hidden_tiles))))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"H\")) (app ord \"A\")) (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (pair (slice 0 3) (slice 5 8))) (let sub_partial (app (app subscript partial-board) (pair (slice 0 3) (slice 5 8))) (let unrevealed_ship (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app bool (app np-any unrevealed_ship)))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (pair (slice 0 3) (slice 0 3))) (let sub_partial (app (app subscript partial-board) (pair (slice 0 3) (slice 0 3))) (let hidden_ship_parts (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app np-any hidden_ship_parts))))))",
  "(lam (lam (let green_coords (app np-argwhere (app (app eq true-board) 2)) (let rows (app (app subscript green_coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript green_coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let red_coords (app np-argwhere (app (app eq true-board) 1)) (let rows (app (app subscript red_coords) (pair (slice 0 inf) 0)) (app bool (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let row (app (app sub (app ord \"E\")) (app ord \"A\")) (let col (app (app sub 7) 1) (app (app gt (app (app subscript true-board) (pair row col))) 0)))))",
  "(lam (lam (let col 4 (let hidden_ship_parts (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col))) unknown)) (app bool (app np-any hidden_ship_parts))))))",
  "(lam (lam (let region_true (app (app subscript true-board) (pair (slice 4 7) (slice 0 3))) (let region_partial (app (app subscript partial-board) (pair (slice 4 7) (slice 0 3))) (app bool (app np-any (app (app and (app (app gt region_true) 0)) (app (app eq region_partial) unknown))))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 4)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_idx) (let partial_row (app (app subscript partial-board) row_idx) (let unrevealed_ships (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool unrevealed_ships.any)))))))",
  "(lam (lam (let target_row 3 (let ship_cols (app (app subscript (app np-where (app (app gt (app (app subscript true-board) (pair target_row (slice 0 inf)))) 0))) 0) (let ship_id (app (app subscript true-board) (pair target_row (app (app subscript ship_cols) 0))) (let ship_cells (app np-argwhere (app (app eq true-board) ship_id)) (let all_rows (app (app subscript ship_cells) (pair (slice 0 inf) 0)) (app np-all (app (app eq all_rows) (app (app subscript all_rows) 0))))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"F\")) (app ord \"A\")) (let unrevealed_in_row (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any unrevealed_in_row))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let ship_cells (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (let hidden_ship_cells (app (app and (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) ship_cells) (app bool (app np-any hidden_ship_cells)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let row_true (app (app subscript true-board) row_idx) (let row_partial (app (app subscript partial-board) row_idx) (let hidden_ship_mask (app (app and (app (app ne row_true) 0)) (app (app eq row_partial) unknown)) (let ship_id (app (app subscript (app (app subscript row_true) hidden_ship_mask)) 0) (let ship_coords (app np-argwhere (app (app eq true-board) ship_id)) (let ship_rows (app (app subscript ship_coords) (pair (slice 0 inf) 0)) (app np-all (app (app eq ship_rows) (app (app subscript ship_rows) 0))))))))))))",
  "(lam (lam (let col_idx 7 (let true_col (app (app subscript true-board) (pair (slice 0 inf) col_idx)) (let partial_col (app (app subscript partial-board) (pair (slice 0 inf) col_idx)) (app bool (app np-any (app (app and (app (app gt true_col) 0)) (app (app eq partial_col) unknown)))))))))",
  "(lam (lam (let row_idx 1 (let hidden_mask (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ship_mask (app (app gt (app (app subscript true-board) row_idx)) 0) (app bool (app np-any (app (app and hidden_mask) ship_mask))))))))",
  "(lam (lam (let ship_ids unknown (let partially_found unknown (let coords (app np-argwhere (app (app eq true-board) target)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"H\")) (app ord \"A\")) (let unrevealed_in_row (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any unrevealed_in_row))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"G\")) (app ord \"A\")) (let ship_parts_in_true (app (app gt (app (app subscript true-board) row_index)) 0) (let hidden_in_partial (app (app eq (app (app subscript partial-board) row_index)) unknown) (app bool (app np-any (app (app and ship_parts_in_true) hidden_in_partial))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let unrevealed (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (let cols (app (app subscript (app np-where unrevealed)) 0) (app (app eq (app (app sub cols.max) cols.min)) (app (app sub cols.size) 1)))))))",
  "(lam (lam (let row_idx 1 (let hidden_cells (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (let ship_cells (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (app bool (app np-any (app (app and hidden_cells) ship_cells))))))))",
  "(lam (lam (let hidden_ships (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let rows_with_hidden (app (app subscript (app np-where hidden_ships.any)) 0) (let target_row (app (app subscript rows_with_hidden) 0) (let ship_ids_in_row (app (app subscript (app (app subscript true-board) target_row)) (app (app subscript hidden_ships) target_row)) (let ship_id (app (app subscript ship_ids_in_row) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (app np-all (app (app eq (app (app subscript coords) (pair (slice 0 inf) 0))) (app (app subscript coords) (pair 0 0))))))))))))",
  "(lam (lam (let col 0 (let ship_cells (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col))) 0) (let hidden_cells (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col))) unknown) (app bool (app np-any (app (app and ship_cells) hidden_cells))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let unrevealed_ship_parts (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ship_parts))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"G\")) (app ord \"A\")) (let undiscovered (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any undiscovered))))))",
  "(lam (lam (let col_idx 2 (let ships_in_col (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let hidden_in_col (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and ships_in_col) hidden_in_col))))))))",
  "(lam (lam (let col_idx 2 (let target_ships unknown (let ship_id (app (app subscript target_ships) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) None))))))))",
  "(lam (lam (let hidden_ship_tiles (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let ship_ids (app np-unique (app (app subscript true-board) hidden_ship_tiles)) (let ship_id (app (app subscript ship_ids) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))))",
  "(lam (lam (let row_idx 7 (let ship_parts (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (let still_hidden (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (app bool (app np-any (app (app and ship_parts) still_hidden))))))))",
  "(lam (lam (let col_idx 5 (let undiscovered_in_col (app (app and (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) (app bool (app np-any undiscovered_in_col))))))",
  "(lam (lam (let probed_cols (app (app subscript (app np-where ('app', ('app', 'ne', 'partial-board'), 'unknown').any)) 0) 0)))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let true_row (app (app subscript true-board) (pair row_idx (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_idx (slice 0 inf))) (let hidden_ship_parts (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any hidden_ship_parts))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let ncols (app (app subscript true-board.shape) 1) (let hidden_ship_cols (app (app subscript (app np-where (app (app and (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)))) 0) 0)))))",
  "(lam (lam (let col_idx 7 (let hidden_mask (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (let ship_mask (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (app bool (app np-any (app (app and hidden_mask) ship_mask))))))))",
  "(lam (lam (let col_idx 7 (let hidden_in_col (app np-argwhere (app (app and (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) (app (app eq (app (app subscript (app np-arange (app (app subscript true-board.shape) 1))) (pair () (slice 0 inf)))) col_idx))) (let $v0 (app (app subscript hidden_in_col) 0) (let ship_id (app (app subscript true-board) (pair r0 c0)) (let ship_coords (app np-argwhere (app (app eq true-board) ship_id)) (let rows (app np-unique (app (app subscript ship_coords) (pair (slice 0 inf) 0))) (let cols (app np-unique (app (app subscript ship_coords) (pair (slice 0 inf) 1))) (app (app and (app (app eq cols.size) 1)) (app (app gt rows.size) 1)))))))))))",
  "(lam (lam (let rows unknown (let col 7 (let region_has_hidden_ship (app np-any (app (app and (app (app gt (app (app subscript true-board) (pair rows col))) 0)) (app (app eq (app (app subscript partial-board) (pair rows col))) unknown))) (app bool region_has_hidden_ship))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (pair (slice 0 3) (slice 0 3))) (let sub_partial (app (app subscript partial-board) (pair (slice 0 3) (slice 0 3))) (let unrevealed_ship_tiles (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app bool (app np-any unrevealed_ship_tiles)))))))",
  "(lam (lam (let row_idx 6 (let mask (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any mask))))))",
  "(lam (lam (let red_coords (app np-argwhere (app (app eq true-board) 1)) (let row_indices (app (app subscript red_coords) (pair (slice 0 inf) 0)) (app np-all (app (app eq row_indices) (app (app subscript row_indices) 0)))))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let num_rows (app (app subscript true-board.shape) 0) (let candidate_rows unknown (let target_row (app (app subscript candidate_rows) 0) (let mask (app (app and (app (app gt true-board) 0)) hidden) (let ship_ids (app np-unique (app (app subscript (app (app subscript true-board) (pair target_row (slice 0 inf)))) (app (app subscript mask) (pair target_row (slice 0 inf))))) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) (let ship_id (app (app subscript ship_ids) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) (app (app eq ('app', 'np-unique', 'rows').size) 1)))))))))))))",
  "(lam (lam (let col_idx 7 (let hidden_ships_in_col (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app bool (app np-any hidden_ships_in_col))))))",
  "(lam (lam (let col_idx 7 (let ship_ids_in_col8 (app np-unique (app (app subscript true-board) (pair (slice 0 inf) col_idx))) (let ship_ids_in_col8 (app (app subscript ship_ids_in_col8) (app (app gt ship_ids_in_col8) 0)) (let ship_id (app (app subscript ship_ids_in_col8) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let is_vertical (app np-all (app (app eq (app (app subscript coords) (pair (slice 0 inf) 1))) (app (app subscript coords) (pair 0 1)))) (app bool is_vertical)))))))))",
  "(lam (lam (let hidden_ship_cells (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool ('app', ('app', 'subscript', 'hidden_ship_cells'), ('pair', ('slice', '0', '3'), ('slice', '0', 'inf'))).any))))",
  "(lam (lam (let col_idx (app (app sub 7) 1) (let mask_ship (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let mask_hidden (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and mask_ship) mask_hidden))))))))",
  "(lam (lam (let rows unknown (let tiles_in_abc ('app', ('app', 'subscript', 'true-board'), ('pair', 'rows', ('slice', '0', 'inf'))).ravel (let ship_labels (app (app sub (app set (app np-unique tiles_in_abc))) unknown) 1)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) (let undiscovered_in_H (app (app and (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app (app gt (app (app subscript true-board) row_idx)) 0)) (app bool (app np-any undiscovered_in_H))))))",
  "(lam (lam (let hidden_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let ship_ids (app np-unique (app (app subscript true-board) hidden_ship)) (let ship_id (app (app subscript ship_ids) 0) (let ship_cells (app np-argwhere (app (app and (app (app eq true-board) ship_id)) hidden_ship)) (let rows (app (app subscript ship_cells) (pair (slice 0 inf) 0)) (let cols (app (app subscript ship_cells) (pair (slice 0 inf) 1)) (let is_vertical (app (app eq ('app', 'np-unique', 'cols').size) 1) is_vertical)))))))))",
  "(lam (lam (let row_idx 0 (let ship_mask (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (let hidden_mask (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (app bool (app np-any (app (app and ship_mask) hidden_mask))))))))",
  "(lam (lam (let row_idx 1 (let undiscovered_mask (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any undiscovered_mask))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let ships_in_true (app (app gt (app (app subscript true-board) row_idx)) 0) (let hidden_in_partial (app (app eq (app (app subscript partial-board) row_idx)) unknown) (app bool (app np-any (app (app and ships_in_true) hidden_in_partial))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let undiscovered_parts (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any undiscovered_parts))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"G\")) (app ord \"A\")) (let undiscovered (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app bool (app np-any undiscovered))))))",
  "(lam (lam (let col_idx 7 (let undiscovered (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) undiscovered)))))))",
  "(lam (lam (let $v0 true-board.shape (let corners unknown 0))))",
  "(lam (lam (let misses (app np-argwhere (app (app eq partial-board) 0)) 0)))",
  "(lam (lam (app bool (app (app gt (app (app subscript true-board) (pair 0 0))) 0))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (app np-any (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"A\")) (app ord \"A\")) (let col_index (app (app sub 8) 1) (app (app ne (app (app subscript true-board) (pair row_index col_index))) 0)))))",
  "(lam (lam (let hidden_ship (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let hidden_pos (app np-argwhere hidden_ship) (let ship_positions unknown (let orange_closest 0 (app (app gt orange_closest) 0)))))))",
  "(lam (lam (let revealed (app (app gt partial-board) 0) (let $v0 (app np-unique (app (app subscript partial-board) revealed)) (let target_id (app (app subscript ship_ids) (app np-argmin counts)) (let coords (app np-argwhere (app (app eq true-board) target_id)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) 0))))))))",
  "(lam (lam (let hit_cells (app (app gt partial-board) 0) (let ship_ids (app np-unique (app (app subscript partial-board) hit_cells)) (let ship_id (app (app subscript ship_ids) 0) (let positions (app np-argwhere (app (app eq true-board) ship_id)) (let cols (app (app subscript positions) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0))))))))))",
  "(lam (lam (app (app ne (app (app subscript true-board) (pair 7 7))) 0)))",
  "(lam (lam (let $v0 (app np-where (app (app eq true-board) 4)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))",
  "(lam (lam (let all_ships (app (app sub (app set (app np-unique true-board))) unknown) (let revealed_ships (app (app sub (app set (app np-unique partial-board))) unknown) (let hidden_ships (app (app sub all_ships) revealed_ships) (let last_ship_id hidden_ships.pop (let last_coords (app np-argwhere (app (app eq true-board) last_ship_id)) (let other_coords (app np-argwhere (app (app and (app (app gt true-board) 0)) (app (app ne true-board) last_ship_id))) (let min_dist np.inf 1)))))))))",
  "(lam (lam (let green_cells (app np-argwhere (app (app eq true-board) 2)) (let unseen_ship_cells (app np-argwhere (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) 0))))",
  "(lam (lam (let target_ships unknown (let other_ships unknown (let directions unknown (let $v0 true-board.shape 0))))))",
  "(lam (lam (let mask_ships (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 2) (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 2) (slice 0 inf)))) unknown)) (app bool (app np-any mask_ships)))))",
  "(lam (lam (let red_positions (app np-argwhere (app (app eq true-board) 1)) (let $v0 (pair (app (app subscript red_positions) (pair (slice 0 inf) 0)) (app (app subscript red_positions) (pair (slice 0 inf) 1))) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let rows_to_check unknown (let true_slice (app (app subscript true-board) (pair rows_to_check (slice 0 inf))) (let partial_slice (app (app subscript partial-board) (pair rows_to_check (slice 0 inf))) (let ships_hidden (app (app and (app (app gt true_slice) 0)) (app (app eq partial_slice) unknown)) (app bool (app np-any ships_hidden))))))))",
  "(lam (lam (let tb_sub (app (app subscript true-board) (pair (slice 0 4) (slice 0 inf))) (let pb_sub (app (app subscript partial-board) (pair (slice 0 4) (slice 0 inf))) (let is_ship (app (app gt tb_sub) 0) (let is_hidden (app (app eq pb_sub) unknown) (app np-any (app (app and is_ship) is_hidden))))))))",
  "(lam (lam (let rows_ab (app (app subscript true-board) (pair (slice 0 2) (slice 0 inf))) (let partial_ab (app (app subscript partial-board) (pair (slice 0 2) (slice 0 inf))) (let unrevealed_ship (app (app and (app (app gt rows_ab) 0)) (app (app eq partial_ab) unknown)) (app bool (app np-any unrevealed_ship)))))))",
  "(lam (lam (let hidden_ship_tiles (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let ship_ids (app np-unique (app (app subscript true-board) hidden_ship_tiles)) (let ship_id (app (app subscript ship_ids) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let all_cols_equal (app np-all (app (app eq (app (app subscript coords) (pair (slice 0 inf) 1))) (app (app subscript coords) (pair 0 1)))) (app bool all_cols_equal))))))))",
  "(lam (lam (let orange_positions (app np-argwhere (app (app eq true-board) 4)) (let cols (app (app subscript orange_positions) (pair (slice 0 inf) 1)) (let is_vertical (app np-all (app (app eq cols) (app (app subscript cols) 0))) (app bool is_vertical))))))",
  "(lam (lam (let target_rows unknown (let true_sub (app (app subscript true-board) (pair target_rows (slice 0 inf))) (let partial_sub (app (app subscript partial-board) (pair target_rows (slice 0 inf))) (app np-any (app (app and (app (app gt true_sub) 0)) (app (app eq partial_sub) unknown))))))))",
  "(lam (lam (let target_rows unknown (let col_limit 2 (let hidden_ship_cells (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let hidden_in_target_rows (app (app subscript hidden_ship_cells) (pair target_rows (slice 0 inf))) (app bool (app np-any (app (app subscript hidden_in_target_rows) (pair (slice 0 inf) (slice 0 col_limit)))))))))))",
  "(lam (lam (let green_cells (app np-argwhere (app (app eq true-board) 2)) (let green_col (app (app subscript green_cells) (pair 0 1)) (let ship_ids (app set (app np-unique true-board)) 0)))))",
  "(lam (lam (let rows_to_check unknown 0)))",
  "(lam (lam (let $v0 true-board.shape (let row_start (app (app unknown n_rows) 4) (let row_end (app (app unknown (app (app mul 3) n_rows)) 4) (let col_start (app (app unknown n_cols) 4) (let col_end (app (app unknown (app (app mul 3) n_cols)) 4) (let center_true (app (app subscript true-board) (pair (slice row_start row_end) (slice col_start col_end))) (let center_partial (app (app subscript partial-board) (pair (slice row_start row_end) (slice col_start col_end))) (let unseen_ship (app (app and (app (app gt center_true) 0)) (app (app eq center_partial) unknown)) (app bool (app np-any unseen_ship))))))))))))",
  "(lam (lam (let rows unknown (let unrevealed_ships (app (app and (app (app gt (app (app subscript true-board) rows)) 0)) (app (app eq (app (app subscript partial-board) rows)) unknown)) (app bool (app np-any unrevealed_ships))))))",
  "(lam (lam (let cols unknown (let true_cols (app (app subscript true-board) (pair (slice 0 inf) cols)) (let part_cols (app (app subscript partial-board) (pair (slice 0 inf) cols)) (app bool (app np-any (app (app and (app (app gt true_cols) 0)) (app (app eq part_cols) unknown)))))))))",
  "(lam (lam (let neighbors unknown (let $v0 true-board.shape (let red_positions (app np-argwhere (app (app eq true-board) 1)) 0)))))",
  "(lam (lam (let ship_types (app np-unique true-board) (let ship_types (app (app subscript ship_types) (app (app gt ship_types) 0)) (let incomplete unknown 0)))))",
  "(lam (lam 0))",
  "(lam (lam (let rows unknown (let cols unknown (let true_sub (app (app subscript true-board) (app (app np-ix_ rows) cols)) (let partial_sub (app (app subscript partial-board) (app (app np-ix_ rows) cols)) (let hidden_ship (app (app and (app (app gt true_sub) 0)) (app (app eq partial_sub) unknown)) (app bool (app np-any hidden_ship)))))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (pair (slice 0 4) (slice 0 4))) (let sub_partial (app (app subscript partial-board) (pair (slice 0 4) (slice 0 4))) (let hidden_ship_mask (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app bool (app np-any hidden_ship_mask)))))))",
  "(lam (lam (let ship_ids (app (app sub (app set (app np-unique true-board))) unknown) (let undiscovered unknown (let ship (app (app subscript undiscovered) 0) (let neighbors unknown (let $v0 true-board.shape 0)))))))",
  "(lam (lam (let hidden_ship_tiles (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let $v0 (app np-nonzero hidden_ship_tiles) (let $v1 (pair (app (app sub (app (app subscript true-board.shape) 0)) 1) (app (app sub (app (app subscript true-board.shape) 1)) 1)) (let on_top_edge (app (app eq rows) 0) (let on_bottom_edge (app (app eq rows) max_row) (let on_left_edge (app (app eq cols) 0) (let on_right_edge (app (app eq cols) max_col) (app np-any (app (app or (app (app or (app (app or on_top_edge) on_bottom_edge)) on_left_edge)) on_right_edge)))))))))))",
  "(lam (lam (let rows unknown (let cols unknown (let sub_true (app (app subscript true-board) (app (app np-ix_ rows) cols)) (let sub_partial (app (app subscript partial-board) (app (app np-ix_ rows) cols)) (let ship_unrevealed (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app bool (app np-any ship_unrevealed)))))))))",
  "(lam (lam (let red_coords (app np-argwhere (app (app eq true-board) 1)) (let cols (app (app subscript red_coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let unrevealed_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app np-any (app (app subscript unrevealed_ship) (pair unknown (slice 0 inf)))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (pair (slice 0 3) (slice 0 3))) (let sub_partial (app (app subscript partial-board) (pair (slice 0 3) (slice 0 3))) (let hidden_ship_tiles (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app bool (app np-any hidden_ship_tiles)))))))",
  "(lam (lam (let unrevealed (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript unrevealed) (pair (slice 0 4) (slice 4 8))))))))",
  "(lam (lam (let $v0 true-board.shape (let directions unknown 0))))",
  "(lam (lam (let row_start (app (app sub (app ord \"D\")) (app ord \"A\")) (let row_end (app (app sub (app ord \"F\")) (app ord \"A\")) (let col_start (app (app sub 1) 1) (let col_end (app (app sub 3) 1) (let true_region (app (app subscript true-board) (pair (slice row_start (app (app add row_end) 1)) (slice col_start (app (app add col_end) 1)))) (let partial_region (app (app subscript partial-board) (pair (slice row_start (app (app add row_end) 1)) (slice col_start (app (app add col_end) 1)))) (let hidden_ship_mask (app (app and (app (app gt true_region) 0)) (app (app eq partial_region) unknown)) (app bool hidden_ship_mask.any))))))))))",
  "(lam (lam (let $v0 true-board.shape (let ship_ids unknown (let untouched_id () (let neighbors unknown 0))))))",
  "(lam (lam (let region_true (app (app subscript true-board) (pair (slice 5 8) (slice 5 8))) (let region_partial (app (app subscript partial-board) (pair (slice 5 8) (slice 5 8))) (let unrevealed_ship_tiles (app (app and (app (app gt region_true) 0)) (app (app eq region_partial) unknown)) (app bool unrevealed_ship_tiles.any))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (pair (slice 0 3) (slice 5 8))) (let sub_partial (app (app subscript partial-board) (pair (slice 0 3) (slice 5 8))) (app np-any (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)))))))",
  "(lam (lam (let col_idx 5 (let ship_mask (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let hidden_mask (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and ship_mask) hidden_mask))))))))",
  "(lam (lam (let orange_coords (app np-argwhere (app (app eq true-board) 4)) (let cols (app (app subscript orange_coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let border_mask (app np-zeros_like true-board) (let $v0 1 (let $v1 1 (let $v2 1 (let $v3 1 (let ship_mask (app (app gt true-board) 0) (let hidden_mask (app (app eq partial-board) unknown) (app bool (app np-any (app (app and (app (app and border_mask) ship_mask)) hidden_mask))))))))))))",
  "(lam (lam (let green_locs (app np-argwhere (app (app eq partial-board) 2)) (let $v0 partial-board.shape 0))))",
  "(lam (lam (let true_sub (app (app subscript true-board) (pair (slice 6 8) (slice 0 inf))) (let partial_sub (app (app subscript partial-board) (pair (slice 6 8) (slice 0 inf))) (let unrevealed_ship_mask (app (app and (app (app gt true_sub) 0)) (app (app eq partial_sub) unknown)) (app np-any unrevealed_ship_mask))))))",
  "(lam (lam (let edge_mask (app np-zeros_like true-board) (let $v0 1 (let $v1 1 (let $v2 1 (let $v3 1 (let hidden_ship_on_edge (app (app and (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) edge_mask) (app bool (app np-any hidden_ship_on_edge))))))))))",
  "(lam (lam (let $v0 true-board.shape (let center_true (app (app subscript true-board) (app (app np-ix_ mid_row_indices) mid_col_indices)) (let center_partial (app (app subscript partial-board) (app (app np-ix_ mid_row_indices) mid_col_indices)) (let unrevealed_ship_mask (app (app and (app (app gt center_true) 0)) (app (app eq center_partial) unknown)) (app bool (app np-any unrevealed_ship_mask))))))))",
  "(lam (lam (let hit_mask (app (app and (app (app ne partial-board) unknown)) (app (app gt true-board) 0)) (let ship_id (app (app subscript (app np-unique (app (app subscript true-board) hit_mask))) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let unique_cols (app np-unique (app (app subscript coords) (pair (slice 0 inf) 1))) (app (app eq unique_cols.size) 1)))))))",
  "(lam (lam (let orange_coords (app np-argwhere (app (app eq true-board) 4)) (let neighbors unknown (let $v0 true-board.shape 0)))))",
  "(lam (lam (let hidden_ships (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (app bool (app (app or ('app', ('app', 'subscript', 'hidden_ships'), ('pair', '6', ('slice', '0', 'inf'))).any) ('app', ('app', 'subscript', 'hidden_ships'), ('pair', '7', ('slice', '0', 'inf'))).any)))))",
  "(lam (lam (let hidden (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) (slice 0 4)))) unknown) (let ship (app (app gt (app (app subscript true-board) (pair (slice 0 inf) (slice 0 4)))) 0) (app bool (app np-any (app (app and hidden) ship)))))))",
  "(lam (lam (let unrevealed_ship (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let $v0 (app np-where unrevealed_ship) (let $v1 (pair (app (app sub (app (app subscript true-board.shape) 0)) 1) (app (app sub (app (app subscript true-board.shape) 1)) 1)) (let on_edge (app (app or (app (app or (app (app or (app (app eq rows) 0)) (app (app eq rows) max_row))) (app (app eq cols) 0))) (app (app eq cols) max_col)) (app bool (app np-any on_edge))))))))",
  "(lam (lam (let $v0 true-board.shape (let neighbors unknown (let green_positions (app np-argwhere (app (app eq true-board) 2)) 0)))))",
  "(lam (lam (let row_idx 5 (let hidden_ships (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any hidden_ships))))))",
  "(lam (lam (let candidate_ships unknown (let ship (app (app subscript candidate_ships) 0) (let $v0 (app (app subscript (app np-argwhere (app (app eq partial-board) ship))) 0) 0)))))",
  "(lam (lam (let true_slice (app (app subscript true-board) (pair (slice 0 4) (slice 0 inf))) (let partial_slice (app (app subscript partial-board) (pair (slice 0 4) (slice 0 inf))) (let unrevealed_ship (app (app and (app (app gt true_slice) 0)) (app (app eq partial_slice) unknown)) (app bool (app np-any unrevealed_ship)))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (pair (slice 0 3) (slice 0 4))) (let sub_partial (app (app subscript partial-board) (pair (slice 0 3) (slice 0 4))) (let unrevealed_ships (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app bool (app np-any unrevealed_ships)))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (pair (slice 5 8) (slice 0 4))) (let sub_partial (app (app subscript partial-board) (pair (slice 5 8) (slice 0 4))) (let unrevealed_ships (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app bool (app np-any unrevealed_ships)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let hidden_cells (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ship_cells (app (app gt (app (app subscript true-board) row_idx)) 0) (app bool (app np-any (app (app and hidden_cells) ship_cells))))))))",
  "(lam (lam (let $v0 (app np-where (app (app gt partial-board) 0)) (let $v1 (pair (app (app subscript hit_rows) 0) (app (app subscript hit_cols) 0)) (let ship_id (app (app subscript true-board) (pair r c)) (let $v2 true-board.shape 0))))))",
  "(lam (lam (let positions (app np-argwhere (app (app eq true-board) 4)) (let $v0 (pair (app (app subscript positions) (pair (slice 0 inf) 0)) (app (app subscript positions) (pair (slice 0 inf) 1))) (app (app eq ('app', 'np-unique', 'cols').size) 1)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"B\")) (app ord \"A\")) (let unrevealed_in_B (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any unrevealed_in_B))))))",
  "(lam (lam (let row 7 (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair row (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 2)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) (let is_vertical (app (app and (app np-all (app (app eq cols) (app (app subscript cols) 0)))) (app (app gt rows.max) rows.min)) (app bool is_vertical))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let ship_tiles (app (app gt (app (app subscript true-board) row_idx)) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) row_idx)) unknown) (app bool (app np-any (app (app and ship_tiles) hidden_tiles))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let col_slice (app (app slice 4) 8) (let hidden (app (app eq (app (app subscript partial-board) (pair row_idx col_slice))) unknown) (let ships (app (app gt (app (app subscript true-board) (pair row_idx col_slice))) 0) (app bool (app np-any (app (app and hidden) ships)))))))))",
  "(lam (lam (let col_idx 0 (let hidden_ship_in_col (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app bool (app np-any hidden_ship_in_col))))))",
  "(lam (lam (let hidden_ship (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let top_border (app (app subscript hidden_ship) (pair 0 (slice 0 inf))) (let bottom_border (app (app subscript hidden_ship) (pair unknown (slice 0 inf))) (let left_border (app (app subscript hidden_ship) (pair (slice 0 inf) 0)) (let right_border (app (app subscript hidden_ship) (pair (slice 0 inf) unknown)) (app bool (app (app or (app (app or (app (app or (app np-any top_border)) (app np-any bottom_border))) (app np-any left_border))) (app np-any right_border))))))))))",
  "(lam (lam (let all_ships (app (app sub (app set (app np-unique true-board))) unknown) (let revealed (app (app sub (app set (app np-unique partial-board))) unknown) (let remaining (app (app sub all_ships) revealed) (let last_ship_id remaining.pop (let $v0 (app np-where (app (app eq true-board) 2)) (let max_green_col (app np-max green_cols) (let min_query_col 3 (let max_query_col 7 (let $v1 (app np-where (app (app eq true-board) last_ship_id)) 0)))))))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 2)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) (app (app eq ('app', 'np-unique', 'cols').size) 1)))))",
  "(lam (lam (let orange_coords (app np-argwhere (app (app eq true-board) 4)) (let cols (app (app subscript orange_coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let positions (app np-argwhere (app (app eq true-board) 3)) (let row_indices (app (app subscript positions) (pair (slice 0 inf) 0)) (app bool (app np-all (app (app eq row_indices) (app (app subscript row_indices) 0))))))))",
  "(lam (lam (let green_positions (app np-argwhere (app (app eq true-board) 2)) (let half (app (app unknown (app (app subscript true-board.shape) 0)) 2) (app np-all (app (app lt (app (app subscript green_positions) (pair (slice 0 inf) 0))) half))))))",
  "(lam (lam (let n_cols (app (app subscript true-board.shape) 1) (let mid (app (app unknown n_cols) 2) (let $v0 (app np-where (app (app eq true-board) 2)) (app bool (app np-all (app (app lt green_cols) mid))))))))",
  "(lam (lam (let $v0 true-board.shape (let qh (app (app unknown n_rows) 2) (let qw (app (app unknown n_cols) 2) (let green_coords (app np-argwhere (app (app eq true-board) 2)) (let $v1 (app (app subscript green_coords) 0) (let r_start unknown (let c_start unknown (let row_offsets unknown (let col_offsets unknown (let centers unknown 0))))))))))))",
  "(lam (lam (let green_mask (app (app eq true-board) 2) (let $v0 (app np-where green_mask) (let max_row (app (app sub (app (app subscript true-board.shape) 0)) 1) (let max_col (app (app sub (app (app subscript true-board.shape) 1)) 1) (let on_top_edge (app np-all (app (app eq rows) 0)) (let on_bottom_edge (app np-all (app (app eq rows) max_row)) (let on_left_edge (app np-all (app (app eq cols) 0)) (let on_right_edge (app np-all (app (app eq cols) max_col)) (app bool (app (app or (app (app or (app (app or on_top_edge) on_bottom_edge)) on_left_edge)) on_right_edge))))))))))))",
  "(lam (lam (let green_length (app int (app np-sum (app (app eq true-board) 2))) (app (app eq green_length) 3))))",
  "(lam (lam (let $v0 true-board.shape (let start_row (app (app sub (app (app unknown n_rows) 2)) 1) (let start_col (app (app sub (app (app unknown n_cols) 2)) 1) (let center_block (app (app subscript true-board) (pair (slice start_row (app (app add start_row) 2)) (slice start_col (app (app add start_col) 2)))) (app bool (app np-any (app (app gt center_block) 0)))))))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let ships (app (app gt true-board) 0) 0))))",
  "(lam (lam (let tb true-board (let $v0 tb.shape (let neigh_offsets unknown 0)))))",
  "(lam (lam (let $v0 true-board.shape (let touching_ships set (let directions unknown (app (app gt (app len touching_ships)) 2))))))",
  "(lam (lam (let purple_positions (app np-argwhere (app (app eq true-board) 3)) (let neighbors unknown (let $v0 true-board.shape 0)))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let half (app (app unknown n_rows) 2) (let top_true (app (app subscript true-board) (pair (slice 0 half) (slice 0 inf))) (let top_partial (app (app subscript partial-board) (pair (slice 0 half) (slice 0 inf))) (let unrevealed_in_top (app (app and (app (app gt top_true) 0)) (app (app eq top_partial) unknown)) (app bool (app np-any unrevealed_in_top)))))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 1)) (let unique_rows (app np-unique (app (app subscript coords) (pair (slice 0 inf) 0))) (let unique_cols (app np-unique (app (app subscript coords) (pair (slice 0 inf) 1))) (app (app and (app (app eq unique_cols.size) 1)) (app (app gt unique_rows.size) 1)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let red_on_G_unrevealed (app (app and (app (app eq (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 1)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any red_on_G_unrevealed))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 2)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app bool (app np-all (app (app eq cols) (app (app subscript cols) 0))))))))",
  "(lam (lam (app np-any (app (app eq (app (app subscript true-board) (pair 4 (slice 0 inf)))) 3))))",
  "(lam (lam (let $v0 true-board.shape (let $v1 (pair (app (app unknown nrows) 2) (app (app unknown ncols) 2)) (let r_slice (app (app slice (app (app sub mid_r) 1)) (app (app add mid_r) 2)) (let c_slice (app (app slice (app (app sub mid_c) 1)) (app (app add mid_c) 2)) (let center_true (app (app subscript true-board) (pair r_slice c_slice)) (let center_partial (app (app subscript partial-board) (pair r_slice c_slice)) (let mask (app (app and (app (app gt center_true) 0)) (app (app eq center_partial) unknown)) (app bool (app np-any mask)))))))))))",
  "(lam (lam (let r_slice (app (app slice 2) 6) (let c_slice (app (app slice 2) 6) (let true_center (app (app subscript true-board) (pair r_slice c_slice)) (let partial_center (app (app subscript partial-board) (pair r_slice c_slice)) (let hidden_ship_tiles (app (app and (app (app gt true_center) 0)) (app (app eq partial_center) unknown)) (app np-any hidden_ship_tiles))))))))",
  "(lam (lam (let border_mask (app np-zeros true-board.shape) (let $v0 1 (let $v1 1 (let $v2 1 (let $v3 1 (let unrevealed_edge_ships (app (app and (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) border_mask) (app bool (app np-any unrevealed_edge_ships))))))))))",
  "(lam (lam (let $v0 true-board.shape (let rows (app (app subscript (app np-arange m)) (pair (slice 0 inf) ())) (let cols (app (app subscript (app np-arange n)) (pair () (slice 0 inf))) (let edge_except_top (app (app and (app (app or (app (app or (app (app eq rows) (app (app sub m) 1))) (app (app eq cols) 0))) (app (app eq cols) (app (app sub n) 1)))) (app (app ne rows) 0)) (let hidden (app (app eq partial-board) unknown) (let ship (app (app gt true-board) 0) (app bool (app np-any (app (app and (app (app and edge_except_top) hidden)) ship)))))))))))",
  "(lam (lam (let $v0 true-board.shape (let corners unknown 0))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let top_half (app (app subscript hidden_ships) (pair (slice 0 4) (slice 0 inf))) (let bottom_half (app (app subscript hidden_ships) (pair (slice 4 8) (slice 0 inf))) (let left_half (app (app subscript hidden_ships) (pair (slice 0 inf) (slice 0 4))) (let right_half (app (app subscript hidden_ships) (pair (slice 0 inf) (slice 4 8))) 0)))))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let half (app (app unknown n_rows) 2) (let top_true (app (app subscript true-board) (pair (slice 0 half) (slice 0 inf))) (let top_partial (app (app subscript partial-board) (pair (slice 0 half) (slice 0 inf))) (let unrevealed_ship_mask (app (app and (app (app gt top_true) 0)) (app (app eq top_partial) unknown)) (let ships_in_top_half (app np-unique (app (app subscript top_true) unrevealed_ship_mask)) (app (app gte ships_in_top_half.size) 2)))))))))",
  "(lam (lam (let rows unknown (let unrevealed_ships (app (app and (app (app ne (app (app subscript true-board) (pair rows (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair rows (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ships))))))",
  "(lam (lam (let $v0 true-board.shape (let neighs unknown 0))))",
  "(lam (lam (let $v0 (app np-where (app (app eq true-board) 3)) (app np-all (app (app eq cols) (app (app subscript cols) 0))))))",
  "(lam (lam (let positions (app np-argwhere (app (app eq true-board) 4)) (let cols (app (app subscript positions) (pair (slice 0 inf) 1)) (app (app eq ('app', 'np-unique', 'cols').size) 1)))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 2)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let rows (app (app np-arange 2) 6) (let mask (app (app and (app (app gt (app (app subscript true-board) (pair rows (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair rows (slice 0 inf)))) unknown)) (app bool (app np-any mask))))))",
  "(lam (lam (let edges_mask (app np-zeros_like true-board) (let $v0 1 (let $v1 1 (let $v2 1 (let $v3 1 (let hidden_mask (app (app eq partial-board) unknown) (let ship_mask (app (app gt true-board) 0) (app np-any (app (app and (app (app and edges_mask) hidden_mask)) ship_mask)))))))))))",
  "(lam (lam (let center_slice (pair (app (app slice 2) 6) (app (app slice 2) 6)) (let center_true (app (app subscript true-board) center_slice) (let center_partial (app (app subscript partial-board) center_slice) (let hidden_ship_cells (app (app and (app (app gt center_true) 0)) (app (app eq center_partial) unknown)) (app bool (app np-any hidden_ship_cells))))))))",
  "(lam (lam (let edges (app np-zeros_like true-board) (let $v0 1 (let $v1 1 (let $v2 1 (let $v3 1 (let unrevealed_edge_ships (app (app and (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) edges) (let ship_ids (app np-unique (app (app subscript true-board) unrevealed_edge_ships)) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) (app (app gt ship_ids.size) 1)))))))))))",
  "(lam (lam (let $v0 true-board.shape (let r0 (app (app sub (app (app unknown n) 2)) (app (app unknown n) 4)) (let r1 (app (app add (app (app unknown n) 2)) (app (app unknown n) 4)) (let c0 (app (app sub (app (app unknown m) 2)) (app (app unknown m) 4)) (let c1 (app (app add (app (app unknown m) 2)) (app (app unknown m) 4)) (let centre (app np-zeros (pair n m)) (let $v1 1 (let neighs unknown (let touching set (app (app gt (app len touching)) 1))))))))))))",
  "(lam (lam (let green_positions (app np-argwhere (app (app eq true-board) 2)) (let rows (app (app subscript green_positions) (pair (slice 0 inf) 0)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 3)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let orange_positions (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript orange_positions) (pair (slice 0 inf) 0)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let mid (app (app unknown n_rows) 2) (let top_half_mask (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 mid) (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 mid) (slice 0 inf)))) unknown)) (let ships_in_top (app np-unique (app (app subscript (app (app subscript true-board) (pair (slice 0 mid) (slice 0 inf)))) top_half_mask)) (app (app gt ships_in_top.size) 1)))))))",
  "(lam (lam (let n_cols (app (app subscript true-board.shape) 1) (let midpoint (app (app unknown n_cols) 2) (let unrevealed (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let left_unrevealed (app (app subscript unrevealed) (pair (slice 0 inf) (slice 0 midpoint))) (let ship_ids (app np-unique (app (app subscript (app (app subscript true-board) (pair (slice 0 inf) (slice 0 midpoint)))) left_unrevealed)) (app (app gt ship_ids.size) 1))))))))",
  "(lam (lam (let row_idx 0 (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let true_row (app (app subscript true-board) (pair row_idx (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_idx (slice 0 inf))) (let unrevealed_ships (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any unrevealed_ships))))))))",
  "(lam (lam (let row_index 7 (let ship_tiles (app (app gt (app (app subscript true-board) row_index)) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) row_index)) unknown) (app bool ('app', ('app', 'and', 'ship_tiles'), 'hidden_tiles').any))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let ship_tiles (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (app bool (app np-any (app (app and ship_tiles) hidden_tiles))))))))",
  "(lam (lam (let target_id () (let coords (app np-argwhere (app (app eq true-board) target_id)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))))",
  "(lam (lam (let row_idx 0 (let ship_tiles (app (app gt (app (app subscript true-board) row_idx)) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) row_idx)) unknown) (app bool (app np-any (app (app and ship_tiles) hidden_tiles))))))))",
  "(lam (lam (let row_idx 3 (let hidden_ship_mask (app (app and (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app (app gt (app (app subscript true-board) row_idx)) 0)) (app bool (app np-any hidden_ship_mask))))))",
  "(lam (lam (let row 2 (let ship_positions (app (app gt (app (app subscript true-board) (pair row (slice 0 inf)))) 0) (let hidden_positions (app (app eq (app (app subscript partial-board) (pair row (slice 0 inf)))) unknown) (app bool (app np-any (app (app and ship_positions) hidden_positions))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let has_unrevealed_ship (app np-any (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown))) (app bool has_unrevealed_ship)))))",
  "(lam (lam (let r 4 (let hidden (app (app eq (app (app subscript partial-board) r)) unknown) (let ship (app (app gt (app (app subscript true-board) r)) 0) (app bool (app np-any (app (app and hidden) ship))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let ship_tiles (app (app ne (app (app subscript true-board) row_idx)) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) row_idx)) unknown) (app bool (app np-any (app (app and ship_tiles) hidden_tiles))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_idx) (let partial_row (app (app subscript partial-board) row_idx) (let unrevealed_ship_tiles (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let remaining_ship_ids (app np-unique (app (app subscript true-board) hidden_ships)) (let last_ship_id (app (app subscript remaining_ship_ids) 0) (let ship_positions (app np-argwhere (app (app eq true-board) last_ship_id)) (app np-all (app (app lte (app (app subscript ship_positions) (pair (slice 0 inf) 0))) 3))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let ships_remaining_in_F (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any ships_remaining_in_F))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let hidden (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ship (app (app gt (app (app subscript true-board) row_idx)) 0) (app bool ('app', ('app', 'and', 'hidden'), 'ship').any))))))",
  "(lam (lam (let col_idx 0 (let hidden_ship_mask (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app bool (app np-any hidden_ship_mask))))))",
  "(lam (lam (let col_idx 1 (let hidden (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (let ship (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (app bool (app np-any (app (app and hidden) ship))))))))",
  "(lam (lam (let col_idx 1 (let hidden_ship_rows (app (app subscript (app np-where (app (app and (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)))) 0) (let ship_id (app (app subscript true-board) (pair (app (app subscript hidden_ship_rows) 0) col_idx)) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (app (app eq ('app', 'np-unique', ('app', ('app', 'subscript', 'coords'), ('pair', ('slice', '0', 'inf'), '1'))).size) 1)))))))",
  "(lam (lam (let row_idx 0 (let unrevealed_ships_in_A (app (app and (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app (app gt (app (app subscript true-board) row_idx)) 0)) (app bool (app np-any unrevealed_ships_in_A))))))",
  "(lam (lam (let true_row (app (app subscript true-board) (pair 6 (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair 6 (slice 0 inf))) (let hidden_ships (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any hidden_ships)))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"B\")) (app ord \"A\")) (let mask (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app bool (app np-any mask))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let unrevealed_ships_in_row (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any unrevealed_ships_in_row))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"H\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_index) (let partial_row (app (app subscript partial-board) row_index) (let hidden_ship_tiles (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any hidden_ship_tiles))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let hidden_ships (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app np-any hidden_ships)))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let col_slice (app (app slice 0) 4) (let ships_hidden_in_range (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_slice))) 0)) (app (app subscript hidden) (pair (slice 0 inf) col_slice))) (app bool (app np-any ships_hidden_in_range)))))))",
  "(lam (lam (let cols (app (app slice 0) 5) (let hidden_mask (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) cols))) unknown) (let ship_mask (app (app gt (app (app subscript true-board) (pair (slice 0 inf) cols))) 0) (app bool (app np-any (app (app and hidden_mask) ship_mask))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"H\")) (app ord \"A\")) (let cols (app (app slice 0) 5) (let segment_true (app (app subscript true-board) (pair row_index cols)) (let segment_partial (app (app subscript partial-board) (pair row_index cols)) (let unrevealed_ships (app (app and (app (app gt segment_true) 0)) (app (app eq segment_partial) unknown)) (app bool (app np-any unrevealed_ships)))))))))",
  "(lam (lam (let row_index 2 (let unrevealed_ships_in_C (app (app and (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app (app gt (app (app subscript true-board) row_index)) 0)) (app bool (app np-any unrevealed_ships_in_C))))))",
  "(lam (lam (let tb_slice (app (app subscript true-board) (pair (slice 0 inf) (slice 1 5))) (let pb_slice (app (app subscript partial-board) (pair (slice 0 inf) (slice 1 5))) (let unrevealed_ship_mask (app (app and (app (app gt tb_slice) 0)) (app (app eq pb_slice) unknown)) (app bool (app np-any unrevealed_ship_mask)))))))",
  "(lam (lam (let row_idx 0 (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let row_idx 1 (app np-any (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let ship_cells (app (app np-isin (app (app subscript true-board) row_idx)) unknown) (let hidden_cells (app (app eq (app (app subscript partial-board) row_idx)) unknown) (app bool (app np-any (app (app and ship_cells) hidden_cells))))))))",
  "(lam (lam 0))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let unrevealed_ships (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any unrevealed_ships))))))",
  "(lam (lam (let tb_slice (app (app subscript true-board) (pair (slice 0 inf) (slice 0 4))) (let pb_slice (app (app subscript partial-board) (pair (slice 0 inf) (slice 0 4))) (let hidden_ship (app (app and (app (app gt tb_slice) 0)) (app (app eq pb_slice) unknown)) (app bool (app np-any hidden_ship)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) (let col_idx (app (app sub 3) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx 1 (let hidden_ships (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ships))))))",
  "(lam (lam (let row_idx 2 (let hidden_ship_tiles (app (app and (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app (app gt (app (app subscript true-board) row_idx)) 0)) (app bool (app np-any hidden_ship_tiles))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"D\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_index) (let partial_row (app (app subscript partial-board) row_index) (let unrevealed_ships (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any unrevealed_ships))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"E\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_index) (let partial_row (app (app subscript partial-board) row_index) (let unrevealed_ship_tiles (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool unrevealed_ship_tiles.any)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let hidden_mask (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ship_mask (app (app gt (app (app subscript true-board) row_idx)) 0) unknown)))))",
  "(lam (lam (let mask (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let $v0 (app np-where mask) (let target_rows (app np-unique rows) (let r (app (app subscript target_rows) 0) (let ncols (app (app subscript true-board.shape) 1) 0)))))))",
  "(lam (lam (let row_index 4 (let unrevealed_ships_in_E (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any unrevealed_ships_in_E))))))",
  "(lam (lam (let row_idx 0 (let unrevealed_ships_in_A (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ships_in_A))))))",
  "(lam (lam (let cols (app (app slice 0) 5) (let hidden (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) cols))) unknown) (let ships (app (app gt (app (app subscript true-board) (pair (slice 0 inf) cols))) 0) (app bool (app np-any (app (app and hidden) ships))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let hidden_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ship_tiles))))))",
  "(lam (lam (let cols (app (app slice 5) 8) (let hidden (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) cols))) unknown) (let ships (app (app gt (app (app subscript true-board) (pair (slice 0 inf) cols))) 0) (app np-any (app (app and hidden) ships)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let hidden (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ship (app (app gt (app (app subscript true-board) row_idx)) 0) (app bool (app np-any (app (app and hidden) ship))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"E\")) (app ord \"A\")) (let unrevealed_in_row (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app np-any unrevealed_in_row)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let cols (app (app slice 0) 5) (let ships_in_region (app (app gt (app (app subscript true-board) (pair row_idx cols))) 0) (let unrevealed_in_region (app (app eq (app (app subscript partial-board) (pair row_idx cols))) unknown) (app bool (app np-any (app (app and ships_in_region) unrevealed_in_region)))))))))",
  "(lam (lam (let row_idx 4 (let cols (app (app slice 5) 8) (let is_ship (app (app gt (app (app subscript true-board) (pair row_idx cols))) 0) (let is_hidden (app (app eq (app (app subscript partial-board) (pair row_idx cols))) unknown) (app bool (app np-any (app (app and is_ship) is_hidden)))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"B\")) (app ord \"A\")) (let true_row (app (app subscript true-board) (pair row_index (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_index (slice 0 inf))) (app bool (app np-any (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)))))))))",
  "(lam (lam (let cols (app (app slice 0) 5) (let hidden_ship_mask (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) cols))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) cols))) unknown)) (app bool (app np-any hidden_ship_mask))))))",
  "(lam (lam (let segment_true (app (app subscript true-board) (pair 1 (slice 5 8))) (let segment_partial (app (app subscript partial-board) (pair 1 (slice 5 8))) (let hidden_ship_tiles (app (app and (app (app gt segment_true) 0)) (app (app eq segment_partial) unknown)) (app bool (app np-any hidden_ship_tiles)))))))",
  "(lam (lam (let row 4 (let hidden_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair row (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ship_tiles))))))",
  "(lam (lam (let hit_rows (app (app subscript (app np-where ('app', ('app', 'gt', 'partial-board'), '0').any)) 0) (let row hit_rows.max (let hidden_ship_mask (app (app and (app (app gt (app (app subscript true-board) row)) 0)) (app (app eq (app (app subscript partial-board) row)) unknown)) (app bool hidden_ship_mask.any))))))",
  "(lam (lam (let row_idx 0 (let hidden_mask (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ship_mask (app (app gt (app (app subscript true-board) row_idx)) 0) (app bool (app np-any (app (app and hidden_mask) ship_mask))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let hidden_mask (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ship_mask (app (app gt (app (app subscript true-board) row_idx)) 0) (app bool (app np-any (app (app and hidden_mask) ship_mask))))))))",
  "(lam (lam 0))",
  "(lam (lam (let revealed_ids (app np-unique (app (app subscript partial-board) (app (app gt partial-board) 0))) (let candidates unknown (let ship_id (app (app subscript candidates) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let col_start (app (app sub 1) 1) (let col_end 3 (let true_segment (app (app subscript true-board) (pair row_idx (slice col_start col_end))) (let partial_segment (app (app subscript partial-board) (pair row_idx (slice col_start col_end))) (let hidden_ships (app (app and (app (app gt true_segment) 0)) (app (app eq partial_segment) unknown)) (app np-any hidden_ships)))))))))",
  "(lam (lam (let row_index 0 (let hidden_ships (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any hidden_ships))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"B\")) (app ord \"A\")) (let ships_in_row_b (app (app gt (app (app subscript true-board) row_index)) 0) (let hidden_in_row_b (app (app eq (app (app subscript partial-board) row_index)) unknown) (app bool (app np-any (app (app and ships_in_row_b) hidden_in_row_b))))))))",
  "(lam (lam (let ship_ids (app (app sub (app set (app np-unique true-board))) unknown) 0)))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let hidden_ship_cells (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any hidden_ship_cells))))))",
  "(lam (lam (let col 7 (let hidden_ship_in_col8 (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col))) unknown)) (app bool (app np-any hidden_ship_in_col8))))))",
  "(lam (lam (let $v0 true-board.shape (let corners unknown 0))))",
  "(lam (lam (let center_rows unknown (let center_cols unknown 0))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 4)) (let unique_rows (app np-unique (app (app subscript coords) (pair (slice 0 inf) 0))) (let unique_cols (app np-unique (app (app subscript coords) (pair (slice 0 inf) 1))) (app (app eq (app len unique_rows)) 1))))))",
  "(lam (lam (let rows unknown (let mask (app (app and (app (app gt (app (app subscript true-board) (pair rows (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair rows (slice 0 inf)))) unknown)) (app bool (app np-any mask))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 3)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let ship_id 3 (let $v0 true-board.shape (let ship_cells (app np-argwhere (app (app eq true-board) ship_id)) 1)))))",
  "(lam (lam (let $v0 (app np-nonzero (app (app eq true-board) 2)) (let top_of_green ship_rows.min (let col_start 1 (let col_end 3 (let above_region (app np-zeros_like true-board) (let $v1 1 (let hidden_ships_above (app (app and (app (app and above_region) (app (app gt true-board) 0))) (app (app eq partial-board) unknown)) (app bool hidden_ships_above.any))))))))))",
  "(lam (lam (let row_index 0 (let true_row (app (app subscript true-board) (pair row_index (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_index (slice 0 inf))) (let unrevealed_ship_mask (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any unrevealed_ship_mask))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"H\")) (app ord \"A\")) (let unrevealed_ship_in_H (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ship_in_H))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 3)) (let $v0 coords.T (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let rp_mask (app (app or (app (app eq partial-board) 1)) (app (app eq partial-board) 3)) (let rp_cols (app (app subscript (app np-where rp_mask.any)) 0) (let row_h 7 (let hidden_mask (app (app eq (app (app subscript partial-board) row_h)) unknown) (let ship_mask (app (app gt (app (app subscript true-board) row_h)) 0) (let rp_column_mask (app np-zeros (app (app subscript partial-board.shape) 1)) (let $v0 1 (let candidate (app (app and (app (app and hidden_mask) ship_mask)) rp_column_mask) (app bool (app np-any candidate))))))))))))",
  "(lam (lam (let row_index 1 (let ship_tiles (app (app gt (app (app subscript true-board) row_index)) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) row_index)) unknown) (app bool (app np-any (app (app and ship_tiles) hidden_tiles))))))))",
  "(lam (lam (let row_idx 2 (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let row_idx 6 (let mask_ship (app (app gt (app (app subscript true-board) row_idx)) 0) (let mask_hidden (app (app eq (app (app subscript partial-board) row_idx)) unknown) (app bool (app np-any (app (app and mask_ship) mask_hidden))))))))",
  "(lam (lam (let row_idx 5 (let hidden_ships_in_F (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ships_in_F))))))",
  "(lam (lam (let row_idx 4 (let unrevealed_ship (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ship))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_idx) (let partial_row (app (app subscript partial-board) row_idx) (let unrevealed_ship_tiles (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool unrevealed_ship_tiles.any)))))))",
  "(lam (lam (let outer_mask (app np-zeros_like true-board) (let $v0 1 (let $v1 1 (let $v2 1 (let $v3 1 (let unrevealed (app (app eq partial-board) unknown) (let ships (app (app gt true-board) 0) (app bool (app np-any (app (app and (app (app and outer_mask) unrevealed)) ships))))))))))))",
  "(lam (lam (let row_index 7 (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app np-any unrevealed_ship_tiles)))))",
  "(lam (lam (let green_rows (app (app subscript (app np-where (app np-any (app (app eq true-board) 2)))) 0) (let purple_rows (app (app subscript (app np-where (app (app eq true-board) 3))) 0) (app ('app', 'set', 'purple_rows').issubset (app set green_rows))))))",
  "(lam (lam (let purple_unrevealed (app (app and (app (app eq true-board) 3)) (app (app eq partial-board) unknown)) (let rows_to_check unknown (app np-any (app (app subscript purple_unrevealed) (pair rows_to_check (slice 0 inf))))))))",
  "(lam (lam (let red_cols (app (app subscript (app np-where (app np-any (app (app eq partial-board) 1)))) 0) 0)))",
  "(lam (lam (let green_locs (app np-argwhere (app (app eq true-board) 2)) (let rows (app (app subscript green_locs) (pair (slice 0 inf) 0)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))",
  "(lam (lam (let row_index 0 (let hidden_ship_mask (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ship_mask))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) (let true_row (app (app subscript true-board) (pair row_idx (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_idx (slice 0 inf))) (let unrevealed_ship_tiles (app (app np-logical_and (app (app eq partial_row) unknown)) (app (app gt true_row) 0)) (app bool unrevealed_ship_tiles.any)))))))",
  "(lam (lam (let row_index 1 (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let row_idx 6 (let unseen_ships (app (app and (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app (app gt (app (app subscript true-board) row_idx)) 0)) (app bool (app np-any unseen_ships))))))",
  "(lam (lam (let r0 1 (let c0 4 (let sub_true (app (app subscript true-board) (pair (slice (app (app add r0) 1) inf) (slice (app (app add c0) 1) inf))) (let sub_partial (app (app subscript partial-board) (pair (slice (app (app add r0) 1) inf) (slice (app (app add c0) 1) inf))) (let unrevealed_ships (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app np-any unrevealed_ships))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_idx) (let partial_row (app (app subscript partial-board) row_idx) (let hidden_ship_mask (app (app and (app (app eq partial_row) unknown)) (app (app gt true_row) 0)) (app bool (app np-any hidden_ship_mask))))))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let rows_fully_hidden (app (app subscript (app np-where (app np-all hidden))) 0) (let candidate_rows unknown None)))))",
  "(lam (lam (let row_idx 2 (let hidden_ship_tiles (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any hidden_ship_tiles))))))",
  "(lam (lam (let row_idx 2 (let region_has_ship (app (app gt (app (app subscript true-board) (pair row_idx (slice 4 inf)))) 0) (let region_is_hidden (app (app eq (app (app subscript partial-board) (pair row_idx (slice 4 inf)))) unknown) (app bool (app np-any (app (app and region_has_ship) region_is_hidden))))))))",
  "(lam (lam (let row_e (app (app sub (app ord \"E\")) (app ord \"A\")) (let hidden_ships_in_row (app (app and (app (app gt (app (app subscript true-board) row_e)) 0)) (app (app eq (app (app subscript partial-board) row_e)) unknown)) (app bool (app np-any hidden_ships_in_row))))))",
  "(lam (lam (let row_e 4 (let cols_6_to_8 (app (app slice 5) 8) (let true_segment (app (app subscript true-board) (pair row_e cols_6_to_8)) (let partial_segment (app (app subscript partial-board) (pair row_e cols_6_to_8)) (let unrevealed_ships (app (app and (app (app gt true_segment) 0)) (app (app eq partial_segment) unknown)) (app bool (app np-any unrevealed_ships)))))))))",
  "(lam (lam (let hits (app (app gt partial-board) 0) (let hit_ids (app np-unique (app (app subscript partial-board) hits)) 0))))",
  "(lam (lam (let rows_cd (app (app slice 2) 4) (let unrevealed (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript unrevealed) (pair rows_cd (slice 0 inf)))))))))",
  "(lam (lam (let row_idx 0 (let hidden (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ship_tiles (app (app gt (app (app subscript true-board) row_idx)) 0) (app bool (app np-any (app (app and hidden) ship_tiles))))))))",
  "(lam (lam (let target_row (app (app sub 4) 1) (let tr (app (app subscript true-board) (pair (slice 0 target_row) (slice 0 inf))) (let pr (app (app subscript partial-board) (pair (slice 0 target_row) (slice 0 inf))) (app bool (app np-any (app (app and (app (app gt tr) 0)) (app (app eq pr) unknown)))))))))",
  "(lam (lam (let orange_cols (app np-unique (app (app subscript (app np-where (app (app eq partial-board) 4))) 1)) 0)))",
  "(lam (lam (let red_row_mask (app np-any (app (app eq partial-board) 1)) 0)))",
  "(lam (lam (let orange_cols (app np-unique (app (app subscript (app np-where (app (app eq true-board) 4))) 1)) (let sub_true (app (app subscript true-board) (pair (slice 0 inf) orange_cols)) (let sub_partial (app (app subscript partial-board) (pair (slice 0 inf) orange_cols)) (let hidden_ship_tiles (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app bool (app np-any hidden_ship_tiles))))))))",
  "(lam (lam (let rows unknown (let start (app rows.index \"B\") (let end (app rows.index \"D\") (let between (app (app range (app (app add (app (app min start) end)) 1)) (app (app max start) end)) 0))))))",
  "(lam (lam (let row_idx 0 (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let hidden_ship (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let $v0 (app np-where hidden_ship) (app np-any (app (app gte col_idx) 4))))))",
  "(lam (lam (let hit_positions (app np-argwhere (app (app gt partial-board) 0)) (let $v0 (app (app subscript hit_positions) 0) (let ship_id (app (app subscript partial-board) (pair r c)) (let true_positions (app np-argwhere (app (app eq true-board) ship_id)) (let cols (app (app subscript true_positions) (pair (slice 0 inf) 1)) (app bool (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let ship (app (app gt true-board) 0) (let hidden_ship (app (app and hidden) ship) ('app', ('app', 'subscript', 'hidden_ship'), ('pair', ('slice', '4', 'inf'), ('slice', '0', 'inf'))).any)))))",
  "(lam (lam (let rows_to_check unknown (let unrevealed_ships (app (app and (app (app gt (app (app subscript true-board) (pair rows_to_check (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair rows_to_check (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ships))))))",
  "(lam (lam (let row_idx 4 (let hidden (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ships (app (app gt (app (app subscript true-board) row_idx)) 0) (app bool (app np-any (app (app and hidden) ships))))))))",
  "(lam (lam (let $v0 true-board.shape 0)))",
  "(lam (lam (let red_orange_mask (app (app np-isin partial-board) unknown) (let cols_with_red_orange (app (app subscript (app np-where red_orange_mask.any)) 0) 0))))",
  "(lam (lam (let rows_below_e (app (app slice 5) (app (app subscript true-board.shape) 0)) (let ships_below (app (app and (app (app gt (app (app subscript true-board) rows_below_e)) 0)) (app (app eq (app (app subscript partial-board) rows_below_e)) unknown)) (app bool (app np-any ships_below))))))",
  "(lam (lam (let ship_codes unknown (let target_code () (let $v0 (app np-where (app (app eq true-board) target_code)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let rows_with_seen (app np-any (app (app gt partial-board) 0)) 0)))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 4)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let ship_ids unknown (let max_length 0 (let is_vertical 0 is_vertical)))))",
  "(lam (lam (let $v0 (app np-where (app (app eq true-board) 4)) (let top_row orange_rows.min (app (app eq top_row) 0)))))",
  "(lam (lam (let orange_coords (app np-argwhere (app (app eq true-board) 4)) (let bottom_row_index ('app', ('app', 'subscript', 'orange_coords'), ('pair', ('slice', '0', 'inf'), '0')).max (app (app eq bottom_row_index) 3)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let unrevealed_ship_in_row (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ship_in_row))))))",
  "(lam (lam (let ORANGE 4 (let target_col 6 (let orange_cells (app np-argwhere (app (app eq true-board) ORANGE)) (app np-any (app (app eq (app (app subscript orange_cells) (pair (slice 0 inf) 1))) target_col)))))))",
  "(lam (lam (let col 7 (let hidden_ship_in_col8 (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col))) unknown)) (app bool (app np-any hidden_ship_in_col8))))))",
  "(lam (lam (let unrevealed (app (app eq partial-board) unknown) (let ships (app (app gt true-board) 0) (app bool (app np-any (app (app and (app (app subscript unrevealed) (pair 2 (slice 0 inf)))) (app (app subscript ships) (pair 2 (slice 0 inf))))))))))",
  "(lam (lam (let row (app (app sub (app ord \"C\")) (app ord \"A\")) (let col (app (app sub 8) 1) (app (app and (app (app eq (app (app subscript partial-board) (pair row col))) unknown)) (app (app gt (app (app subscript true-board) (pair row col))) 0))))))",
  "(lam (lam (let green_length (app np-count_nonzero (app (app eq true-board) 2)) (app (app gt green_length) 2))))",
  "(lam (lam (let two_square_ids unknown 0)))",
  "(lam (lam (let ship_ids unknown (let lengths unknown (let max_length (app max lengths.values) (let longest_ships unknown (let row_g_index (app (app sub (app ord \"G\")) (app ord \"A\")) 0)))))))",
  "(lam (lam (let revealed_positions (app np-argwhere (app (app eq partial-board) 1)) (let discovered_cols (app (app subscript revealed_positions) (pair (slice 0 inf) 1)) (let $v0 (pair discovered_cols.min discovered_cols.max) (let hidden_red (app (app and (app (app eq true-board) 1)) (app (app ne partial-board) 1)) (let hidden_positions (app np-argwhere hidden_red) (let hidden_cols (app (app subscript hidden_positions) (pair (slice 0 inf) 1)) (let left_count (app np-sum (app (app lt hidden_cols) min_col)) (let right_count (app np-sum (app (app gt hidden_cols) max_col)) (app (app gt left_count) right_count)))))))))))",
  "(lam (lam (let $v0 (app np-where (app (app eq true-board) 4)) (app bool (app np-any (app (app gte orange_cols) 4))))))",
  "(lam (lam (let ship_stats unknown (let max_len (app max unknown) 0))))",
  "(lam (lam (let row_idx 6 (let hidden_positions (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let unrevealed_ships (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) hidden_positions) (app bool (app np-any unrevealed_ships)))))))",
  "(lam (lam (let row_true (app (app subscript true-board) (pair 0 (slice 0 inf))) (let row_partial (app (app subscript partial-board) (pair 0 (slice 0 inf))) (let unrevealed_ship (app (app and (app (app gt row_true) 0)) (app (app eq row_partial) unknown)) (app bool (app np-any unrevealed_ship)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let ship_cells (app (app gt (app (app subscript true-board) row_idx)) 0) (let hidden_cells (app (app eq (app (app subscript partial-board) row_idx)) unknown) (app bool (app np-any (app (app and ship_cells) hidden_cells))))))))",
  "(lam (lam (let row_idx 0 (let hidden_in_row (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ship_in_row (app (app gt (app (app subscript true-board) row_idx)) 0) (app bool (app np-any (app (app and hidden_in_row) ship_in_row))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let hidden_mask (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ship_mask (app (app gt (app (app subscript true-board) row_idx)) 0) (app bool (app np-any (app (app and hidden_mask) ship_mask))))))))",
  "(lam (lam (let row_index 4 (let unrevealed_ship_in_row_e (app np-any (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown))) (app bool unrevealed_ship_in_row_e)))))",
  "(lam (lam (let purple_count (app np-count_nonzero (app (app eq true-board) 3)) (app (app gt purple_count) 2))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let half (app (app unknown n_rows) 2) (let top_count (app np-count_nonzero (app (app ne (app (app subscript true-board) (slice 0 half))) 0)) (let bottom_count (app np-count_nonzero (app (app ne (app (app subscript true-board) (slice half inf))) 0)) (app (app gt top_count) bottom_count)))))))",
  "(lam (lam (let col_idx 5 (let is_ship (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let is_unrevealed (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and is_ship) is_unrevealed))))))))",
  "(lam (lam (let col 6 (let mask_ship (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col))) 0) (let mask_hidden (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col))) unknown) (app bool (app np-any (app (app and mask_ship) mask_hidden))))))))",
  "(lam (lam (let col 5 (let ship_cells (app (app subscript (app np-where (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col))) 0))) 0) (let breaks (app (app add (app (app subscript (app np-where (app (app gt (app np-diff ship_cells)) 1))) 0)) 1) (let segments (app (app np-split ship_cells) breaks) (let lengths unknown (let longest (app (app subscript segments) (app np-argmax lengths)) (let top_row (app int longest.min) (app (app lte top_row) 2))))))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 1)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app (app eq ('app', 'np-unique', 'cols').size) 1)))))",
  "(lam (lam (let ship_ids unknown (let incomplete unknown (let target_id (app (app subscript incomplete) 0) (let row (app (app sub (app ord \"D\")) (app ord \"A\")) (let col (app (app sub 3) 1) (app (app eq (app (app subscript true-board) (pair row col))) target_id))))))))",
  "(lam (lam (let $v0 (app np-unique (app (app subscript true-board) (app (app gt true-board) 0))) (let four_sq_ship (app (app subscript ship_ids) (app (app eq counts) 4)) (let ship_id (app (app subscript four_sq_ship) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app bool (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))))))",
  "(lam (lam (let ship_codes unknown 0)))",
  "(lam (lam (let ship_coords unknown 0)))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) (let ship_mask (app (app gt (app (app subscript true-board) row_idx)) 0) (let hidden_mask (app (app eq (app (app subscript partial-board) row_idx)) unknown) (app bool (app np-any (app (app and ship_mask) hidden_mask))))))))",
  "(lam (lam (let row_idx 0 (let unrevealed_ships_in_row (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any unrevealed_ships_in_row))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"F\")) (app ord \"A\")) (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app np-any unrevealed_ship_tiles)))))",
  "(lam (lam (let half (app (app unknown (app (app subscript true-board.shape) 0)) 2) 0)))",
  "(lam (lam (let ship_ids unknown 0)))",
  "(lam (lam 0))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let half (app (app unknown n_rows) 2) 0))))",
  "(lam (lam (let remaining unknown 0)))",
  "(lam (lam 0))",
  "(lam (lam (let true_row_A (app (app subscript true-board) (pair 0 (slice 0 inf))) (let partial_row_A (app (app subscript partial-board) (pair 0 (slice 0 inf))) (let hidden_ship_in_A (app (app and (app (app gt true_row_A) 0)) (app (app eq partial_row_A) unknown)) (app bool (app np-any hidden_ship_in_A)))))))",
  "(lam (lam (let hidden_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let remaining_ids (app np-unique (app (app subscript true-board) hidden_ship)) 0))))",
  "(lam (lam (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) 0))))",
  "(lam (lam (let $v0 (app np-unique (app (app subscript true-board) (app (app gt true-board) 0))) (let four_sq_labels (app (app subscript labels) (app (app eq counts) 4)) (let found () (let other_labels unknown (let other_label (app (app subscript other_labels) 0) (let other_coords (app np-argwhere (app (app eq true-board) other_label)) (let bottom_start (app (app unknown (app (app subscript true-board.shape) 0)) 2) (app np-all (app (app gte (app (app subscript other_coords) (pair (slice 0 inf) 0))) bottom_start)))))))))))",
  "(lam (lam (let ship_ids (app (app sub (app set (app np-unique true-board))) unknown) (let remaining unknown 0))))",
  "(lam (lam 0))",
  "(lam (lam (let hidden_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript hidden_ship) (pair (slice 0 inf) (slice 4 6))))))))",
  "(lam (lam (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) (let length4 unknown (let unrevealed unknown (let target_id (app (app subscript unrevealed) 0) (let $v0 (app np-where (app (app eq true-board) target_id)) (app np-any (app (app eq r_target) 6))))))))))",
  "(lam (lam (let hidden_ship_tiles (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript hidden_ship_tiles) (pair (slice 0 inf) 4)))))))",
  "(lam (lam (let unrevealed_mask (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let remaining_ship_ids (app np-unique (app (app subscript true-board) unrevealed_mask)) (let last_ship_id (app (app subscript remaining_ship_ids) 0) (let $v0 (app np-where (app (app and (app (app eq true-board) last_ship_id)) (app (app eq partial-board) unknown))) (let halfway (app (app unknown (app (app subscript true-board.shape) 0)) 2) (app bool (app np-all (app (app lt ship_rows) halfway))))))))))",
  "(lam (lam (let col_idx 0 (let hidden_in_column (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (let ships_hidden (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) hidden_in_column) (app np-any ships_hidden))))))",
  "(lam (lam (let ship_and_hidden (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let odd_col_mask (app (app eq (app (app mod (app np-arange (app (app subscript true-board.shape) 1))) 2)) 0) (app bool (app np-any (app (app subscript ship_and_hidden) (pair (slice 0 inf) odd_col_mask))))))))",
  "(lam (lam (let row (app (app sub (app ord \"D\")) (app ord \"A\")) (let col (app (app sub 2) 1) (app (app gt (app (app subscript true-board) (pair row col))) 0)))))",
  "(lam (lam (let unrevealed_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let n_rows (app (app subscript true-board.shape) 0) (let half (app (app unknown n_rows) 2) (app bool (app np-any (app (app subscript unrevealed_ships) (pair (slice half inf) (slice 0 inf))))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let col_idx (app (app sub 4) 1) (let is_hidden (app (app eq (app (app subscript partial-board) (pair row_idx col_idx))) unknown) (let is_ship_tile (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0) (app (app and is_hidden) is_ship_tile)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"A\")) (app ord \"A\")) (let col_idx (app (app sub 3) 1) (let ship_id (app (app subscript true-board) (pair row_idx col_idx)) (let $v0 true-board.shape 0))))))",
  "(lam (lam (let row_idx 4 (let col_idx 4 (app (app ne (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx 1 (let col_idx 0 (app (app and (app (app eq (app (app subscript partial-board) (pair row_idx col_idx))) unknown)) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0))))))",
  "(lam (lam (let $v0 true-board.shape (let mid_row (app (app unknown n_rows) 2) (let mid_col (app (app unknown n_cols) 2) (let true_quadrant (app (app subscript true-board) (pair (slice 0 mid_row) (slice mid_col inf))) (let partial_quadrant (app (app subscript partial-board) (pair (slice 0 mid_row) (slice mid_col inf))) (let hidden_ship_mask (app (app and (app (app gt true_quadrant) 0)) (app (app eq partial_quadrant) unknown)) (app bool (app np-any hidden_ship_mask))))))))))",
  "(lam (lam (let $v0 true-board.shape (let half_row (app (app unknown nrows) 2) (let half_col (app (app unknown ncols) 2) (let tr (app (app subscript true-board) (pair (slice half_row inf) (slice half_col inf))) (let pr (app (app subscript partial-board) (pair (slice half_row inf) (slice half_col inf))) (app bool (app np-any (app (app and (app (app gt tr) 0)) (app (app eq pr) unknown)))))))))))",
  "(lam (lam (let true_col0 (app (app subscript true-board) (pair (slice 0 inf) 0)) (let partial_col0 (app (app subscript partial-board) (pair (slice 0 inf) 0)) (let unrevealed_ship_in_col0 (app (app and (app (app gt true_col0) 0)) (app (app eq partial_col0) unknown)) (app bool (app np-any unrevealed_ship_in_col0)))))))",
  "(lam (lam (let revealed_types (app (app sub (app set (app np-unique partial-board))) unknown) (let all_ship_types unknown (let missing_types (app (app sub all_ship_types) revealed_types) (let last_ship_type missing_types.pop (let coords (app np-argwhere (app (app eq true-board) last_ship_type)) (let ncols (app (app subscript partial-board.shape) 1) (let left_threshold (app (app unknown ncols) 2) (app np-all (app (app lt (app (app subscript coords) (pair (slice 0 inf) 1))) left_threshold)))))))))))",
  "(lam (lam (let row_idx 1 (let unrevealed_in_B (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app np-any unrevealed_in_B)))))",
  "(lam (lam (let $v0 true-board.shape (let r_start (app (app unknown n_rows) 2) (let c_start (app (app unknown n_cols) 2) (let tr (app (app subscript true-board) (pair (slice r_start inf) (slice c_start inf))) (let pr (app (app subscript partial-board) (pair (slice r_start inf) (slice c_start inf))) (let unrevealed_ship (app (app and (app (app gt tr) 0)) (app (app eq pr) unknown)) (app np-any unrevealed_ship)))))))))",
  "(lam (lam (let row_idx 2 (let unrevealed_ship_in_C (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app np-any unrevealed_ship_in_C)))))",
  "(lam (lam (let col_idx 7 (let ship_in_col (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let hidden_in_col (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and ship_in_col) hidden_in_col))))))))",
  "(lam (lam (let row_C (app (app sub (app ord \"C\")) (app ord \"A\")) (let col_C (app (app sub (app ord \"C\")) (app ord \"A\")) (let hidden_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let left_of_C (app (app subscript hidden_ship) (pair row_C (slice 0 col_C))) (app bool (app np-any left_of_C))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let ship_tiles (app (app gt (app (app subscript true-board) row_idx)) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) row_idx)) unknown) (app bool (app np-any (app (app and ship_tiles) hidden_tiles))))))))",
  "(lam (lam (let ship_ids (app (app sub (app set (app np-unique true-board))) unknown) (let remaining unknown (let hidden_mask (app np-zeros_like true-board) (let $v0 true-board.shape (let $v1 (pair (app (app unknown n_rows) 2) (app (app unknown n_cols) 2)) (let $v2 (app np-where hidden_mask) (app np-any (app (app and (app (app lt rows) mid_row)) (app (app lt cols) mid_col)))))))))))",
  "(lam (lam (app (app gt (app (app subscript true-board) (pair 0 0))) 0)))",
  "(lam (lam (let row_idx (app (app sub (app ord \"A\")) (app ord \"A\")) (let col_idx (app (app sub 2) 1) (app (app ne (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"A\")) (app ord \"A\")) (let col_idx (app (app sub 3) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let half (app (app unknown (app (app subscript true-board.shape) 0)) 2) (let top_true (app (app subscript true-board) (pair (slice 0 half) (slice 0 inf))) (let top_known (app (app subscript partial-board) (pair (slice 0 half) (slice 0 inf))) (let hidden_ships (app (app and (app (app gt top_true) 0)) (app (app eq top_known) unknown)) (app bool (app np-any hidden_ships))))))))",
  "(lam (lam (let $v0 true-board.shape (let mid_row (app (app unknown n_rows) 2) (let mid_col (app (app unknown n_cols) 2) (let tl_true (app (app subscript true-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let tl_partial (app (app subscript partial-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let hidden_ship_mask (app (app and (app (app gt tl_true) 0)) (app (app eq tl_partial) unknown)) (app bool (app np-any hidden_ship_mask))))))))))",
  "(lam (lam (let col_idx 0 (let ship_tiles (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and ship_tiles) hidden_tiles))))))))",
  "(lam (lam (let rows_to_check unknown 0)))",
  "(lam (lam (let row_idx 3 (let ships_on_row (app (app gt (app (app subscript true-board) row_idx)) 0) (let hidden_on_row (app (app eq (app (app subscript partial-board) row_idx)) unknown) (app bool (app np-any (app (app and ships_on_row) hidden_on_row))))))))",
  "(lam (lam (let mid_row (app (app unknown (app (app subscript true-board.shape) 0)) 2) (let mid_col (app (app unknown (app (app subscript true-board.shape) 1)) 2) (let tr_true (app (app subscript true-board) (pair (slice 0 mid_row) (slice mid_col inf))) (let tr_partial (app (app subscript partial-board) (pair (slice 0 mid_row) (slice mid_col inf))) (app np-any (app (app and (app (app gt tr_true) 0)) (app (app eq tr_partial) unknown)))))))))",
  "(lam (lam (let $v0 true-board.shape (let row_half (app (app unknown n_rows) 2) (let col_half (app (app unknown n_cols) 2) (let true_br (app (app subscript true-board) (pair (slice row_half inf) (slice col_half inf))) (let partial_br (app (app subscript partial-board) (pair (slice row_half inf) (slice col_half inf))) (let hidden_ship_mask (app (app and (app (app gt true_br) 0)) (app (app eq partial_br) unknown)) (app bool hidden_ship_mask.any)))))))))",
  "(lam (lam (let col_idx 7 (let hidden_tiles (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (let ship_tiles (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (app bool (app np-any (app (app and hidden_tiles) ship_tiles))))))))",
  "(lam (lam (let col_index 6 (let hidden_ship_in_col (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_index))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_index))) unknown)) (app bool (app np-any hidden_ship_in_col))))))",
  "(lam (lam (let $v0 (pair 0 unknown) (app (app ne (app (app subscript true-board) (pair r c))) 0))))",
  "(lam (lam (let row_index (app (app sub (app ord \"G\")) (app ord \"A\")) (let hidden_ships (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any hidden_ships))))))",
  "(lam (lam (let row_e_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let true_row (app (app subscript true-board) (pair row_e_idx (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_e_idx (slice 0 inf))) (let still_hidden_ship (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any still_hidden_ship))))))))",
  "(lam (lam (let br_true (app (app subscript true-board) (pair (slice 4 inf) (slice 4 inf))) (let br_partial (app (app subscript partial-board) (pair (slice 4 inf) (slice 4 inf))) (let unrevealed (app (app and (app (app gt br_true) 0)) (app (app eq br_partial) unknown)) (app bool (app np-any unrevealed)))))))",
  "(lam (lam (let target_rows unknown (let unrevealed_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app np-any (app (app subscript unrevealed_ship) (pair target_rows (slice 0 inf))))))))",
  "(lam (lam (let $v0 true-board.shape (let bottom_start (app (app unknown rows) 2) (let left_end (app (app unknown cols) 2) (let true_region (app (app subscript true-board) (pair (slice bottom_start rows) (slice 0 left_end))) (let partial_region (app (app subscript partial-board) (pair (slice bottom_start rows) (slice 0 left_end))) (let unrevealed_ship_mask (app (app and (app (app gt true_region) 0)) (app (app eq partial_region) unknown)) (app bool (app np-any unrevealed_ship_mask))))))))))",
  "(lam (lam (let mid_row (app (app unknown (app (app subscript true-board.shape) 0)) 2) (let true_top (app (app subscript true-board) (pair (slice 0 mid_row) (slice 0 inf))) (let partial_top (app (app subscript partial-board) (pair (slice 0 mid_row) (slice 0 inf))) (let unrevealed_ship_tiles (app (app and (app (app gt true_top) 0)) (app (app eq partial_top) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))))",
  "(lam (lam (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) (let lengths unknown (let max_len (app max lengths.values) (let longest_ships unknown (let half (app (app unknown (app (app subscript true-board.shape) 0)) 2) 0))))))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let half (app (app unknown n_rows) 2) (let col_index 0 (let true_slice (app (app subscript true-board) (pair (slice half inf) col_index)) (let partial_slice (app (app subscript partial-board) (pair (slice half inf) col_index)) (let hidden_ship_mask (app (app and (app (app gt true_slice) 0)) (app (app eq partial_slice) unknown)) (app bool (app np-any hidden_ship_mask))))))))))",
  "(lam (lam (let n_cols (app (app subscript partial-board.shape) 1) (let even_cols (app (app eq (app (app mod (app (app add (app np-arange n_cols)) 1)) 2)) 0) (let hidden_ship (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (app bool ('app', ('app', 'subscript', 'hidden_ship'), ('pair', ('slice', '0', 'inf'), 'even_cols')).any))))))",
  "(lam (lam (let ship_mask (app (app gt true-board) 0) (let hidden_mask (app (app eq partial-board) unknown) (let unrevealed_ships (app (app and ship_mask) hidden_mask) (let n_cols (app (app subscript true-board.shape) 1) (let right_half (app (app gte (app np-arange n_cols)) (app (app unknown n_cols) 2)) (let right_unrevealed (app (app and unrevealed_ships) (app (app subscript right_half) (pair np.newaxis (slice 0 inf)))) (app bool (app np-any right_unrevealed))))))))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let half (app (app unknown n_rows) 2) (let top_true (app (app subscript true-board) (pair (slice 0 half) (slice 0 inf))) (let top_partial (app (app subscript partial-board) (pair (slice 0 half) (slice 0 inf))) (let unrevealed_ship_in_top (app (app and (app (app eq top_partial) unknown)) (app (app gt top_true) 0)) (app bool (app np-any unrevealed_ship_in_top)))))))))",
  "(lam (lam (let rows_to_check unknown (let ship_mask (app (app gt true-board) 0) (let hidden_mask (app (app eq partial-board) unknown) (let combined (app (app and ship_mask) hidden_mask) (app bool ('app', ('app', 'subscript', 'combined'), ('pair', 'rows_to_check', ('slice', '0', 'inf'))).any)))))))",
  "(lam (lam (let $v0 true-board.shape (let r_mid (app (app unknown n_rows) 2) (let c_mid (app (app unknown n_cols) 2) (let bottom_right (app np-zeros_like true-board) (let $v1 1 (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app and hidden_ships) bottom_right)))))))))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let half (app (app unknown n_rows) 2) (let ship_mask (app (app gt true-board) 0) (let hidden_mask (app (app eq partial-board) unknown) (let top_half_ships_hidden (app (app np-logical_and (app (app subscript ship_mask) (pair (slice 0 half) (slice 0 inf)))) (app (app subscript hidden_mask) (pair (slice 0 half) (slice 0 inf)))) (app bool (app np-any top_half_ships_hidden)))))))))",
  "(lam (lam (let true_quad (app (app subscript true-board) (pair (slice 0 4) (slice 4 8))) (let partial_quad (app (app subscript partial-board) (pair (slice 0 4) (slice 4 8))) (let unrevealed_ship (app (app and (app (app gt true_quad) 0)) (app (app eq partial_quad) unknown)) (app bool (app np-any unrevealed_ship)))))))",
  "(lam (lam (let row_index 0 (let hidden_ships_in_row (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any hidden_ships_in_row))))))",
  "(lam (lam (let n_cols (app (app subscript true-board.shape) 1) (let half (app (app unknown n_cols) 2) (let tb_right (app (app subscript true-board) (pair (slice 0 inf) (slice half inf))) (let pb_right (app (app subscript partial-board) (pair (slice 0 inf) (slice half inf))) (let unrevealed_ships (app (app and (app (app gt tb_right) 0)) (app (app eq pb_right) unknown)) (app bool unrevealed_ships.any))))))))",
  "(lam (lam (let tl_true (app (app subscript true-board) (pair (slice 0 4) (slice 0 4))) (let tl_partial (app (app subscript partial-board) (pair (slice 0 4) (slice 0 4))) (let unrevealed_ship_mask (app (app and (app (app gt tl_true) 0)) (app (app eq tl_partial) unknown)) (app np-any unrevealed_ship_mask))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"A\")) (app ord \"A\")) (let col_idx (app (app sub 4) 1) (let is_hidden (app (app eq (app (app subscript partial-board) (pair row_idx col_idx))) unknown) (let is_ship (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0) (app (app and is_hidden) is_ship)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let true_row (app (app subscript true-board) (pair row_idx (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_idx (slice 0 inf))) (let unrevealed (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool unrevealed.any)))))))",
  "(lam (lam (let row_F 5 (let unrevealed_in_F (app (app np-logical_and (app (app gt (app (app subscript true-board) (pair row_F (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_F (slice 0 inf)))) unknown)) (app bool unrevealed_in_F.any)))))",
  "(lam (lam (let revealed (app (app subscript partial-board) (app (app gt partial-board) 0)) (let $v0 (app np-unique revealed) (let $v1 (app np-where (app (app eq true-board) ship_id)) (app np-all (app (app eq ship_rows) (app (app subscript ship_rows) 0))))))))",
  "(lam (lam (let target_ship () (let coords (app np-argwhere (app (app eq true-board) target_ship)) (let unique_rows (app np-unique (app (app subscript coords) (pair (slice 0 inf) 0))) (let unique_cols (app np-unique (app (app subscript coords) (pair (slice 0 inf) 1))) (app (app eq (app len unique_cols)) 1)))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"G\")) (app ord \"A\")) (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let candidate_ship () (let coords (app np-argwhere (app (app eq true-board) candidate_ship)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) 0))))))",
  "(lam (lam (let ship_ids (app np-unique (app (app subscript true-board) (app (app gt true-board) 0))) 0)))",
  "(lam (lam (let ship_ids (app set (app np-unique (app (app subscript true-board) (app (app gt true-board) 0)))) (let revealed_ids (app set (app np-unique (app (app subscript true-board) (app (app and (app (app gt true-board) 0)) (app (app ne partial-board) unknown))))) (let remaining_ids (app (app sub ship_ids) revealed_ids) (let last_ship_id remaining_ids.pop (let green_cols (app (app subscript (app np-argwhere (app (app eq true-board) 2))) (pair (slice 0 inf) 1)) (let last_cols (app (app subscript (app np-argwhere (app (app eq true-board) last_ship_id))) (pair (slice 0 inf) 1)) (let green_center green_cols.mean (let last_center last_cols.mean (app (app gt last_center) green_center)))))))))))",
  "(lam (lam (let col_idx 0 (let hidden_ship_cells (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app bool (app np-any hidden_ship_cells))))))",
  "(lam (lam (let $v0 true-board.shape (let mid_row (app (app unknown n_rows) 2) (let mid_col (app (app unknown n_cols) 2) (let true_q (app (app subscript true-board) (pair (slice 0 mid_row) (slice mid_col inf))) (let part_q (app (app subscript partial-board) (pair (slice 0 mid_row) (slice mid_col inf))) (let ships_unrevealed (app (app and (app (app gt true_q) 0)) (app (app eq part_q) unknown)) (app bool (app np-any ships_unrevealed))))))))))",
  "(lam (lam (let candidate_ids unknown (let target_id () (let coords (app np-argwhere (app (app eq true-board) target_id)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))))",
  "(lam (lam (let true_q (app (app subscript true-board) (pair (slice 0 4) (slice 0 4))) (let part_q (app (app subscript partial-board) (pair (slice 0 4) (slice 0 4))) (let unrevealed_ship (app (app and (app (app gt true_q) 0)) (app (app eq part_q) unknown)) (app np-any unrevealed_ship))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let hidden_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app np-any hidden_ship_tiles)))))",
  "(lam (lam (let quadrant (app (app subscript true-board) (pair (slice 0 4) (slice 0 4))) (let ship_ids (app np-unique quadrant) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) (let ship_id (app (app subscript ship_ids) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))))))",
  "(lam (lam (let ship_codes unknown (let active unknown (let ship_code (app (app subscript active) 0) (let ship_positions (app np-argwhere (app (app eq true-board) ship_code)) (let $v0 true-board.shape (let neighbors unknown 0))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"E\")) (app ord \"A\")) (let hidden_ship_mask (app (app and (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app (app gt (app (app subscript true-board) row_index)) 0)) (app bool (app np-any hidden_ship_mask))))))",
  "(lam (lam (let row_index 7 (let hidden_tiles (app (app eq (app (app subscript partial-board) row_index)) unknown) (let ship_tiles (app (app gt (app (app subscript true-board) row_index)) 0) (app bool (app np-any (app (app and hidden_tiles) ship_tiles))))))))",
  "(lam (lam (let col_idx 7 (let hidden_in_col (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (let ship_in_col (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (app bool (app np-any (app (app and hidden_in_col) ship_in_col))))))))",
  "(lam (lam (let $v0 (pair 4 7) (let below_true (app (app gt (app (app subscript true-board) (pair (slice (app (app add row) 1) inf) col))) 0) (let below_hidden (app (app eq (app (app subscript partial-board) (pair (slice (app (app add row) 1) inf) col))) unknown) (app bool (app np-any (app (app and below_true) below_hidden))))))))",
  "(lam (lam (let mid_row (app (app unknown (app (app subscript true-board.shape) 0)) 2) (let mid_col (app (app unknown (app (app subscript true-board.shape) 1)) 2) (let tl_true (app (app subscript true-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let tl_partial (app (app subscript partial-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let unrevealed_ships (app (app and (app (app gt tl_true) 0)) (app (app eq tl_partial) unknown)) (app bool (app np-any unrevealed_ships)))))))))",
  "(lam (lam (let hidden_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript hidden_ship) (pair (slice 0 inf) (slice 0 5))))))))",
  "(lam (lam (let hidden_ship (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (app bool (app np-any (app (app subscript hidden_ship) (pair (slice 5 inf) (slice 0 inf))))))))",
  "(lam (lam (let col_idx (app (app sub 8) 1) (let is_ship (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let is_hidden (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool ('app', ('app', 'and', 'is_ship'), 'is_hidden').any))))))",
  "(lam (lam (let $v0 true-board.shape (let neighbors unknown (let orange_positions (app np-argwhere (app (app eq true-board) 4)) 0)))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let region (app (app subscript hidden_ships) (pair (slice 5 inf) (slice 0 inf))) (app bool (app np-any region))))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let hidden_ships (app np-unique (app (app subscript true-board) (app (app and hidden) (app (app gt true-board) 0)))) (let ship_type (app (app subscript hidden_ships) 0) (let coords (app np-argwhere (app (app eq true-board) ship_type)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 3)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))",
  "(lam (lam (let sub_true (app (app subscript true-board) (pair (slice 0 4) (slice 4 8))) (let sub_partial (app (app subscript partial-board) (pair (slice 0 4) (slice 4 8))) (let unseen_ship (app (app and (app (app gt sub_true) 0)) (app (app eq sub_partial) unknown)) (app bool (app np-any unseen_ship)))))))",
  "(lam (lam (let mid_row (app (app unknown (app (app subscript true-board.shape) 0)) 2) (let mid_col (app (app unknown (app (app subscript true-board.shape) 1)) 2) (let true_sub (app (app subscript true-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let partial_sub (app (app subscript partial-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let unrevealed_ship (app (app and (app (app gt true_sub) 0)) (app (app eq partial_sub) unknown)) (app bool (app np-any unrevealed_ship)))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let unrevealed_ships_in_row (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any unrevealed_ships_in_row))))))",
  "(lam (lam (let unrevealed_ship (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (app bool (app np-any (app (app subscript unrevealed_ship) (pair (slice 0 inf) (slice 4 8))))))))",
  "(lam (lam (let row_idx 1 (let unrevealed_ship_positions (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any unrevealed_ship_positions))))))",
  "(lam (lam (let rows_to_check unknown (let hidden_ships (app (app and (app (app gt (app (app subscript true-board) (pair rows_to_check (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair rows_to_check (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ships))))))",
  "(lam (lam (let row (app (app sub (app ord \"B\")) (app ord \"A\")) (let col (app (app sub 4) 1) (app bool (app (app gt (app (app subscript true-board) (pair row col))) 0))))))",
  "(lam (lam (let target_rows unknown (let hidden_ship_mask (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (app bool (app np-any (app (app subscript hidden_ship_mask) (pair target_rows (slice 0 inf)))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"B\")) (app ord \"A\")) (let col_idx (app (app sub 6) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let hidden_ships (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (app bool (app np-any (app (app subscript hidden_ships) (pair unknown (slice 0 inf))))))))",
  "(lam (lam (let hit_ids (app np-unique (app (app subscript partial-board) (app (app gt partial-board) 0))) (let ship_id (app (app subscript hit_ids) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app eq ('app', 'np-unique', 'rows').size) 1)))))))",
  "(lam (lam (let revealed (app (app subscript partial-board) (app (app gt partial-board) 0)) (let $v0 (app np-unique revealed) (let singles (app (app subscript vals) (app (app eq counts) 1)) (let ship_type (app (app subscript singles) 0) (let $v1 (app (app subscript (app np-argwhere (app (app eq partial-board) ship_type))) 0) (app (app gt (app (app subscript true-board) (pair (app (app sub r) 1) c))) 0))))))))",
  "(lam (lam (let $v0 true-board.shape (let half_row (app (app unknown nrows) 2) (let half_col (app (app unknown ncols) 2) (let true_ll (app (app subscript true-board) (pair (slice half_row inf) (slice 0 half_col))) (let partial_ll (app (app subscript partial-board) (pair (slice half_row inf) (slice 0 half_col))) (let unrevealed_ship (app (app and (app (app gt true_ll) 0)) (app (app eq partial_ll) unknown)) (app bool (app np-any unrevealed_ship))))))))))",
  "(lam (lam (let rows_to_check unknown (let hidden_ships (app (app and (app (app gt (app (app subscript true-board) (pair rows_to_check (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair rows_to_check (slice 0 inf)))) unknown)) (app np-any hidden_ships)))))",
  "(lam (lam (let half (app (app unknown (app (app subscript true-board.shape) 0)) 2) (let unrevealed_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let lower_right (app (app subscript unrevealed_ships) (pair (slice half inf) (slice half inf))) (app bool (app np-any lower_right)))))))",
  "(lam (lam 0))",
  "(lam (lam (let hits (app (app gt partial-board) 0) (let ship_ids (app np-unique (app (app subscript partial-board) hits)) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) (let target_id (app (app subscript ship_ids) 0) (let coords (app np-argwhere (app (app eq true-board) target_id)) ('app', ('app', 'eq', ('app', ('app', 'subscript', 'coords'), ('pair', ('slice', '0', 'inf'), '0'))), ('app', ('app', 'subscript', 'coords'), ('pair', '0', '0'))).all)))))))",
  "(lam (lam (let tb_quad (app (app subscript true-board) (pair (slice 0 4) (slice 0 4))) (let pb_quad (app (app subscript partial-board) (pair (slice 0 4) (slice 0 4))) (let mask_unrevealed_ship (app (app and (app (app gt tb_quad) 0)) (app (app eq pb_quad) unknown)) (app bool (app np-any mask_unrevealed_ship)))))))",
  "(lam (lam (let hits (app np-argwhere (app (app gt partial-board) 0)) (let hit_ids (app (app subscript partial-board) (pair (app (app subscript hits) (pair (slice 0 inf) 0)) (app (app subscript hits) (pair (slice 0 inf) 1)))) (let $v0 (app np-unique hit_ids) (let current_ship_id (app (app subscript unique_ids) (app np-argmax counts)) (let ship_hits (app (app subscript hits) (app (app eq hit_ids) current_ship_id)) (let rows (app (app subscript ship_hits) (pair (slice 0 inf) 0)) (let cols (app (app subscript ship_hits) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))))))",
  "(lam (lam (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) (let unrevealed_ships unknown (let last_ship (app (app subscript unrevealed_ships) 0) (let coords (app np-argwhere (app (app eq true-board) last_ship)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))))))",
  "(lam (lam (let $v0 true-board.shape (let mid_row (app (app unknown n_rows) 2) (let mid_col (app (app unknown n_cols) 2) (let true_quadrant (app (app subscript true-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let partial_quadrant (app (app subscript partial-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let unrevealed (app (app eq partial_quadrant) unknown) (let ships (app (app gt true_quadrant) 0) (app bool (app np-any (app (app and unrevealed) ships))))))))))))",
  "(lam (lam (let rows unknown (let tb (app (app subscript true-board) (pair rows (slice 0 inf))) (let pb (app (app subscript partial-board) (pair rows (slice 0 inf))) (let unrevealed_ship (app (app and (app (app gt tb) 0)) (app (app eq pb) unknown)) (app bool (app np-any unrevealed_ship))))))))",
  "(lam (lam (let unrevealed_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let rows_E_F (app (app subscript unrevealed_ships) (pair (slice 4 6) (slice 0 inf))) (app np-any rows_E_F)))))",
  "(lam (lam (let hits (app np-argwhere (app (app gt partial-board) 0)) (let $v0 (app (app subscript hits) 0) (let ship_id (app (app subscript true-board) (pair r c)) (let ship_positions (app np-argwhere (app (app eq true-board) ship_id)) (app np-all (app (app eq (app (app subscript ship_positions) (pair (slice 0 inf) 0))) (app (app subscript ship_positions) (pair 0 0))))))))))",
  "(lam (lam (let hits (app np-argwhere (app (app gt partial-board) 0)) 0)))",
  "(lam (lam (let tr (app (app subscript true-board) (pair (slice 4 inf) (slice 4 inf))) (let pr (app (app subscript partial-board) (pair (slice 4 inf) (slice 4 inf))) (app bool (app np-any (app (app and (app (app gt tr) 0)) (app (app eq pr) unknown))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"G\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_index) (let partial_row (app (app subscript partial-board) row_index) (let unrevealed_ship_tiles (app (app and (app (app eq partial_row) unknown)) (app (app gt true_row) 0)) (app bool (app np-any unrevealed_ship_tiles))))))))",
  "(lam (lam (let $v0 true-board.shape (let lower_rows (app (app slice (app (app unknown n_rows) 2)) n_rows) (let left_cols (app (app slice 0) (app (app unknown n_cols) 2)) (let true_sub (app (app subscript true-board) (pair lower_rows left_cols)) (let partial_sub (app (app subscript partial-board) (pair lower_rows left_cols)) (let unrevealed_ships (app (app and (app (app gt true_sub) 0)) (app (app eq partial_sub) unknown)) (app bool (app np-any unrevealed_ships))))))))))",
  "(lam (lam (let revealed_ids (app np-unique (app (app subscript partial-board) (app (app gt partial-board) 0))) (let target_id () (let $v0 (app np-where (app (app eq true-board) target_id)) (app np-all (app (app eq ship_rows) (app (app subscript ship_rows) 0))))))))",
  "(lam (lam (let rows_ac_true (app (app subscript true-board) (pair (slice 0 3) (slice 0 inf))) (let rows_ac_partial (app (app subscript partial-board) (pair (slice 0 3) (slice 0 inf))) (let hidden_ship_cells (app (app and (app (app gt rows_ac_true) 0)) (app (app eq rows_ac_partial) unknown)) (app bool (app np-any hidden_ship_cells)))))))",
  "(lam (lam (let $v0 true-board.shape (let col_indices (app np-arange n_cols) (let cols_5_to_8 (app (app and (app (app gte col_indices) 4)) (app (app lte col_indices) 7)) (let mask_unrevealed_in_5_8 (app (app and (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) (app (app subscript cols_5_to_8) (pair np.newaxis (slice 0 inf)))) (app bool (app np-any mask_unrevealed_in_5_8))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let hidden_ships_in_row (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any hidden_ships_in_row))))))",
  "(lam (lam (let purple_rows (app (app subscript (app np-where (app (app eq true-board) 3))) 0) (let target_rows unknown (app bool (app (app and (app set purple_rows)) target_rows))))))",
  "(lam (lam (let red_positions (app np-argwhere (app (app eq true-board) 1)) (let rows (app (app subscript red_positions) (pair (slice 0 inf) 0)) (let cols (app (app subscript red_positions) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let green_positions (app np-argwhere (app (app eq true-board) 2)) (let cols (app (app subscript green_positions) (pair (slice 0 inf) 1)) (app (app eq ('app', 'np-unique', 'cols').size) 1)))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 3)) (app np-all (app (app eq (app (app subscript coords) (pair (slice 0 inf) 0))) (app (app subscript coords) (pair 0 0)))))))",
  "(lam (lam (let h_row_idx 7 (let unrevealed_purple_on_H (app (app and (app (app eq (app (app subscript true-board) (pair h_row_idx (slice 0 inf)))) 3)) (app (app eq (app (app subscript partial-board) (pair h_row_idx (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_purple_on_H))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"D\")) (app ord \"A\")) (let true_row (app (app subscript true-board) (pair row_index (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_index (slice 0 inf))) (let hidden_ships (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any hidden_ships))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) (let n_cols (app (app subscript true-board.shape) 1) 0))))",
  "(lam (lam (let row_idx 0 0)))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let col_idx (app (app sub 4) 1) (app (app and (app (app ne (app (app subscript true-board) (pair row_idx col_idx))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx col_idx))) unknown))))))",
  "(lam (lam 0))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 2)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let green_rows (app (app subscript (app np-where (app (app eq true-board) 2))) 0) (app np-any (app (app np-isin green_rows) unknown)))))",
  "(lam (lam (let green_coords (app np-argwhere (app (app eq true-board) 2)) (let green_rows (app (app subscript green_coords) (pair (slice 0 inf) 0)) (app np-all (app (app np-isin green_rows) unknown))))))",
  "(lam (lam (let target_r (app (app sub (app ord \"B\")) (app ord \"A\")) (let target_c (app (app sub 7) 1) (let green_positions (app np-argwhere (app (app eq true-board) 2)) 0)))))",
  "(lam (lam (let positions (app np-argwhere (app (app eq true-board) 3)) (let rows (app (app subscript positions) (pair (slice 0 inf) 0)) (app bool (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let red_coords (app np-argwhere (app (app eq true-board) 1)) (let rows (app (app subscript red_coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript red_coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let ORANGE 4 (let row_index 0 (let hidden_orange_in_A (app (app and (app (app eq (app (app subscript true-board) row_index)) ORANGE)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app np-any hidden_orange_in_A))))))",
  "(lam (lam (let purple_positions (app np-argwhere (app (app eq true-board) 3)) (let purple_rows (app (app subscript purple_positions) (pair (slice 0 inf) 0)) (app bool (app np-any (app (app or (app (app eq purple_rows) 2)) (app (app eq purple_rows) 6))))))))",
  "(lam (lam (let rows_to_check unknown (let green_unrevealed (app (app and (app (app eq true-board) 2)) (app (app eq partial-board) unknown)) 0))))",
  "(lam (lam (let purple_mask (app (app eq true-board) 3) (let rows_E_and_F (app (app subscript purple_mask) (pair unknown (slice 0 inf))) (app bool (app np-any rows_E_and_F))))))",
  "(lam (lam (let row_e (app (app sub (app ord \"E\")) (app ord \"A\")) (let $v0 (app np-where (app (app eq true-board) 2)) 0))))",
  "(lam (lam (let purple_id 3 (let rows_to_check unknown (let mask (app (app and (app (app eq (app (app subscript true-board) (pair rows_to_check (slice 0 inf)))) purple_id)) (app (app eq (app (app subscript partial-board) (pair rows_to_check (slice 0 inf)))) unknown)) (app bool (app np-any mask)))))))",
  "(lam (lam (let green_coords (app np-argwhere (app (app eq true-board) 2)) (let $v0 true-board.shape (let neighbors unknown 0)))))",
  "(lam (lam (let red_unrevealed (app (app and (app (app eq true-board) 1)) (app (app eq partial-board) unknown)) (app bool (app (app or ('app', ('app', 'subscript', 'red_unrevealed'), ('pair', '6', ('slice', '0', 'inf'))).any) ('app', ('app', 'subscript', 'red_unrevealed'), ('pair', '7', ('slice', '0', 'inf'))).any)))))",
  "(lam (lam (let hidden_ships (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let ship_types (app np-unique (app (app subscript true-board) hidden_ships)) (let cols (app (app subscript (app np-nonzero ship_mask)) 1) (app np-any (app (app and (app (app gte cols) 3)) (app (app lte cols) 6))))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 2)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (app bool (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let rows_to_check unknown 0)))",
  "(lam (lam (let orange_coords (app np-argwhere (app (app eq true-board) 4)) (let orange_rows (app (app subscript orange_coords) (pair (slice 0 inf) 0)) (app np-any (app (app np-isin orange_rows) unknown))))))",
  "(lam (lam (let target_rows unknown 0)))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_idx) (let partial_row (app (app subscript partial-board) row_idx) (let hidden_ship_cells (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) 0))))))",
  "(lam (lam (let target_rows unknown 0)))",
  "(lam (lam 0))",
  "(lam (lam (let orange_positions (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript orange_positions) (pair (slice 0 inf) 0)) (app (app eq ('app', 'np-unique', 'rows').size) 1)))))",
  "(lam (lam (let row 6 (let tb_row (app (app subscript true-board) row) (let pb_row (app (app subscript partial-board) row) (let i 0 (let n tb_row.size 0)))))))",
  "(lam (lam (let orange_cells (app np-argwhere (app (app eq true-board) 4)) (let target_row (app (app sub (app ord \"A\")) (app ord \"A\")) (let target_col (app (app sub 6) 1) 0)))))",
  "(lam (lam (let red_positions (app np-argwhere (app (app eq true-board) 1)) (let cols (app (app subscript red_positions) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let orange_coords (app np-argwhere (app (app eq true-board) 4)) 0)))",
  "(lam (lam (let positions (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript positions) (pair (slice 0 inf) 0)) (let cols (app (app subscript positions) (pair (slice 0 inf) 1)) (app (app and (app (app eq start_row) 0)) (app (app eq start_col) 4)))))))",
  "(lam (lam (let target_rows unknown (let $v0 true-board.shape 0))))",
  "(lam (lam 0))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))",
  "(lam (lam (let target_rows unknown (let n_cols (app (app subscript true-board.shape) 1) 0))))",
  "(lam (lam (let target_rows unknown (let $v0 true-board.shape 0))))",
  "(lam (lam (let rows_to_check unknown (let n_cols (app (app subscript true-board.shape) 1) 0))))",
  "(lam (lam (let target_rows unknown (let ncols (app (app subscript true-board.shape) 1) 0))))",
  "(lam (lam (let rows_to_check unknown 0)))",
  "(lam (lam (let target_row 7 (let ship_ids unknown 0))))",
  "(lam (lam (let row_idx 0 (let row_true (app (app subscript true-board) row_idx) (let row_partial (app (app subscript partial-board) row_idx) (let cur_id () (let run_start 0 (let run_len 0 (let n (app (app subscript row_true.shape) 0) 0)))))))))",
  "(lam (lam (let red_coords (app np-argwhere (app (app eq true-board) 1)) (app np-all (app (app eq (app (app subscript red_coords) (pair (slice 0 inf) 1))) (app (app subscript red_coords) (pair 0 1)))))))",
  "(lam (lam (let red_positions (app np-where (app (app eq true-board) 1)) (let purple_positions (app np-where (app (app eq true-board) 3)) (let red_cols (app (app subscript red_positions) 1) (let purple_cols (app (app subscript purple_positions) 1) (app (app gt red_cols.min) purple_cols.max)))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let red_positions (app np-argwhere (app (app eq true-board) 1)) (let rows (app (app subscript red_positions) (pair (slice 0 inf) 0)) (app (app eq ('app', 'np-unique', 'rows').size) 1)))))",
  "(lam (lam (let orange_positions (app np-argwhere (app (app eq true-board) 4)) (let $v0 true-board.shape (let neighbors unknown 0)))))",
  "(lam (lam (let purple_tile_count (app np-sum (app (app eq true-board) 3)) (app (app eq purple_tile_count) 2))))",
  "(lam (lam (let GREEN 2 (let OTHER_SHIPS unknown (let $v0 true-board.shape (let green_positions (app np-argwhere (app (app eq true-board) GREEN)) 0))))))",
  "(lam (lam (let orange_coords (app np-argwhere (app (app eq true-board) 4)) (let cols (app (app subscript orange_coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"D\")) (app ord \"A\")) (let hidden_mask (app (app eq partial-board) unknown) (let ship_mask (app (app gt true-board) 0) (app bool (app np-any (app (app and (app (app subscript hidden_mask) row_index)) (app (app subscript ship_mask) row_index)))))))))",
  "(lam (lam (let row_index 0 (let hidden_ship_tiles (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any hidden_ship_tiles))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"B\")) (app ord \"A\")) (let hidden_ships_in_B (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ships_in_B))))))",
  "(lam (lam (let row (app (app sub (app ord \"C\")) (app ord \"A\")) (let unrevealed_ship (app (app and (app (app gt (app (app subscript true-board) row)) 0)) (app (app eq (app (app subscript partial-board) row)) unknown)) (app bool (app np-any unrevealed_ship))))))",
  "(lam (lam (let row_idx 0 (let ships_in_row (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (app bool (app np-any (app (app and ships_in_row) hidden_tiles))))))))",
  "(lam (lam (let orange_tile_count (app np-count_nonzero (app (app eq true-board) 4)) (app (app eq orange_tile_count) 2))))",
  "(lam (lam (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) (let unsunk_ids unknown (let last_ship_id (app (app subscript unsunk_ids) 0) (let $v0 (app np-where (app (app eq true-board) last_ship_id)) (app np-any (app (app eq rows) 7)))))))))",
  "(lam (lam (let hidden_ship (app (app and (app (app ne true-board) 0)) (app (app eq partial-board) unknown)) (app bool ('app', ('app', 'subscript', 'hidden_ship'), ('pair', ('slice', '5', '8'), ('slice', '0', 'inf'))).any))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let col_indices (app (app np-broadcast_to (app np-arange (app (app subscript true-board.shape) 1))) true-board.shape) (app bool (app np-any (app (app and hidden_ships) (app (app lt col_indices) 3))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let unrevealed_ships (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any unrevealed_ships))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))",
  "(lam (lam (let col_idx 2 (let unrevealed_ship_mask (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app bool unrevealed_ship_mask.any)))))",
  "(lam (lam (let col_index 7 (let unrevealed_ships (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_index))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_index))) unknown)) (app bool (app np-any unrevealed_ships))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"H\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_index) (let partial_row (app (app subscript partial-board) row_index) (let hidden_ship_tiles (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any hidden_ship_tiles))))))))",
  "(lam (lam (let col_idx 0 (let unrevealed (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app bool (app np-any unrevealed))))))",
  "(lam (lam (let n_cols (app (app subscript true-board.shape) 1) 0)))",
  "(lam (lam (let cols unknown (app all unknown))))",
  "(lam (lam (let col 6 (let unrevealed (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col))) unknown)) (app bool unrevealed.any)))))",
  "(lam (lam (let col_idx (app (app sub 6) 1) (let unrevealed_ship_mask (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool ('app', ('app', 'subscript', 'unrevealed_ship_mask'), ('pair', ('slice', '0', 'inf'), 'col_idx')).any)))))",
  "(lam (lam (let has_ship ('app', ('app', 'gt', 'true-board'), '0').any (let rows_except_H (app (app subscript has_ship) (slice 0 unknown)) (app bool (app np-any unknown))))))",
  "(lam (lam (let row_labels unknown (let target_rows unknown 1))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let true_row (app (app subscript true-board) row_idx) (let partial_row (app (app subscript partial-board) row_idx) (let still_hidden_ship (app (app np-logical_and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app np-any still_hidden_ship)))))))",
  "(lam (lam (let row_label \"F\" (let row_idx (app (app sub (app ord row_label)) (app ord \"A\")) (let hidden_ship_mask (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any hidden_ship_mask)))))))",
  "(lam (lam (let row_F (app (app sub (app ord \"F\")) (app ord \"A\")) (let row_H (app (app sub (app ord \"H\")) (app ord \"A\")) (let n_rows (app (app subscript true-board.shape) 0) 0)))))",
  "(lam (lam (let row_idx 0 (let hidden_ship_tiles (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any hidden_ship_tiles))))))",
  "(lam (lam (let row_label \"B\" (let row_idx (app (app sub (app ord row_label)) (app ord \"A\")) (let hidden_ship_tiles (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any hidden_ship_tiles)))))))",
  "(lam (lam (let row_index 0 (let unrevealed_ship_tiles (app (app and (app (app ne (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let ship_cells_per_row (app np-sum (app (app gt true-board) 0)) (app bool (app np-any (app (app eq (app (app subscript ship_cells_per_row) (slice 1 inf))) 0))))))",
  "(lam (lam (let ship_cells (app (app gt true-board) 0) (let hidden_cells (app (app eq partial-board) unknown) (let remaining_ships (app (app and ship_cells) hidden_cells) (app np-any (app (app subscript remaining_ships) (pair 7 (slice 0 inf)))))))))",
  "(lam (lam (let ship_ids unknown (let destroyed_ids unknown (let remaining_ids unknown (let destroyed_cells set (let remaining_cells set (let neighbors unknown 0))))))))",
  "(lam (lam (let unrevealed_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let cols_have_ship (app np-any unrevealed_ship) (app bool (app np-all cols_have_ship))))))",
  "(lam (lam (let row (app (app sub (app ord \"G\")) (app ord \"A\")) (let col (app (app sub 7) 1) 0))))",
  "(lam (lam (let $v0 true-board.shape (let neighbors unknown 0))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool ('app', ('app', 'subscript', 'hidden_ships'), ('pair', ('slice', '0', 'inf'), ('slice', '0', '3'))).any))))",
  "(lam (lam (let col_index 0 (let true_col (app (app subscript true-board) (pair (slice 0 inf) col_index)) (let partial_col (app (app subscript partial-board) (pair (slice 0 inf) col_index)) (let hidden_mask (app (app and (app (app gt true_col) 0)) (app (app eq partial_col) unknown)) (let hidden_ships (app np-unique (app (app subscript true_col) hidden_mask)) (app (app gt hidden_ships.size) 1))))))))",
  "(lam (lam (let hidden_tiles (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let remaining_labels (app np-unique (app (app subscript true-board) hidden_tiles)) 0))))",
  "(lam (lam (app (app ne (app (app subscript true-board) (pair 7 0))) 0)))",
  "(lam (lam (let hidden_green (app (app and (app (app eq true-board) 2)) (app (app eq partial-board) unknown)) (let $v0 (app np-where hidden_green) (app (app and (app (app and (app (app eq rows.size) 1)) (app (app eq (app (app subscript rows) 0)) 1))) (app (app eq (app (app subscript cols) 0)) 4))))))",
  "(lam (lam (let green_tiles (app (app eq true-board) 2) (let hidden_green (app (app and green_tiles) (app (app eq partial-board) unknown)) (app bool (app (app subscript hidden_green) (pair 0 3)))))))",
  "(lam (lam (let red_positions (app np-argwhere (app (app eq true-board) 1)) (let $v0 true-board.shape (let neighbors unknown 0)))))",
  "(lam (lam (let $v0 true-board.shape (let red_positions (app np-argwhere (app (app eq true-board) 1)) 0))))",
  "(lam (lam (let row_index 0 (let unrevealed_in_A (app (app np-logical_and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any unrevealed_in_A))))))",
  "(lam (lam (let hidden_tiles (app (app eq partial-board) unknown) (let ship_tiles (app (app gt true-board) 0) (let hidden_ship_tiles (app (app and hidden_tiles) ship_tiles) (let rows_with_hidden_ships (app np-any hidden_ship_tiles) (app bool (app np-all rows_with_hidden_ships))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"H\")) (app ord \"A\")) (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let target_rows unknown 1)))",
  "(lam (lam (let green_positions (app np-argwhere (app (app eq true-board) 2)) (let rows (app (app subscript green_positions) (pair (slice 0 inf) 0)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let col_idx (app (app sub 7) 1) (app bool (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"B\")) (app ord \"A\")) (let col_idx (app (app sub 4) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let green_positions (app np-argwhere (app (app eq true-board) 2)) (let rows (app (app subscript green_positions) (pair (slice 0 inf) 0)) (let cols (app (app subscript green_positions) (pair (slice 0 inf) 1)) (app (app and (app np-all (app (app eq cols) (app (app subscript cols) 0)))) (app (app eq (app (app add (app (app sub rows.max) rows.min)) 1)) (app len rows))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) (let col_idx (app (app sub 4) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let col_idx (app (app sub 5) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let col_idx (app (app sub 5) 1) (app (app ne (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) (let col_idx (app (app sub 6) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx 0 (let col_idx 0 (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let col_idx (app (app sub 8) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (app (app ne (app (app subscript true-board) (pair 0 1))) 0)))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let col_idx (app (app sub 5) 1) (let is_ship (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0) (let is_hidden (app (app eq (app (app subscript partial-board) (pair row_idx col_idx))) unknown) (app bool (app (app and is_ship) is_hidden))))))))",
  "(lam (lam (let coord \"D1\" (let row (app (app sub (app ord (app (app subscript coord) 0))) (app ord \"A\")) (let col (app (app sub (app int (app (app subscript coord) (slice 1 inf)))) 1) (app (app gt (app (app subscript true-board) (pair row col))) 0))))))",
  "(lam (lam (let row (app (app sub (app ord \"C\")) (app ord \"A\")) (let col (app (app sub 5) 1) (app (app gt (app (app subscript true-board) (pair row col))) 0)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) (let col_idx (app (app sub 5) 1) (app (app ne (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let col_idx (app (app sub 4) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let purple_positions (app np-argwhere (app (app eq true-board) 3)) (let cols (app (app subscript purple_positions) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let $v0 (app np-where (app (app eq true-board) 2)) (let is_horizontal (app (app eq rows.max) rows.min) (let n_cols (app (app subscript true-board.shape) 1) (let right_threshold (app (app unknown n_cols) 2) (let is_on_right (app np-all (app (app gte cols) right_threshold)) (app bool (app (app and is_horizontal) is_on_right)))))))))",
  "(lam (lam (let row (app (app sub (app ord \"B\")) (app ord \"A\")) (let col (app (app sub 7) 1) (app (app and (app (app eq (app (app subscript partial-board) (pair row col))) unknown)) (app (app ne (app (app subscript true-board) (pair row col))) 0))))))",
  "(lam (lam (let col_idx 0 (let true_col (app (app subscript true-board) (pair (slice 0 inf) col_idx)) (let partial_col (app (app subscript partial-board) (pair (slice 0 inf) col_idx)) (let unrevealed_ship_mask (app (app and (app (app gt true_col) 0)) (app (app eq partial_col) unknown)) (app bool (app np-any unrevealed_ship_mask))))))))",
  "(lam (lam (let orange_coords (app np-argwhere (app (app eq true-board) 4)) (let max_row (app (app subscript true-board.shape) 0) 0))))",
  "(lam (lam (let unrevealed_ships (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) None)))",
  "(lam (lam (let orange_coords (app np-argwhere (app (app eq partial-board) 4)) 0)))",
  "(lam (lam (let green_positions (app np-argwhere (app (app eq true-board) 2)) (let unique_cols (app np-unique (app (app subscript green_positions) (pair (slice 0 inf) 1))) (app (app eq unique_cols.size) 1)))))",
  "(lam (lam (let n_cols (app (app subscript true-board.shape) 1) (let right_start (app (app unknown n_cols) 2) (let true_right (app (app subscript true-board) (pair (slice 0 inf) (slice right_start inf))) (let partial_right (app (app subscript partial-board) (pair (slice 0 inf) (slice right_start inf))) (let orange_unrevealed (app (app and (app (app eq true_right) 4)) (app (app eq partial_right) unknown)) (app bool (app np-any orange_unrevealed)))))))))",
  "(lam (lam (let red_rows (app (app subscript (app np-where (app (app eq true-board) 1))) 0) (let max_red_row red_rows.max (let sub_true (app (app subscript true-board) (pair (slice (app (app add max_red_row) 1) inf) (slice 0 inf))) (let sub_part (app (app subscript partial-board) (pair (slice (app (app add max_red_row) 1) inf) (slice 0 inf))) (let hidden_ships_below (app (app and (app (app gt sub_true) 0)) (app (app eq sub_part) unknown)) (app bool (app np-any hidden_ships_below)))))))))",
  "(lam (lam (let cols_to_check unknown (let ships_still_hidden (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) cols_to_check))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) cols_to_check))) unknown)) (app bool (app np-any ships_still_hidden))))))",
  "(lam (lam (let green_positions (app np-argwhere (app (app eq true-board) 2)) (let rows (app (app subscript green_positions) (pair (slice 0 inf) 0)) (let cols (app (app subscript green_positions) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let cols unknown (let unrevealed (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) cols))) unknown) (let ships_there (app (app gt (app (app subscript true-board) (pair (slice 0 inf) cols))) 0) (app bool (app np-any (app (app and unrevealed) ships_there))))))))",
  "(lam (lam (app bool (app (app gt (app (app subscript true-board) (pair unknown unknown))) 0))))",
  "(lam (lam (app (app gt (app (app subscript true-board) (pair 0 0))) 0)))",
  "(lam (lam (let $v0 true-board.shape (let mid_row (app (app unknown rows) 2) (let mid_col (app (app unknown cols) 2) (let bl_quad (app (app subscript true-board) (pair (slice mid_row rows) (slice 0 mid_col))) (let ships_in_bl (app set (app np-unique bl_quad)) (app (app gte (app len ships_in_bl)) 3))))))))",
  "(lam (lam (let row_idx 7 (let hidden_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ship_tiles))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"G\")) (app ord \"A\")) (let true_row (app (app subscript true-board) (pair row_index (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_index (slice 0 inf))) (let hidden_ship_tiles (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any hidden_ship_tiles))))))))",
  "(lam (lam (let tr_true (app (app subscript true-board) (pair (slice 0 4) (slice 4 8))) (let tr_partial (app (app subscript partial-board) (pair (slice 0 4) (slice 4 8))) (let unseen_ship_mask (app (app and (app (app ne tr_true) 0)) (app (app eq tr_partial) unknown)) (app bool (app np-any unseen_ship_mask)))))))",
  "(lam (lam (let tl_true (app (app subscript true-board) (pair (slice 0 4) (slice 0 4))) (let tl_partial (app (app subscript partial-board) (pair (slice 0 4) (slice 0 4))) (let hidden_ship_tiles (app (app and (app (app gt tl_true) 0)) (app (app eq tl_partial) unknown)) (app np-any hidden_ship_tiles))))))",
  "(lam (lam (let tr_true (app (app subscript true-board) (pair (slice 0 4) (slice 4 8))) (let tr_partial (app (app subscript partial-board) (pair (slice 0 4) (slice 4 8))) (let unrevealed_ship (app (app and (app (app ne tr_true) 0)) (app (app eq tr_partial) unknown)) (app bool (app np-any unrevealed_ship)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let col_idx (app (app sub 6) 1) (app (app ne (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let tb (app (app subscript true-board) (pair (slice 4 8) (slice 0 4))) (let pb (app (app subscript partial-board) (pair (slice 4 8) (slice 0 4))) (app np-any (app (app and (app (app gt tb) 0)) (app (app eq pb) unknown)))))))",
  "(lam (lam (let row (app (app sub (app ord \"H\")) (app ord \"A\")) (let col (app (app sub 7) 1) (app (app ne (app (app subscript true-board) (pair row col))) 0)))))",
  "(lam (lam (let row_slice (app (app slice 4) 8) (let col_slice (app (app slice 4) 8) (let true_sub (app (app subscript true-board) (pair row_slice col_slice)) (let partial_sub (app (app subscript partial-board) (pair row_slice col_slice)) (let hidden_ships_mask (app (app and (app (app gt true_sub) 0)) (app (app eq partial_sub) unknown)) (app bool (app np-any hidden_ships_mask)))))))))",
  "(lam (lam (let $v0 (app np-nonzero (app (app gt true-board) 0)) (app np-all (app (app lt ship_cols) 4)))))",
  "(lam (lam (let $v0 (app np-unique (app (app subscript true-board) (app (app gt true-board) 0))) (let ship_id (app (app subscript labels) (app np-argmax counts)) (let positions (app np-argwhere (app (app eq true-board) ship_id)) (let cols (app (app subscript positions) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))))",
  "(lam (lam (let ship_cells (app (app subscript true-board) (app (app gt true-board) 0)) (let $v0 (app np-unique ship_cells) (let max_len counts.max (let biggest_ids (app (app subscript ship_ids) (app (app eq counts) max_len)) 0))))))",
  "(lam (lam (app (app gt (app (app subscript true-board) (pair 0 3))) 0)))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let col_idx (app (app sub 4) 1) (app (app ne (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"d\")) (app ord \"a\")) (let ncols (app (app subscript true-board.shape) 1) 0))))",
  "(lam (lam (let true_sub (app (app subscript true-board) (pair (slice 0 4) (slice 0 4))) (let partial_sub (app (app subscript partial-board) (pair (slice 0 4) (slice 0 4))) (let unrevealed_ships (app (app and (app (app gt true_sub) 0)) (app (app eq partial_sub) unknown)) (app bool (app np-any unrevealed_ships)))))))",
  "(lam (lam (let $v0 true-board.shape (let mid_row (app (app unknown n_rows) 2) (let mid_col (app (app unknown n_cols) 2) (let true_top_right (app (app subscript true-board) (pair (slice 0 mid_row) (slice mid_col inf))) (let partial_top_right (app (app subscript partial-board) (pair (slice 0 mid_row) (slice mid_col inf))) (let ship_tiles (app (app gt true_top_right) 0) (let hidden_tiles (app (app eq partial_top_right) unknown) (app bool (app np-any (app (app and ship_tiles) hidden_tiles))))))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let col_idx (app (app sub 2) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let $v0 true-board.shape (let mid_row (app (app unknown n_rows) 2) (let mid_col (app (app unknown n_cols) 2) (let true_quadrant (app (app subscript true-board) (pair (slice mid_row inf) (slice 0 mid_col))) (let partial_quadrant (app (app subscript partial-board) (pair (slice mid_row inf) (slice 0 mid_col))) (let hidden_mask (app (app eq partial_quadrant) unknown) (let has_ship (app np-any (app (app and (app (app gt true_quadrant) 0)) hidden_mask)) (app bool has_ship))))))))))",
  "(lam (lam (let row (app (app sub (app ord \"G\")) (app ord \"A\")) (let col (app (app sub 1) 1) (app (app gt (app (app subscript true-board) (pair row col))) 0)))))",
  "(lam (lam (let row_idx 1 (let ship_tiles (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (app bool (app np-any (app (app and ship_tiles) hidden_tiles))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let col_idx (app (app sub 7) 1) (app (app ne (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let green_positions (app np-argwhere (app (app eq true-board) 2)) (let cols (app (app subscript green_positions) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"e\")) (app ord \"a\")) (let col_idx (app (app sub 3) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx 5 (let unrevealed_ships (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ships))))))",
  "(lam (lam (let row_index 0 (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let ship_ids (app np-unique (app (app subscript true-board) (app (app gt true-board) 0))) (let max_len 0 (let is_horizontal 0 is_horizontal)))))",
  "(lam (lam (let $v0 (app np-unique true-board) (let mask (app (app gt ship_ids) 0) (let ship_ids (app (app subscript ship_ids) mask) (let counts (app (app subscript counts) mask) (let largest_ship_id (app (app subscript ship_ids) (app np-argmax counts)) (let $v1 (app np-where (app (app eq true-board) largest_ship_id)) (let target_row (app (app sub (app ord \"G\")) (app ord \"A\")) (app np-all (app (app eq row_indices) target_row)))))))))))",
  "(lam (lam (let edge_mask (app np-zeros_like true-board) (let $v0 1 (let $v1 1 (let $v2 1 (let $v3 1 (let hidden_ship_on_edge (app (app and (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) edge_mask) (app bool (app np-any hidden_ship_on_edge))))))))))",
  "(lam (lam (let hits (app np-argwhere (app (app eq partial-board) 3)) (let $v0 (app (app subscript hits) 0) (app bool (app (app eq (app (app subscript true-board) (pair row (app (app sub col) 1)))) 3))))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let half (app (app unknown n_rows) 2) (let ship_ids (app (app sub (app set (app np-unique true-board))) unknown) (let remaining unknown (let last_id (app (app subscript remaining) 0) (let $v0 (app np-where (app (app eq true-board) last_id)) (app bool (app np-all (app (app gte rows) half)))))))))))",
  "(lam (lam (let revealed (app (app ne partial-board) unknown) (let hits (app (app np-logical_and revealed) (app (app gt true-board) 0)) (app bool (app np-any hits))))))",
  "(lam (lam (let unrevealed (app (app eq partial-board) unknown) (let is_ship (app (app gt true-board) 0) (let unrevealed_ships (app (app and unrevealed) is_ship) (let edge_mask (app np-zeros_like true-board) (let $v0 1 (let $v1 1 (let $v2 1 (let $v3 1 (app bool (app np-any (app (app and unrevealed_ships) edge_mask)))))))))))))",
  "(lam (lam (let $v0 true-board.shape (let row_start (app (app unknown h) 4) (let row_end (app (app sub h) (app (app unknown h) 4)) (let col_start (app (app unknown w) 4) (let col_end (app (app sub w) (app (app unknown w) 4)) (let center_true (app (app subscript true-board) (pair (slice row_start row_end) (slice col_start col_end))) (let center_partial (app (app subscript partial-board) (pair (slice row_start row_end) (slice col_start col_end))) (let has_unseen_ship (app np-any (app (app and (app (app gt center_true) 0)) (app (app eq center_partial) unknown))) (app bool has_unseen_ship)))))))))))",
  "(lam (lam (let col_idx 7 (let hidden_green_in_col8 (app (app and (app (app eq (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 2)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app bool (app np-any hidden_green_in_col8))))))",
  "(lam (lam (let $v0 (app np-where (app (app eq partial-board) 1)) 0)))",
  "(lam (lam (let unrevealed_mask (app (app and (app (app ne true-board) 0)) (app (app eq partial-board) unknown)) (let remaining_types (app np-unique (app (app subscript true-board) unrevealed_mask)) (let last_ship_type (app (app subscript remaining_types) 0) (let last_coords (app np-argwhere (app (app eq true-board) last_ship_type)) (let red_coords (app np-argwhere (app (app eq true-board) 1)) (let orange_coords (app np-argwhere (app (app eq true-board) 4)) (let ro_coords (app np-vstack (pair red_coords orange_coords)) (let dists ('app', 'np-abs', ('app', ('app', 'sub', ('app', ('app', 'subscript', 'last_coords'), ('pair', ('slice', '0', 'inf'), ('pair', '()', ('slice', '0', 'inf'))))), ('app', ('app', 'subscript', 'ro_coords'), ('pair', '()', ('pair', ('slice', '0', 'inf'), ('slice', '0', 'inf')))))).sum (let min_dist dists.min (app bool (app (app lte min_dist) 2)))))))))))))",
  "(lam (lam (let orange_hits (app np-argwhere (app (app eq partial-board) 4)) (let rightmost_hit (app (app subscript orange_hits) (app np-argmax (app (app subscript orange_hits) (pair (slice 0 inf) 1)))) (let $v0 rightmost_hit 0)))))",
  "(lam (lam (let col_idx 7 (let hidden_tiles_in_col (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (let ship_tiles_in_col (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (app bool (app np-any (app (app and hidden_tiles_in_col) ship_tiles_in_col))))))))",
  "(lam (lam (let n (app (app subscript true-board.shape) 0) (let mid1 (app (app sub (app (app unknown n) 2)) 1) (let mid2 (app (app unknown n) 2) (let true_center (app (app subscript true-board) (pair (slice mid1 (app (app add mid2) 1)) (slice mid1 (app (app add mid2) 1)))) (let partial_center (app (app subscript partial-board) (pair (slice mid1 (app (app add mid2) 1)) (slice mid1 (app (app add mid2) 1)))) (app np-any (app (app and (app (app gt true_center) 0)) (app (app eq partial_center) unknown))))))))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let half (app (app unknown n_rows) 2) (let tb_bot (app (app subscript true-board) (pair (slice half inf) (slice 0 inf))) (let pb_bot (app (app subscript partial-board) (pair (slice half inf) (slice 0 inf))) (let unseen_ship_tiles (app (app and (app (app gt tb_bot) 0)) (app (app eq pb_bot) unknown)) (app bool (app np-any unseen_ship_tiles)))))))))",
  "(lam (lam (let red_cells (app np-argwhere (app (app eq true-board) 1)) (let green_cells (app np-argwhere (app (app eq true-board) 2)) (let row_diff (app np-abs (app (app sub (app (app subscript red_cells) (pair (slice 0 inf) (pair () 0)))) (app (app subscript green_cells) (pair () (pair (slice 0 inf) 0))))) (let col_diff (app np-abs (app (app sub (app (app subscript red_cells) (pair (slice 0 inf) (pair () 1)))) (app (app subscript green_cells) (pair () (pair (slice 0 inf) 1))))) (let cheb_dist (app (app np-maximum row_diff) col_diff) (app bool (app np-any (app (app lte cheb_dist) 1))))))))))",
  "(lam (lam (let green_coords (app np-argwhere (app (app eq true-board) 2)) (let orange_coords (app np-argwhere (app (app eq true-board) 4)) (let purple_coords (app np-argwhere (app (app eq true-board) 3)) (let close_to_orange (app (app is_adjacent green_coords) orange_coords) (let close_to_purple (app (app is_adjacent green_coords) purple_coords) (app (app and close_to_orange) close_to_purple))))))))",
  "(lam (lam (let n (app (app subscript true-board.shape) 0) (let start (app (app unknown n) 4) (let end (app (app sub n) (app (app unknown n) 4)) (let central_true (app (app subscript true-board) (pair (slice start end) (slice start end))) (let central_partial (app (app subscript partial-board) (pair (slice start end) (slice start end))) (let hidden_ships (app (app and (app (app gt central_true) 0)) (app (app eq central_partial) unknown)) (app bool (app np-any hidden_ships))))))))))",
  "(lam (lam (let top_unrevealed_ships (app (app and (app (app gt (app (app subscript true-board) 0)) 0)) (app (app eq (app (app subscript partial-board) 0)) unknown)) (app bool (app np-any top_unrevealed_ships)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let true_row (app (app subscript true-board) (pair row_idx (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_idx (slice 0 inf))) (let hidden_ship_cells (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any hidden_ship_cells))))))))",
  "(lam (lam (let col_idx (app (app sub (app ord \"B\")) (app ord \"A\")) (let ships_in_B_still_hidden (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app bool (app np-any ships_in_B_still_hidden))))))",
  "(lam (lam (let row_H_index 7 (let hidden_ship_tiles_in_H (app (app and (app (app gt (app (app subscript true-board) row_H_index)) 0)) (app (app eq (app (app subscript partial-board) row_H_index)) unknown)) (app bool (app np-any hidden_ship_tiles_in_H))))))",
  "(lam (lam (let red_hits (app np-argwhere (app (app eq partial-board) 1)) 0)))",
  "(lam (lam (let positions (app np-argwhere (app (app eq true-board) 4)) (let $v0 (pair (app (app subscript positions) (pair (slice 0 inf) 0)) (app (app subscript positions) (pair (slice 0 inf) 1))) (app (app and (app (app eq (app len (app set cols))) 1)) (app (app gt (app len (app set rows))) 1))))))",
  "(lam (lam (let $v0 (app np-where (app (app eq true-board) 1)) (app (app and (app (app gt ('app', 'np-unique', 'red_rows').size) 1)) (app (app eq ('app', 'np-unique', 'red_cols').size) 1)))))",
  "(lam (lam (let $v0 true-board.shape (let corners unknown 0))))",
  "(lam (lam (let positions (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript positions) (pair (slice 0 inf) 0)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))",
  "(lam (lam (let n_cols (app (app subscript partial-board.shape) 1) (let half (app (app unknown n_cols) 2) (let right_cols (app (app gte (app np-arange n_cols)) half) (let right_mask (app (app np-broadcast_to right_cols) partial-board.shape) (let hidden_ship_mask (app (app and (app (app ne true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app and hidden_ship_mask) right_mask))))))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 3)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) (app (app and (app (app eq (app len (app np-unique cols))) 1)) (app (app gt (app len (app np-unique rows))) 1))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"H\")) (app ord \"A\")) (let mask_unrevealed_ship (app (app and (app (app gt (app (app subscript true-board) row_index)) 0)) (app (app eq (app (app subscript partial-board) row_index)) unknown)) (app bool (app np-any mask_unrevealed_ship))))))",
  "(lam (lam (let mid_row (app (app unknown (app (app subscript true-board.shape) 0)) 2) (let mid_col (app (app unknown (app (app subscript true-board.shape) 1)) 2) (let ul_true (app (app subscript true-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let ul_partial (app (app subscript partial-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (app bool (app np-any (app (app and (app (app gt ul_true) 0)) (app (app eq ul_partial) unknown))))))))))",
  "(lam (lam (let positions (app np-argwhere (app (app eq true-board) 4)) (let cols (app (app subscript positions) (pair (slice 0 inf) 1)) (app (app eq ('app', 'np-unique', 'cols').size) 1)))))",
  "(lam (lam (let purple_coords (app np-argwhere (app (app eq true-board) 3)) (let neighbors unknown (let $v0 true-board.shape 0)))))",
  "(lam (lam (let bottom_row_hidden_ship (app (app and (app (app gt (app (app subscript true-board) (pair unknown (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair unknown (slice 0 inf)))) unknown)) (let right_col_hidden_ship (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) unknown))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) unknown))) unknown)) (app bool (app (app or (app np-any bottom_row_hidden_ship)) (app np-any right_col_hidden_ship)))))))",
  "(lam (lam (let col_idx 4 (let hidden_ship_in_col (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app bool hidden_ship_in_col.any)))))",
  "(lam (lam (let row_g_index 6 (let rows (app (app subscript (app np-arange (app (app subscript true-board.shape) 0))) (pair (slice 0 inf) ())) (let adjacent_to_g (app (app lte (app np-abs (app (app sub rows) row_g_index))) 1) (let ship_tiles (app (app gt true-board) 0) (let hidden_tiles (app (app eq partial-board) unknown) (let relevant_tiles (app (app and (app (app and adjacent_to_g) ship_tiles)) hidden_tiles) (app bool (app np-any relevant_tiles))))))))))",
  "(lam (lam (let col_idx 7 (let is_ship (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let is_hidden (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and is_ship) is_hidden))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"D\")) (app ord \"A\")) (let unrevealed_ship_tiles (app (app and (app (app gt (app (app subscript true-board) row_idx)) 0)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))",
  "(lam (lam (let $v0 (pair 2 6) (let $v1 (pair 2 6) (let true_center (app (app subscript true-board) (pair (slice r_start r_end) (slice c_start c_end))) (let partial_center (app (app subscript partial-board) (pair (slice r_start r_end) (slice c_start c_end))) (let hidden_ship_mask (app (app and (app (app gt true_center) 0)) (app (app eq partial_center) unknown)) (app bool (app np-any hidden_ship_mask)))))))))",
  "(lam (lam (let left_true (app (app subscript true-board) (pair (slice 0 inf) 0)) (let left_partial (app (app subscript partial-board) (pair (slice 0 inf) 0)) (let hidden_ship_on_left (app (app and (app (app eq left_partial) unknown)) (app (app gt left_true) 0)) (app bool (app np-any hidden_ship_on_left)))))))",
  "(lam (lam (let n_cols (app (app subscript true-board.shape) 1) (let midpoint (app (app unknown n_cols) 2) (let true_left (app (app subscript true-board) (pair (slice 0 inf) (slice 0 midpoint))) (let part_left (app (app subscript partial-board) (pair (slice 0 inf) (slice 0 midpoint))) (let mask_unrevealed_ships (app (app and (app (app gt true_left) 0)) (app (app eq part_left) unknown)) (app bool (app np-any mask_unrevealed_ships)))))))))",
  "(lam (lam (let $v0 partial-board.shape (let water_positions (app np-argwhere (app (app eq partial-board) 0)) 0))))",
  "(lam (lam (let top_right (app (app subscript true-board) (pair (slice 0 2) (slice 6 8))) (app np-any (app (app gt top_right) 0)))))",
  "(lam (lam (let ship_hits (app np-argwhere (app (app gt partial-board) 0)) (let directions unknown (let $v0 partial-board.shape 0)))))",
  "(lam (lam (let hits (app np-argwhere (app (app gt partial-board) 0)) 0)))",
  "(lam (lam (let hits (app np-argwhere (app (app and (app (app gt partial-board) 0)) (app (app eq partial-board) true-board))) (let $v0 (app (app subscript hits) (app np-argmax (app (app subscript hits) (pair (slice 0 inf) 0)))) (let ship_id (app (app subscript true-board) (pair i j)) (let $v1 true-board.shape (let down_i (app (app add i) 1) None)))))))",
  "(lam (lam (let hits (app np-argwhere (app (app gt partial-board) 0)) (let hits (app (app subscript hits) (app np-argsort (app (app subscript hits) (pair (slice 0 inf) axis)))) (let $v0 (pair (app (app subscript hits) 0) (app (app subscript hits) unknown)) (let ship_id (app (app subscript true-board) (pair (app (app subscript endpoint1) 0) (app (app subscript endpoint1) 1))) (let delta (app (app sub endpoint2) endpoint1) (let delta (app (app unknown delta) (app np-max (app np-abs delta))) (let $v1 (app (app add endpoint2) delta) 0)))))))))",
  "(lam (lam (let $v0 partial-board.shape 1)))",
  "(lam (lam (let hidden_ship_mask (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let count_row6 (app np-count_nonzero (app (app subscript hidden_ship_mask) 5)) (let count_row8 (app np-count_nonzero (app (app subscript hidden_ship_mask) 7)) (app (app gte count_row6) count_row8))))))",
  "(lam (lam (let ship_mask (app (app gt true-board) 0) (let hidden_mask (app (app eq partial-board) unknown) (app bool (app np-any (app (app and ship_mask) hidden_mask)))))))",
  "(lam (lam (let hits (app np-argwhere (app (app gt partial-board) 0)) (let visited set (let clusters unknown (let cluster (app max clusters) (let rows unknown (let cols unknown 0))))))))",
  "(lam (lam (let ship_ids unknown 1)))",
  "(lam (lam (let hidden_ships (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let count_AD ('app', ('app', 'subscript', 'hidden_ships'), ('pair', ('slice', '0', '4'), ('slice', '0', 'inf'))).sum (let count_EH ('app', ('app', 'subscript', 'hidden_ships'), ('pair', ('slice', '4', 'inf'), ('slice', '0', 'inf'))).sum (app (app gt count_AD) count_EH))))))",
  "(lam (lam (let hidden_ship_tiles (app (app and (app (app eq partial-board) unknown)) (app (app ne true-board) 0)) (let n_cols (app (app subscript partial-board.shape) 1) (let mid (app (app unknown n_cols) 2) (let left_count ('app', ('app', 'subscript', 'hidden_ship_tiles'), ('pair', ('slice', '0', 'inf'), ('slice', '0', 'mid'))).sum (let right_count ('app', ('app', 'subscript', 'hidden_ship_tiles'), ('pair', ('slice', '0', 'inf'), ('slice', 'mid', 'inf'))).sum (app bool (app (app gt left_count) right_count)))))))))",
  "(lam (lam (let n_cols (app (app subscript partial-board.shape) 1) (let half (app (app unknown n_cols) 2) (let left_hidden (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) (slice 0 half)))) unknown) (let right_hidden (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) (slice half inf)))) unknown) (let left_ship_hidden (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) (slice 0 half)))) 0)) left_hidden) (let right_ship_hidden (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) (slice half inf)))) 0)) right_hidden) (let hidden_left (app int left_hidden.sum) (let hidden_right (app int right_hidden.sum) (let ships_left (app int left_ship_hidden.sum) (let ships_right (app int right_ship_hidden.sum) (app (app gt (app (app mul ships_left) hidden_right)) (app (app mul ships_right) hidden_left))))))))))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 1)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app bool (app np-all (app (app eq cols) (app (app subscript cols) 0))))))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let ship_cells (app (app gt true-board) 0) (let unrevealed_ships (app (app and hidden) ship_cells) (let n_cols (app (app subscript true-board.shape) 1) (let mid (app (app unknown n_cols) 2) (app np-any (app (app subscript unrevealed_ships) (pair (slice 0 inf) (slice 0 mid)))))))))))",
  "(lam (lam (let red_hits (app np-argwhere (app (app eq partial-board) 1)) (let n_cols (app (app subscript true-board.shape) 1) 0))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 2)) (let row_indices (app (app subscript coords) (pair (slice 0 inf) 0)) (app np-all (app (app eq row_indices) (app (app subscript row_indices) 0)))))))",
  "(lam (lam 0))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let ship_ids (app (app and (app set true-board.flatten)) (app set partial-board.flatten)) 0)))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let half (app (app unknown n_rows) 2) (let top_true (app (app subscript true-board) (pair (slice 0 half) (slice 0 inf))) (let top_partial (app (app subscript partial-board) (pair (slice 0 half) (slice 0 inf))) (let mask_unrevealed_ship (app (app and (app (app gt top_true) 0)) (app (app eq top_partial) unknown)) (app bool (app np-any mask_unrevealed_ship)))))))))",
  "(lam (lam (let unrevealed_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app np-any (app (app subscript unrevealed_ships) (pair (slice 0 inf) (slice 0 4)))))))",
  "(lam (lam (let $v0 true-board.shape (let row_mid (app (app unknown n_rows) 2) (let col_mid (app (app unknown n_cols) 2) (let bottom_left_mask (app np-zeros_like true-board) (let $v1 1 (let hidden_ship_tiles (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app and hidden_ship_tiles) bottom_left_mask)))))))))))",
  "(lam (lam (let hit_indices (app np-argwhere (app (app gt partial-board) 0)) (let $v0 (app (app subscript hit_indices) 0) (let ship_type (app (app subscript true-board) (pair r c)) (let ship_coords (app np-argwhere (app (app eq true-board) ship_type)) (let rows (app (app subscript ship_coords) (pair (slice 0 inf) 0)) (app (app eq ('app', 'np-unique', 'rows').size) 1))))))))",
  "(lam (lam (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) 0))))",
  "(lam (lam (let bottom_row (app (app sub (app (app subscript true-board.shape) 0)) 1) (let left_col 0 (let has_ship (app (app ne (app (app subscript true-board) (pair bottom_row left_col))) 0) (app bool has_ship))))))",
  "(lam (lam (let $v0 true-board.shape (let mid_row (app (app unknown n_rows) 2) (let mid_col (app (app unknown n_cols) 2) (let true_ul (app (app subscript true-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let partial_ul (app (app subscript partial-board) (pair (slice 0 mid_row) (slice 0 mid_col))) (let unrevealed_ship_mask (app (app and (app (app gt true_ul) 0)) (app (app eq partial_ul) unknown)) (app bool (app np-any unrevealed_ship_mask))))))))))",
  "(lam (lam (let $v0 true-board.shape 0)))",
  "(lam (lam (let br_true (app (app subscript true-board) (pair (slice 4 8) (slice 4 8))) (let br_partial (app (app subscript partial-board) (pair (slice 4 8) (slice 4 8))) (let unrevealed_ship_mask (app (app and (app (app gt br_true) 0)) (app (app eq br_partial) unknown)) (app bool (app np-any unrevealed_ship_mask)))))))",
  "(lam (lam (let hits (app np-argwhere (app (app gt partial-board) 0)) (let $v0 (app (app subscript hits) 0) (let ship_code (app (app subscript true-board) (pair i j)) (let ship_coords (app np-argwhere (app (app eq true-board) ship_code)) (let cols (app (app subscript ship_coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0))))))))))",
  "(lam (lam (let tl_true (app (app subscript true-board) (pair (slice 0 4) (slice 0 4))) (let tl_partial (app (app subscript partial-board) (pair (slice 0 4) (slice 0 4))) (let unrevealed_ship_mask (app (app and (app (app eq tl_partial) unknown)) (app (app gt tl_true) 0)) (app bool (app np-any unrevealed_ship_mask)))))))",
  "(lam (lam (let $v0 partial-board.shape 0)))",
  "(lam (lam (let cols unknown (let hidden_ship_mask (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript hidden_ship_mask) (pair (slice 0 inf) cols))))))))",
  "(lam (lam (let rows unknown (let true_slice (app (app subscript true-board) (pair rows (slice 0 inf))) (let partial_slice (app (app subscript partial-board) (pair rows (slice 0 inf))) (let unrevealed_ships (app (app and (app (app eq partial_slice) unknown)) (app (app gt true_slice) 0)) (app bool (app np-any unrevealed_ships))))))))",
  "(lam (lam (let hit_positions (app set (app zip unknown)) (let clusters unknown (let cluster (app max clusters) (let rows unknown (let cols unknown 0)))))))",
  "(lam (lam (let targeted_id () (let max_hits 0 (let coords (app np-argwhere (app (app eq true-board) targeted_id)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) 0))))))",
  "(lam (lam (let last_hit (app (app subscript hit_positions) (app np-argmax (app (app subscript hit_positions) (pair (slice 0 inf) 0)))) (let $v0 last_hit (let down_r (app (app add r) 1) (app (app and (app (app eq (app (app subscript true-board) (pair down_r c))) ship_id)) (app (app eq (app (app subscript partial-board) (pair down_r c))) unknown)))))))",
  "(lam (lam (let tr (app (app subscript true-board) (pair (slice 4 8) (slice 4 8))) (let pr (app (app subscript partial-board) (pair (slice 4 8) (slice 4 8))) (app bool (app np-any (app (app and (app (app gt tr) 0)) (app (app eq pr) unknown))))))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let ship (app (app gt true-board) 0) (let hidden_ship (app (app and hidden) ship) (app bool ('app', ('app', 'subscript', 'hidden_ship'), ('pair', ('slice', '0', 'inf'), ('slice', '6', 'inf'))).any))))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript hidden_ships) (pair (slice 0 2) (slice 0 inf))))))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let has_in_5_6 (app np-any (app (app subscript hidden_ships) (pair (slice 4 6) (slice 0 inf)))) (let has_in_7_8 (app np-any (app (app subscript hidden_ships) (pair (slice 6 8) (slice 0 inf)))) (app (app and has_in_5_6) unknown))))))",
  "(lam (lam (let rows_to_check unknown 1)))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let upper_has ('app', ('app', 'subscript', 'hidden_ships'), ('pair', ('slice', '0', '4'), ('slice', '0', 'inf'))).any (let lower_has ('app', ('app', 'subscript', 'hidden_ships'), ('pair', ('slice', '4', 'inf'), ('slice', '0', 'inf'))).any (app (app and upper_has) unknown))))))",
  "(lam (lam (let hits unknown (let $v0 partial-board.shape 0))))",
  "(lam (lam (let $v0 (pair (app row_idx \"E\") (app col_idx 4)) (let $v1 (pair (app row_idx \"B\") (app col_idx 4)) (let has_ship_e4 (app (app and (app (app gt (app (app subscript true-board) (pair r1 c1))) 0)) (app (app eq (app (app subscript partial-board) (pair r1 c1))) unknown)) (let has_ship_b4 (app (app and (app (app gt (app (app subscript true-board) (pair r2 c2))) 0)) (app (app eq (app (app subscript partial-board) (pair r2 c2))) unknown)) (app bool (app (app and has_ship_e4) has_ship_b4))))))))",
  "(lam (lam (let row_idx 2 (let ship_tiles (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (let hidden_tiles (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (app bool (app np-any (app (app and ship_tiles) hidden_tiles))))))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let top_half (app (app unknown n_rows) 2) (let true_top (app (app subscript true-board) (pair (slice 0 top_half) (slice 0 inf))) (let partial_top (app (app subscript partial-board) (pair (slice 0 top_half) (slice 0 inf))) (let unrevealed_ship_in_top (app (app and (app (app gt true_top) 0)) (app (app eq partial_top) unknown)) (app bool (app np-any unrevealed_ship_in_top)))))))))",
  "(lam (lam (let $v0 true-board.shape (let row_slice (app (app slice 0) (app (app unknown nrows) 2)) (let col_slice (app (app slice 0) (app (app unknown ncols) 2)) (let true_sub (app (app subscript true-board) (pair row_slice col_slice)) (let partial_sub (app (app subscript partial-board) (pair row_slice col_slice)) (let hidden_ships_in_tl (app (app and (app (app gt true_sub) 0)) (app (app eq partial_sub) unknown)) (app np-any hidden_ships_in_tl)))))))))",
  "(lam (lam (let $v0 true-board.shape (let half_row (app (app unknown n_rows) 2) (let half_col (app (app unknown n_cols) 2) (let true_region (app (app subscript true-board) (pair (slice half_row inf) (slice 0 half_col))) (let partial_region (app (app subscript partial-board) (pair (slice half_row inf) (slice 0 half_col))) (let hidden_ship_mask (app (app and (app (app gt true_region) 0)) (app (app eq partial_region) unknown)) (app np-any hidden_ship_mask)))))))))",
  "(lam (lam (let cols unknown (let ships_in_cols (app (app subscript true-board) (pair (slice 0 inf) cols)) (let hidden_mask (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) cols))) unknown) (app np-any (app (app and (app (app gt ships_in_cols) 0)) hidden_mask)))))))",
  "(lam (lam (let cols unknown (let ship_positions (app (app gt (app (app subscript true-board) (pair (slice 0 inf) cols))) 0) (let still_hidden (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) cols))) unknown) (app bool (app np-any (app (app and ship_positions) still_hidden))))))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript hidden_ships) (pair (slice 0 inf) (slice 0 2))))))))",
  "(lam (lam (let hit_positions (app np-argwhere (app (app gt partial-board) 0)) (let $v0 true-board.shape 0))))",
  "(lam (lam (let hits (app (app gt partial-board) 0) (let $v0 true-board.shape 0))))",
  "(lam (lam (let $v0 true-board.shape (let $v1 (pair (app (app unknown m) 2) (app (app unknown n) 2)) (let br_true (app (app subscript true-board) (pair (slice r0 inf) (slice c0 inf))) (let br_partial (app (app subscript partial-board) (pair (slice r0 inf) (slice c0 inf))) (let unrevealed_ship (app (app and (app (app gt br_true) 0)) (app (app eq br_partial) unknown)) (app bool unrevealed_ship.any))))))))",
  "(lam (lam (let $v0 true-board.shape (let row_mid (app (app unknown n_rows) 2) (let col_mid (app (app unknown n_cols) 2) (let true_quadrant (app (app subscript true-board) (pair (slice 0 row_mid) (slice col_mid inf))) (let partial_quadrant (app (app subscript partial-board) (pair (slice 0 row_mid) (slice col_mid inf))) (let unrevealed_ships (app (app and (app (app gt true_quadrant) 0)) (app (app eq partial_quadrant) unknown)) (app np-any unrevealed_ships)))))))))",
  "(lam (lam (let unrevealed_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript unrevealed_ships) (pair (slice 0 inf) (slice 6 8))))))))",
  "(lam (lam (let hidden_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let $v0 true-board.shape (let coords (app list (app zip unknown)) (let visited set 0))))))",
  "(lam (lam (let unrevealed_ship_tiles (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool ('app', ('app', 'subscript', 'unrevealed_ship_tiles'), ('pair', ('slice', '0', '2'), ('slice', '0', 'inf'))).any))))",
  "(lam (lam (let row_index 1 (let true_row (app (app subscript true-board) (pair row_index (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_index (slice 0 inf))) (let unrevealed_ship_tiles (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool (app np-any unrevealed_ship_tiles))))))))",
  "(lam (lam (let row_g (app (app sub (app ord \"G\")) (app ord \"A\")) (let odd_cols (app (app subscript (app np-arange (app (app subscript true-board.shape) 1))) (slice 0 inf)) (let unseen_ships (app (app and (app (app gt (app (app subscript true-board) (pair row_g odd_cols))) 0)) (app (app eq (app (app subscript partial-board) (pair row_g odd_cols))) unknown)) (app bool (app np-any unseen_ships)))))))",
  "(lam (lam (let hidden_ship_tiles (app (app np-logical_and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let count_hidden (app np-count_nonzero hidden_ship_tiles) (app (app eq (app (app mod count_hidden) 2)) 0)))))",
  "(lam (lam (let top_row (app (app subscript true-board) (pair 0 (slice 0 inf))) (let bottom_row (app (app subscript true-board) (pair unknown (slice 0 inf))) (let left_col (app (app subscript true-board) (pair (slice 0 inf) 0)) (let right_col (app (app subscript true-board) (pair (slice 0 inf) unknown)) (app bool (app (app or (app (app or (app (app or (app np-any (app (app gt top_row) 0))) (app np-any (app (app gt bottom_row) 0)))) (app np-any (app (app gt left_col) 0)))) (app np-any (app (app gt right_col) 0))))))))))",
  "(lam (lam (let unrevealed (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let $v0 (pair 0 (pair 2 (pair 4 6))) (let cond_yes (app (app and ('app', ('app', 'subscript', 'unrevealed'), ('pair', ('slice', '0', 'inf'), 'c1')).any) ('app', ('app', 'subscript', 'unrevealed'), ('pair', ('slice', '0', 'inf'), 'c3')).any) (let cond_no unknown (app (app and cond_yes) cond_no)))))))",
  "(lam (lam (let top_border_has_ship (app np-any (app (app gt (app (app subscript true-board) (pair 0 (slice 0 inf)))) 0)) (let left_border_has_ship (app np-any (app (app gt (app (app subscript true-board) (pair (slice 0 inf) 0))) 0)) (app bool (app (app or top_border_has_ship) left_border_has_ship))))))",
  "(lam (lam (let hits (app np-argwhere (app (app and (app (app gt partial-board) 0)) (app (app gt true-board) 0))) (let $v0 true-board.shape 0))))",
  "(lam (lam (let right_edge_true (app (app subscript true-board) (pair (slice 0 inf) unknown)) (let right_edge_partial (app (app subscript partial-board) (pair (slice 0 inf) unknown)) (let ships_on_right (app (app gt right_edge_true) 0) (let hidden_ships_on_right (app (app and ships_on_right) (app (app eq right_edge_partial) unknown)) (app bool (app np-any hidden_ships_on_right))))))))",
  "(lam (lam (let ship_tiles (app (app gt true-board) 0) (let unrevealed_ships (app (app and ship_tiles) (app (app eq partial-board) unknown)) (let ships_AD ('app', ('app', 'subscript', 'unrevealed_ships'), ('pair', ('slice', '0', '4'), ('slice', '0', 'inf'))).sum (let ships_EH ('app', ('app', 'subscript', 'unrevealed_ships'), ('pair', ('slice', '4', 'inf'), ('slice', '0', 'inf'))).sum (app bool (app (app gt ships_EH) ships_AD))))))))",
  "(lam (lam (let even_count (app np-count_nonzero (app (app gt (app (app subscript true-board) (slice 1 inf))) 0)) (let odd_count (app np-count_nonzero (app (app gt (app (app subscript true-board) (slice 0 inf))) 0)) (app (app gt even_count) odd_count)))))",
  "(lam (lam (let row_index (app (app sub (app ord \"F\")) (app ord \"A\")) (let col_index (app (app sub 3) 1) (app (app gt (app (app subscript true-board) (pair row_index col_index))) 0)))))",
  "(lam (lam (let ship_ids unknown 0)))",
  "(lam (lam (let hidden_ship_mask (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let ship_ids_with_hidden (app np-unique (app (app subscript true-board) hidden_ship_mask)) (let last_ship_id (app (app subscript ship_ids_with_hidden) 0) (let coords (app np-argwhere (app (app eq true-board) last_ship_id)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (app np-all (app (app lte rows) 3)))))))))",
  "(lam (lam (let ship_cells (app (app gt true-board) 0) (let hidden_cells (app (app eq partial-board) unknown) (let unrevealed_ships (app (app and ship_cells) hidden_cells) (let cols_1_to_4 (app (app subscript unrevealed_ships) (pair (slice 0 inf) (slice 0 4))) (app bool (app np-any cols_1_to_4))))))))",
  "(lam (lam (let hidden_ships (app (app and (app (app ne true-board) 0)) (app (app eq partial-board) unknown)) (let any_in_AD (app np-any (app (app subscript hidden_ships) (pair (slice 0 4) (slice 0 inf)))) (let any_in_EH (app np-any (app (app subscript hidden_ships) (pair (slice 4 inf) (slice 0 inf)))) (app bool (app (app and any_in_AD) unknown)))))))",
  "(lam (lam (let cols (app (app slice 5) 8) (let ship_mask (app (app gt (app (app subscript true-board) (pair (slice 0 inf) cols))) 0) (let hidden_mask (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) cols))) unknown) (app bool (app np-any (app (app and ship_mask) hidden_mask))))))))",
  "(lam (lam (let true_slice (app (app subscript true-board) (pair (slice 0 4) (slice 0 inf))) (let partial_slice (app (app subscript partial-board) (pair (slice 0 4) (slice 0 inf))) (let ships (app (app gt true_slice) 0) (let hidden (app (app eq partial_slice) unknown) (app bool (app np-any (app (app and ships) hidden)))))))))",
  "(lam (lam (let half (app (app unknown (app (app subscript true-board.shape) 0)) 2) (let top_true (app (app subscript true-board) (pair (slice 0 half) (slice 0 inf))) (let top_partial (app (app subscript partial-board) (pair (slice 0 half) (slice 0 inf))) (let unrevealed_in_top (app (app and (app (app gt top_true) 0)) (app (app eq top_partial) unknown)) (app bool (app np-any unrevealed_in_top))))))))",
  "(lam (lam (let ship_mask (app (app gt true-board) 0) (let hidden_mask (app (app eq partial-board) unknown) (let region_mask (app (app and (app (app subscript ship_mask) (pair (slice 0 inf) (slice 0 4)))) (app (app subscript hidden_mask) (pair (slice 0 inf) (slice 0 4)))) (app bool (app np-any region_mask)))))))",
  "(lam (lam (let rows_ab (app (app slice 0) 2) (let unrevealed_ab (app (app and (app (app gt (app (app subscript true-board) (pair rows_ab (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair rows_ab (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ab))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"B\")) (app ord \"A\")) (let col_idx (app (app sub 2) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let ship (app (app gt true-board) 0) (let unrevealed_ship (app (app and hidden) ship) ('app', ('app', 'subscript', 'unrevealed_ship'), ('pair', ('slice', '0', '2'), ('slice', '0', 'inf'))).any)))))",
  "(lam (lam (let unrevealed_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let cols (app np-arange (app (app subscript true-board.shape) 1)) (let odd_col_mask (app (app eq (app (app mod cols) 2)) 0) (let mask (app (app and unrevealed_ships) (app (app subscript odd_col_mask) (pair np.newaxis (slice 0 inf)))) (app bool (app np-any mask))))))))",
  "(lam (lam (let found_vertical 0 (let found_horizontal 0 (app (app and found_vertical) unknown)))))",
  "(lam (lam (let unrevealed_ships (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let $v0 (app np-indices true-board.shape) (let odd_columns (app (app eq (app (app mod cols) 2)) 0) (app bool (app np-any (app (app and unrevealed_ships) odd_columns))))))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let $v0 (app np-nonzero hidden_ships) (let $v1 (pair (app (app sub (app (app subscript true-board.shape) 0)) 1) (app (app sub (app (app subscript true-board.shape) 1)) 1)) 0)))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let top_edge ('app', ('app', 'subscript', 'hidden_ships'), ('pair', '0', ('slice', '0', 'inf'))).any (let bottom_edge ('app', ('app', 'subscript', 'hidden_ships'), ('pair', 'unknown', ('slice', '0', 'inf'))).any (let left_edge ('app', ('app', 'subscript', 'hidden_ships'), ('pair', ('slice', '0', 'inf'), '0')).any (let right_edge ('app', ('app', 'subscript', 'hidden_ships'), ('pair', ('slice', '0', 'inf'), 'unknown')).any (app (app and (app (app or top_edge) bottom_edge)) unknown))))))))",
  "(lam (lam (let unrevealed_ship (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (app bool ('app', ('app', 'subscript', 'unrevealed_ship'), ('pair', ('slice', '0', 'inf'), '0')).any))))",
  "(lam (lam (let n (app (app subscript true-board.shape) 0) (let border_thickness 2 (let interior_rows (app (app np-arange border_thickness) (app (app sub n) border_thickness)) (let interior_cols (app (app np-arange border_thickness) (app (app sub n) border_thickness)) (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) 0))))))))",
  "(lam (lam (let middle_region (app (app subscript true-board) (pair (slice 2 6) (slice 2 6))) (let ship_ids (app np-unique middle_region) (let ship_ids (app (app subscript ship_ids) (app (app ne ship_ids) 0)) (let middle_ship_id (app (app subscript ship_ids) 0) (let ship_length (app np-count_nonzero (app (app eq true-board) middle_ship_id)) (app (app eq (app (app mod ship_length) 2)) 0))))))))",
  "(lam (lam (let unrevealed (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (let top_unrevealed (app np-sum (app (app subscript unrevealed) (pair (slice 0 4) (slice 0 inf)))) (let bottom_unrevealed (app np-sum (app (app subscript unrevealed) (pair (slice 4 inf) (slice 0 inf)))) (app (app gt top_unrevealed) bottom_unrevealed))))))",
  "(lam (lam (let g (app (app sub (app ord \"G\")) (app ord \"A\")) (let mask (app (app and (app (app gt (app (app subscript true-board) (pair g (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair g (slice 0 inf)))) unknown)) (app bool mask.any)))))",
  "(lam (lam (let red_coords (app np-argwhere (app (app eq true-board) 1)) (let hidden_ship (app (app and (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0))) (app (app ne true-board) 1)) (let $v0 true-board.shape 0)))))",
  "(lam (lam (let hits (app np-argwhere (app (app gt partial-board) 0)) (let $v0 (app (app subscript hits) 0) (let ship_id (app (app subscript true-board) (pair r c)) (let n_cols (app (app subscript true-board.shape) 1) 0))))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let cols (app (app subscript (app np-where hidden_ships)) 1) (app np-all (app (app lt cols) 4))))))",
  "(lam (lam (let ORANGE_LABEL 4 (let SHIP_LABELS unknown (let remaining unknown (let target_label (app (app subscript remaining) 0) (let tgt_coords (app list (app zip unknown)) (let org_coords (app list (app zip unknown)) 0))))))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let mid (app (app unknown n_rows) 2) (let top_true (app (app subscript true-board) (pair (slice 0 mid) (slice 0 inf))) (let top_partial (app (app subscript partial-board) (pair (slice 0 mid) (slice 0 inf))) (let unrevealed_ship_in_top (app (app and (app (app gt top_true) 0)) (app (app eq top_partial) unknown)) (app bool (app np-any unrevealed_ship_in_top)))))))))",
  "(lam (lam (let n (app (app subscript true-board.shape) 0) (let $v0 (app np-indices (pair n n)) (let border_mask (app (app or (app (app or (app (app or (app (app lt rows) 2)) (app (app gte rows) (app (app sub n) 2)))) (app (app lt cols) 2))) (app (app gte cols) (app (app sub n) 2))) (let hidden_ship_mask (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app and border_mask) hidden_ship_mask)))))))))",
  "(lam (lam (let $v0 true-board.shape (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let top_half_mask (app np-zeros_like hidden_ships) (let $v1 1 (let top_hidden (app (app and hidden_ships) top_half_mask) (let border_rows (app np-zeros n_rows) (let $v2 1 (let $v3 1 (let border_cols (app np-zeros n_cols) (let $v4 1 (let $v5 1 (let border_mask (app (app or (app (app subscript border_rows) (pair (slice 0 inf) ()))) (app (app subscript border_cols) (pair () (slice 0 inf)))) (let off_border (app (app and top_hidden) unknown) unknown)))))))))))))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let ship_cells (app (app gt true-board) 0) (let region_hidden_ships (app (app and (app (app subscript hidden) (pair (slice 0 inf) (slice 0 4)))) (app (app subscript ship_cells) (pair (slice 0 inf) (slice 0 4)))) (app np-any region_hidden_ships))))))",
  "(lam (lam (let $v0 true-board.shape (let $v1 (pair 2 (app (app sub n_rows) 3)) (let $v2 (pair 2 (app (app sub n_cols) 3)) (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) 0)))))))",
  "(lam (lam (let border (app np-zeros true-board.shape) (let $v0 1 (let $v1 1 (let $v2 1 (let $v3 1 (let hidden_ship_cells (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app and hidden_ship_cells) border)))))))))))",
  "(lam (lam (let ship_cells (app (app gt true-board) 0) (let hidden_ship_cells (app (app and ship_cells) (app (app eq partial-board) unknown)) (let rows (app (app subscript true-board.shape) 0) (let half (app (app unknown rows) 2) (let top_hidden ('app', ('app', 'subscript', 'hidden_ship_cells'), ('pair', ('slice', '0', 'half'), ('slice', '0', 'inf'))).sum (let bottom_hidden ('app', ('app', 'subscript', 'hidden_ship_cells'), ('pair', ('slice', 'half', 'inf'), ('slice', '0', 'inf'))).sum (app (app gt top_hidden) bottom_hidden)))))))))",
  "(lam (lam (let found_ships (app np-argwhere (app (app gt partial-board) 0)) (let remaining_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let $v0 partial-board.shape 0)))))",
  "(lam (lam (let mask_unseen_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let left_has_ship ('app', ('app', 'subscript', 'mask_unseen_ship'), ('pair', ('slice', '0', 'inf'), ('slice', '0', '4'))).any (let right_has_ship ('app', ('app', 'subscript', 'mask_unseen_ship'), ('pair', ('slice', '0', 'inf'), ('slice', '4', '8'))).any (app (app and left_has_ship) unknown))))))",
  "(lam (lam (let rows (app (app slice 0) 4) (let cols (app (app slice 0) 4) (let sub_true (app (app subscript true-board) (pair rows cols)) (let sub_partial (app (app subscript partial-board) (pair rows cols)) (let hidden_mask (app (app eq sub_partial) unknown) (let ship_mask (app (app gt sub_true) 0) (app bool (app np-any (app (app and hidden_mask) ship_mask)))))))))))",
  "(lam (lam (let unrevealed_ship (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) 0)))",
  "(lam (lam (let region_true (app (app subscript true-board) (pair (slice 0 4) (slice 4 8))) (let region_partial (app (app subscript partial-board) (pair (slice 0 4) (slice 4 8))) (app bool (app np-any (app (app and (app (app gt region_true) 0)) (app (app eq region_partial) unknown))))))))",
  "(lam (lam (let revealed_ids (app np-unique (app (app subscript partial-board) (app (app gt partial-board) 0))) (let ship_id (app (app subscript revealed_ids) 0) (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let $v0 (pair (app (app subscript coords) (pair (slice 0 inf) 0)) (app (app subscript coords) (pair (slice 0 inf) 1))) None))))))",
  "(lam (lam (let border_mask (app np-zeros_like true-board) (let $v0 1 (let $v1 1 (let $v2 1 (let $v3 1 (let hidden_mask (app (app eq partial-board) unknown) (let ship_mask (app (app gt true-board) 0) (app np-any (app (app and (app (app and border_mask) hidden_mask)) ship_mask)))))))))))",
  "(lam (lam (let hidden_ship_tiles (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let $v0 (app np-where hidden_ship_tiles) (app np-all (app (app lt rows) 4))))))",
  "(lam (lam (let unrevealed_ships (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (app bool (app np-any (app (app subscript unrevealed_ships) (pair (slice 0 inf) (slice 0 4))))))))",
  "(lam (lam (let ship_mask (app (app gt true-board) 0) (let hidden_mask (app (app eq partial-board) unknown) (let unrevealed (app (app and ship_mask) hidden_mask) (app bool ('app', ('app', 'subscript', 'unrevealed'), ('pair', ('slice', '0', '4'), ('slice', '0', 'inf'))).any))))))",
  "(lam (lam (let row_idx 6 (let ship_mask (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (let hidden_mask (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (app bool (app np-any (app (app and ship_mask) hidden_mask))))))))",
  "(lam (lam (let center_top (app (app subscript true-board) (pair 3 (slice 3 5))) (let hidden_mask (app (app eq (app (app subscript partial-board) (pair 3 (slice 3 5)))) unknown) (app bool (app np-any (app (app and (app (app gt center_top) 0)) hidden_mask)))))))",
  "(lam (lam (let unrevealed (app (app eq partial-board) unknown) (let tb_3_4 (app (app subscript true-board) (pair (slice 0 inf) (slice 2 4))) (let tb_5_6 (app (app subscript true-board) (pair (slice 0 inf) (slice 4 6))) (let ur_3_4 (app (app subscript unrevealed) (pair (slice 0 inf) (slice 2 4))) (let ur_5_6 (app (app subscript unrevealed) (pair (slice 0 inf) (slice 4 6))) (let has_ship_3_4 (app np-any (app (app and (app (app gt tb_3_4) 0)) ur_3_4)) (let has_ship_5_6 (app np-any (app (app and (app (app gt tb_5_6) 0)) ur_5_6)) (app (app and has_ship_3_4) unknown))))))))))",
  "(lam (lam (let hidden_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let border_mask (app np-zeros_like hidden_ship) (let $v0 1 (let $v1 1 (let $v2 1 (let $v3 1 (app bool (app np-any (app (app and hidden_ship) border_mask)))))))))))",
  "(lam (lam (let top_true (app (app subscript true-board) (pair (slice 0 4) (slice 0 inf))) (let top_partial (app (app subscript partial-board) (pair (slice 0 4) (slice 0 inf))) (let unrevealed_ship_in_top (app (app and (app (app gt top_true) 0)) (app (app eq top_partial) unknown)) (app np-any unrevealed_ship_in_top))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"C\")) (app ord \"A\")) (let ship_tiles (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0) (let still_hidden (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown) (app bool (app np-any (app (app and ship_tiles) still_hidden))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"G\")) (app ord \"A\")) (let unrevealed_ships_in_G (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ships_in_G))))))",
  "(lam (lam (let half (app (app unknown (app (app subscript true-board.shape) 0)) 2) (let upper_true (app (app subscript true-board) (pair (slice 0 half) (slice 0 inf))) (let upper_partial (app (app subscript partial-board) (pair (slice 0 half) (slice 0 inf))) (let unrevealed_ship_upper (app (app and (app (app gt upper_true) 0)) (app (app eq upper_partial) unknown)) (app bool (app np-any unrevealed_ship_upper))))))))",
  "(lam (lam (let n (app (app subscript true-board.shape) 0) (let rows (app (app subscript (app np-arange n)) (pair (slice 0 inf) ())) (let cols (app (app subscript (app np-arange n)) (pair () (slice 0 inf))) (let ring (app np.minimum.reduce unknown) (let middle_mask (app (app eq ring) 2) (let unrevealed_middle (app (app and (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) middle_mask) (app bool (app np-any unrevealed_middle))))))))))",
  "(lam (lam (let n (app (app subscript true-board.shape) 0) (let mid_start (app (app unknown n) 4) (let mid_size (app (app unknown n) 2) (let half (app (app unknown mid_size) 2) (let row_slice (app (app slice (app (app add mid_start) half)) (app (app add mid_start) mid_size)) (let left_col_slice (app (app slice mid_start) (app (app add mid_start) half)) (let right_col_slice (app (app slice (app (app add mid_start) half)) (app (app add mid_start) mid_size)) (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let bl_any (app np-any (app (app subscript hidden_ships) (pair row_slice left_col_slice))) (let br_any (app np-any (app (app subscript hidden_ships) (pair row_slice right_col_slice))) (app (app and bl_any) unknown)))))))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"E\")) (app ord \"A\")) (let unrevealed_ships (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ships))))))",
  "(lam (lam (let n_rows (app (app subscript true-board.shape) 0) (let top_half_end (app (app unknown n_rows) 2) (let tb_top (app (app subscript true-board) (pair (slice 0 top_half_end) (slice 0 inf))) (let pb_top (app (app subscript partial-board) (pair (slice 0 top_half_end) (slice 0 inf))) (let unrevealed_ship_in_top (app (app and (app (app gt tb_top) 0)) (app (app eq pb_top) unknown)) (app bool (app np-any unrevealed_ship_in_top)))))))))",
  "(lam (lam 0))",
  "(lam (lam (let $v0 true-board.shape (let orange_cells (app np-argwhere (app (app eq true-board) 4)) (let purple_cells (app np-argwhere (app (app eq true-board) 3)) 0)))))",
  "(lam (lam (let $v0 true-board.shape (let $v1 (pair (app (app unknown n) 4) (app (app unknown (app (app mul 3) n)) 4)) (let $v2 (pair (app (app unknown m) 4) (app (app unknown (app (app mul 3) m)) 4)) (let central_true (app (app subscript true-board) (pair (slice r_start r_end) (slice c_start c_end))) (let central_partial (app (app subscript partial-board) (pair (slice r_start r_end) (slice c_start c_end))) (let mask (app (app and (app (app gt central_true) 0)) (app (app eq central_partial) unknown)) (app bool (app np-any mask))))))))))",
  "(lam (lam (let unrevealed (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let nrows (app (app subscript true-board.shape) 0) (let half (app (app unknown nrows) 2) (let top_mask (app np-zeros nrows) (let $v0 1 (let top_unrevealed (app (app and unrevealed) (app (app subscript top_mask) (pair (slice 0 inf) ()))) (app bool (app np-any top_unrevealed))))))))))",
  "(lam (lam (let revealed_positions (app np-where (app (app gt partial-board) 0)) (let ship_id (app (app subscript (app (app subscript partial-board) revealed_positions)) 0) (let ship_cells (app np-where (app (app eq true-board) ship_id)) (let $v0 ship_cells (let is_vertical (app (app and (app (app eq (app len (app set cols))) 1)) (app (app gt (app len (app set rows))) 1)) (app bool is_vertical))))))))",
  "(lam (lam (let region (app (app slice 0) 4) (let hidden_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair region (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair region (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ship_tiles))))))",
  "(lam (lam (let unrevealed_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let $v0 true-board.shape (let $v1 (app np-where unrevealed_ships) (let touching_border (app (app or (app (app or (app (app or (app (app eq rows) 0)) (app (app eq rows) (app (app sub n_rows) 1)))) (app (app eq cols) 0))) (app (app eq cols) (app (app sub n_cols) 1))) (app np-any touching_border)))))))",
  "(lam (lam (let row_index 0 (let hidden_ship_tiles (app (app and (app (app gt (app (app subscript true-board) (pair row_index (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_index (slice 0 inf)))) unknown)) (app np-any hidden_ship_tiles)))))",
  "(lam (lam 0))",
  "(lam (lam (let $v0 true-board.shape 0)))",
  "(lam (lam (let top_true (app (app subscript true-board) (pair (slice 0 4) (slice 0 inf))) (let top_partial (app (app subscript partial-board) (pair (slice 0 4) (slice 0 inf))) (let hidden_ships_top (app (app and (app (app gt top_true) 0)) (app (app eq top_partial) unknown)) (app bool (app np-any hidden_ships_top)))))))",
  "(lam (lam (let nrows (app (app subscript true-board.shape) 0) (let top_slice (app (app slice 0) (app (app unknown nrows) 2)) (let top_unrevealed (app (app and (app (app gt (app (app subscript true-board) top_slice)) 0)) (app (app eq (app (app subscript partial-board) top_slice)) unknown)) (app bool (app np-any top_unrevealed)))))))",
  "(lam (lam (let revealed_ids (app np-unique (app (app subscript partial-board) (app (app gt partial-board) 0))) 0)))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let $v0 (app np-nonzero hidden_ships) (let even_row_mask (app (app eq (app (app mod (app (app add rows) 1)) 2)) 0) (app bool (app np-any even_row_mask)))))))",
  "(lam (lam (let ship_tiles (app (app gt true-board) 0) (let hidden_tiles (app (app eq partial-board) unknown) (let col6_mask (app (app and ship_tiles) hidden_tiles) (app bool (app np-any (app (app subscript col6_mask) (pair (slice 0 inf) 5)))))))))",
  "(lam (lam (let row_idx 4 (let col_idx 4 (app (app ne (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"B\")) (app ord \"A\")) (let col_idx (app (app sub 2) 1) (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let hidden_ships_in_F (app (app and (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app bool (app np-any hidden_ships_in_F))))))",
  "(lam (lam (let col_idx 0 (let ship_tiles (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let unrevealed (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and ship_tiles) unrevealed))))))))",
  "(lam (lam 0))",
  "(lam (lam (let even_col_mask (app (app eq (app (app mod (app (app add (app np-arange (app (app subscript true-board.shape) 1))) 1)) 2)) 0) (let hidden_ship_in_even (app (app and (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) (app (app subscript even_col_mask) (pair np.newaxis (slice 0 inf)))) (app bool (app np-any hidden_ship_in_even))))))",
  "(lam (lam (let col_idx 3 (let hidden_ship_in_col (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown)) (app np-any hidden_ship_in_col)))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let true_row (app (app subscript true-board) (pair row_idx (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_idx (slice 0 inf))) (let ship_mask (app (app gt true_row) 0) (let hidden_mask (app (app eq partial_row) unknown) (app bool (app np-any (app (app and ship_mask) hidden_mask))))))))))",
  "(lam (lam (let row_idx 2 (let hidden (app (app eq (app (app subscript partial-board) row_idx)) unknown) (let ship (app (app gt (app (app subscript true-board) row_idx)) 0) (let unrevealed_ship_here (app np-any (app (app and hidden) ship)) unknown))))))",
  "(lam (lam (let col_idx (app (app sub 4) 1) (let ships_in_col (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let hidden_in_col (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and ships_in_col) hidden_in_col))))))))",
  "(lam (lam (let $v0 (app np-where (app (app eq partial-board) 0)) (let $v1 (app np-unique miss_cols) (let col_of_interest (app (app subscript unique_cols) (app np-argmax counts)) (let mask_unseen_ship (app (app and (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown))) (app (app eq (app (app subscript (app np-arange (app (app subscript true-board.shape) 1))) (pair () (slice 0 inf)))) col_of_interest)) (let coords (app np-argwhere mask_unseen_ship) (let $v2 (app (app subscript coords) 0) (let ship_id (app (app subscript true-board) (pair r c)) (let ship_tiles (app np-argwhere (app (app eq true-board) ship_id)) (let is_vertical (app np-all (app (app eq (app (app subscript ship_tiles) (pair (slice 0 inf) 1))) (app (app subscript ship_tiles) (pair 0 1)))) (app bool is_vertical))))))))))))",
  "(lam (lam (let row (app (app sub (app ord \"G\")) (app ord \"A\")) (let col (app (app sub 4) 1) (app (app and (app (app eq (app (app subscript partial-board) (pair row col))) unknown)) (app (app ne (app (app subscript true-board) (pair row col))) 0))))))",
  "(lam (lam (let ships (app np-unique true-board) (let ships (app (app subscript ships) (app (app gt ships) 0)) (let remaining unknown 0)))))",
  "(lam (lam (let remaining_ships unknown (let mask (app (app np-isin true-board) remaining_ships) (app np-any (app (app subscript mask) (pair (slice 0 inf) 0)))))))",
  "(lam (lam (let rows_to_check unknown (let mask (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript mask) (pair rows_to_check (slice 0 inf)))))))))",
  "(lam (lam (let cols_to_check unknown 0)))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let col1_idx (app (app sub 1) 1) (let col3_idx (app (app sub 3) 1) 0)))))",
  "(lam (lam (let rows_to_check unknown (let unrevealed_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript unrevealed_ships) (pair rows_to_check (slice 0 inf)))))))))",
  "(lam (lam (let target_cols unknown (let ship_ids set 0))))",
  "(lam (lam (let coords unknown 0)))",
  "(lam (lam (let target_rows unknown 0)))",
  "(lam (lam (let target_rows unknown (let n_cols (app (app subscript true-board.shape) 1) 0))))",
  "(lam (lam (let $v0 true-board.shape (let row_mid (app (app unknown n_rows) 2) (let col_mid (app (app unknown n_cols) 2) (let lower_left_true (app (app subscript true-board) (pair (slice row_mid inf) (slice 0 col_mid))) (let lower_left_partial (app (app subscript partial-board) (pair (slice row_mid inf) (slice 0 col_mid))) (let hidden_ship_mask (app (app and (app (app gt lower_left_true) 0)) (app (app eq lower_left_partial) unknown)) (app bool (app np-any hidden_ship_mask))))))))))",
  "(lam (lam (let quad_slice (app (app subscript np.s_) (pair (slice 0 4) (slice 0 4))) (let hidden_ship_tiles (app (app and (app (app gt (app (app subscript true-board) quad_slice)) 0)) (app (app eq (app (app subscript partial-board) quad_slice)) unknown)) (app bool (app np-any hidden_ship_tiles))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let hidden_tiles (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (let ship_tiles (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (app bool (app np-any (app (app and hidden_tiles) ship_tiles))))))))",
  "(lam (lam (let row_index (app (app sub (app ord \"G\")) (app ord \"A\")) (let col_start (app (app unknown (app (app subscript true-board.shape) 1)) 2) (let true_slice (app (app subscript true-board) (pair row_index (slice col_start inf))) (let partial_slice (app (app subscript partial-board) (pair row_index (slice col_start inf))) (let unrevealed_ship_mask (app (app and (app (app gt true_slice) 0)) (app (app eq partial_slice) unknown)) (app bool (app np-any unrevealed_ship_mask)))))))))",
  "(lam (lam (let row_index 1 (let unrevealed (app (app eq (app (app subscript partial-board) row_index)) unknown) (let ship_tiles (app (app gt (app (app subscript true-board) row_index)) 0) (app np-any (app (app and unrevealed) ship_tiles)))))))",
  "(lam (lam (let col_idx 7 (let ship_mask (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_idx))) 0) (let hidden_mask (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_idx))) unknown) (app bool (app np-any (app (app and ship_mask) hidden_mask))))))))",
  "(lam (lam (let $v0 true-board.shape (let $v1 (pair (app (app unknown rows) 2) (app (app unknown cols) 2)) (let quadrants unknown 1)))))",
  "(lam (lam 1))",
  "(lam (lam (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) 1))))",
  "(lam (lam (let hidden (app (app eq partial-board) unknown) (let ship (app (app gt true-board) 0) (let $v0 true-board.shape (let half_row (app (app unknown rows) 2) (let half_col (app (app unknown cols) 2) (let upper_right (app np-zeros_like true-board) (let lower_right (app np-zeros_like true-board) (let $v1 1 (let $v2 1 (let candidate_tiles (app (app and (app (app and hidden) ship)) (app (app or upper_right) lower_right)) (app bool (app np-any candidate_tiles))))))))))))))",
  "(lam (lam (let $v0 true-board.shape 0)))",
  "(lam (lam (let col_index 7 (let ship_mask (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col_index))) 0) (let hidden_mask (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col_index))) unknown) (app bool (app np-any (app (app and ship_mask) hidden_mask))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"B\")) (app ord \"A\")) (let col_idx (app (app sub (app int \"2\")) 1) (app bool (app (app gt (app (app subscript true-board) (pair row_idx col_idx))) 0))))))",
  "(lam (lam (let unrevealed_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let cols_with_ships (app (app subscript (app np-where unrevealed_ships.any)) 0) (let col_numbers (app (app add cols_with_ships) 1) (let has_odd (app np-any (app (app eq (app (app mod col_numbers) 2)) 1)) (let has_even (app np-any (app (app eq (app (app mod col_numbers) 2)) 0)) (app bool (app (app and has_odd) has_even)))))))))",
  "(lam (lam (let rows unknown (let hidden_ships_in_A_or_B (app (app and (app (app eq (app (app subscript partial-board) rows)) unknown)) (app (app gt (app (app subscript true-board) rows)) 0)) (app np-any hidden_ships_in_A_or_B)))))",
  "(lam (lam (let rows unknown (let unrevealed_ships (app (app and (app (app ne (app (app subscript true-board) (pair rows (slice 0 inf)))) 0)) (app (app eq (app (app subscript partial-board) (pair rows (slice 0 inf)))) unknown)) (app bool (app np-any unrevealed_ships))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 3)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))",
  "(lam (lam 0))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let col_idx (app (app sub (app int \"3\")) 1) (app (app ne (app (app subscript true-board) (pair row_idx col_idx))) 0)))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (app bool (app np-any (app (app subscript hidden_ships) (pair (slice 6 8) (slice 0 inf))))))))",
  "(lam (lam (let ship_ids (app (app sub (app set (app np-unique true-board))) unknown) (let remaining_id () (let rem_coords (app set (app zip unknown)) (let other_coords (app set (app zip unknown)) 0))))))",
  "(lam (lam 0))",
  "(lam (lam (let $v0 (pair 3 5) (let $v1 (pair 3 5) (let region_true (app (app subscript true-board) (pair (slice r_start r_end) (slice c_start c_end))) (let region_partial (app (app subscript partial-board) (pair (slice r_start r_end) (slice c_start c_end))) (let hidden_ships (app (app and (app (app gt region_true) 0)) (app (app eq region_partial) unknown)) (app bool (app np-any hidden_ships)))))))))",
  "(lam (lam 0))",
  "(lam (lam (let rows unknown (let unrevealed_ship (app (app and (app (app eq partial-board) unknown)) (app (app gt true-board) 0)) (app bool (app np-any (app (app subscript unrevealed_ship) (pair rows (slice 0 inf)))))))))",
  "(lam (lam (let hits (app np-argwhere (app (app gt partial-board) 0)) (let first_hit (app tuple (app (app subscript hits) 0)) (let ship_id (app (app subscript true-board) first_hit) (let ship_cells (app np-argwhere (app (app eq true-board) ship_id)) (let rows (app (app subscript ship_cells) (pair (slice 0 inf) 0)) (let is_horizontal (app np-all (app (app eq rows) (app (app subscript rows) 0))) (app bool is_horizontal)))))))))",
  "(lam (lam (let targets unknown 0)))",
  "(lam (lam (let ship_ids (app np-unique true-board) 0)))",
  "(lam (lam (let row_idx (app (app sub (app ord \"H\")) (app ord \"A\")) 0)))",
  "(lam (lam (let row_idx 0 (let row (app (app subscript true-board) row_idx) (let hidden_row (app (app subscript partial-board) row_idx) (let run_indices unknown (let run_length 0 0)))))))",
  "(lam (lam (let all_ships (app (app sub (app set (app np-unique true-board))) unknown) (let revealed_ships (app (app sub (app set (app np-unique partial-board))) unknown) (let remaining (app (app sub all_ships) revealed_ships) (let dirs unknown (let $v0 true-board.shape 0)))))))",
  "(lam (lam (let ship_ids (app np-unique true-board) (let ship_ids (app (app subscript ship_ids) (app (app gt ship_ids) 0)) (let remaining () (let $v0 (app np-where (app (app eq true-board) remaining)) (let touches (app np-any (app (app eq (app (app add rows) 1)) 7)) (app bool touches))))))))",
  "(lam (lam (let ship_tiles (app (app gt true-board) 0) (let revealed_tiles (app (app gt partial-board) 0) (let unrevealed_ships (app (app and ship_tiles) unknown) (let $v0 true-board.shape (let mid_row (app (app unknown n_rows) 2) (let mid_col (app (app unknown n_cols) 2) (let lower_right (app (app subscript unrevealed_ships) (pair (slice mid_row n_rows) (slice mid_col n_cols))) (app bool (app np-any lower_right)))))))))))",
  "(lam (lam (let col 0 (let unrevealed_ships_in_col1 (app (app and (app (app gt (app (app subscript true-board) (pair (slice 0 inf) col))) 0)) (app (app eq (app (app subscript partial-board) (pair (slice 0 inf) col))) unknown)) (app bool (app np-any unrevealed_ships_in_col1))))))",
  "(lam (lam (let orientations unknown (let unique_orients (app set orientations) (app (app lte (app len unique_orients)) 1)))))",
  "(lam (lam (let hidden_ships (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let quads unknown (app all unknown)))))",
  "(lam (lam (let row_idx 5 (let hidden_in_F (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (let ship_in_F (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (app np-any (app (app and hidden_in_F) ship_in_F)))))))",
  "(lam (lam (let center_true (app (app subscript true-board) (pair (slice 3 5) (slice 3 5))) (let center_partial (app (app subscript partial-board) (pair (slice 3 5) (slice 3 5))) (let unrevealed_ships (app (app and (app (app gt center_true) 0)) (app (app eq center_partial) unknown)) (app bool (app np-any unrevealed_ships)))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"F\")) (app ord \"A\")) (let hidden_in_row (app (app and (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown)) (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0)) (let ship_ids (app np-unique (app (app subscript true-board) (pair row_idx hidden_in_row))) (let n_cols (app (app subscript true-board.shape) 1) 0))))))",
  "(lam (lam (let row (app (app sub (app ord \"E\")) (app ord \"A\")) (let col (app (app sub 5) 1) (app (app gt (app (app subscript true-board) (pair row col))) 0)))))",
  "(lam (lam (let hits (app np-argwhere (app (app gt partial-board) 0)) (let $v0 (app (app subscript hits) 0) (let ship_id (app (app subscript true-board) (pair r0 c0)) (let ship_coords (app np-argwhere (app (app eq true-board) ship_id)) (let rows (app (app subscript ship_coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript ship_coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0)))))))))))",
  "(lam (lam (let all_ships (app np-unique (app (app subscript true-board) (app (app gt true-board) 0))) (let hit_ships (app np-unique (app (app subscript partial-board) (app (app gt partial-board) 0))) (let remaining unknown (let last_ship (app (app subscript remaining) 0) (let $v0 (app np-where (app (app eq true-board) last_ship)) (app np-all (app (app eq ship_rows) 7)))))))))",
  "(lam (lam (let revealed_ids (app set (app np-unique (app (app subscript partial-board) (app (app gt partial-board) 0)))) (let all_ship_ids unknown (let last_id ('app', ('app', 'sub', 'all_ship_ids'), 'revealed_ids').pop (let last_locs (app np-argwhere (app (app eq true-board) last_id)) (let green_locs (app np-argwhere (app (app eq true-board) 2)) 0)))))))",
  "(lam (lam (let rows (app (app slice 0) 4) (let cols (app (app slice 4) 8) (let true_sub (app (app subscript true-board) (pair rows cols)) (let partial_sub (app (app subscript partial-board) (pair rows cols)) (let unrevealed_ships (app (app and (app (app gt true_sub) 0)) (app (app eq partial_sub) unknown)) (app bool (app np-any unrevealed_ships)))))))))",
  "(lam (lam (let ship_ids (app np-unique (app (app subscript partial-board) (app (app gt partial-board) 0))) (let ship_id (app (app subscript ship_ids) 0) (let hit_positions (app np-argwhere (app (app eq partial-board) ship_id)) (let directions unknown (let $v0 true-board.shape 0)))))))",
  "(lam (lam (let row (app (app sub (app ord \"C\")) (app ord \"A\")) (let col (app (app sub 4) 1) (app (app gt (app (app subscript true-board) (pair row col))) 0)))))",
  "(lam (lam (let row_idx 4 (let ships_in_E (app (app gt (app (app subscript true-board) (pair row_idx (slice 0 inf)))) 0) (let hidden_in_E (app (app eq (app (app subscript partial-board) (pair row_idx (slice 0 inf)))) unknown) (app bool (app np-any (app (app and ships_in_E) hidden_in_E))))))))",
  "(lam (lam (let revealed (app (app subscript partial-board) (app (app gt partial-board) 0)) (let $v0 (app np-unique revealed) (let i (app np-argmin counts) (let current_ship_id (app (app subscript ship_ids) i) (let coords (app np-argwhere (app (app eq true-board) current_ship_id)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app bool (app np-all (app (app eq cols) (app (app subscript cols) 0))))))))))))",
  "(lam (lam (let centers unknown 0)))",
  "(lam (lam (let coords unknown 0)))",
  "(lam (lam (let mask_unseen_ship (app (app and (app (app gt true-board) 0)) (app (app eq partial-board) unknown)) (let $v0 (app np-where mask_unseen_ship) (app bool (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let revealed_ids (app (app sub (app set (app np-unique partial-board))) unknown) (let ship_id revealed_ids.pop (let coords (app np-argwhere (app (app eq true-board) ship_id)) (let row_span (app (app sub ('app', ('app', 'subscript', 'coords'), ('pair', ('slice', '0', 'inf'), '0')).max) ('app', ('app', 'subscript', 'coords'), ('pair', ('slice', '0', 'inf'), '0')).min) (let col_span (app (app sub ('app', ('app', 'subscript', 'coords'), ('pair', ('slice', '0', 'inf'), '1')).max) ('app', ('app', 'subscript', 'coords'), ('pair', ('slice', '0', 'inf'), '1')).min) (app (app gt row_span) col_span))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"G\")) (app ord \"A\")) (let true_row (app (app subscript true-board) (pair row_idx (slice 0 inf))) (let partial_row (app (app subscript partial-board) (pair row_idx (slice 0 inf))) (let unrevealed_ship_tiles (app (app and (app (app gt true_row) 0)) (app (app eq partial_row) unknown)) (app bool unrevealed_ship_tiles.any)))))))",
  "(lam (lam (let undiscovered_type () (let ship_coords (app np-argwhere (app (app eq true-board) undiscovered_type)) (let rows (app (app subscript ship_coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript ship_coords) (pair (slice 0 inf) 1)) (let target_row (app (app sub (app ord \"G\")) (app ord \"A\")) (let g1 (pair target_row 0) (let g8 (pair target_row 7) (app (app or (app (app eq start) g1)) (app (app eq start) g8)))))))))))",
  "(lam (lam (let $v0 (pair 6 1) (app (app gt (app (app subscript true-board) (pair row col))) 0))))",
  "(lam (lam (let targets unknown 0)))",
  "(lam (lam (let ship_ids (app (app sub (app set (app np-unique true-board))) unknown) (let target_id () (let tgt_pos (app np-argwhere (app (app eq true-board) target_id)) (let red_pos (app set (app (app map tuple) (app np-argwhere (app (app eq true-board) 1)))) (let $v0 true-board.shape 0)))))))",
  "(lam (lam (let green_positions (app np-argwhere (app (app eq true-board) 2)) (let cols (app (app subscript green_positions) (pair (slice 0 inf) 1)) (app bool (app np-all (app (app eq cols) (app (app subscript cols) 0))))))))",
  "(lam (lam (let $v0 (app np-where (app (app eq true-board) 2)) (app np-all (app (app eq green_cols) (app (app subscript green_cols) 0))))))",
  "(lam (lam (let orange_coords (app np-argwhere (app (app eq true-board) 4)) (let unique_rows (app np-unique (app (app subscript orange_coords) (pair (slice 0 inf) 0))) (app (app eq unique_rows.size) 1)))))",
  "(lam (lam (let green_positions (app np-argwhere (app (app eq true-board) 2)) (let rows (app (app subscript green_positions) (pair (slice 0 inf) 0)) (let cols (app (app subscript green_positions) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let row_idx (app (app sub (app ord \"C\")) (app ord \"A\")) (let hidden_red_in_C (app (app and (app (app eq (app (app subscript true-board) row_idx)) 1)) (app (app eq (app (app subscript partial-board) row_idx)) unknown)) (app bool (app np-any hidden_red_in_C))))))",
  "(lam (lam (let red_coords (app np-argwhere (app (app eq true-board) 1)) (let red_cols (app (app subscript red_coords) (pair (slice 0 inf) 1)) (app (app eq ('app', 'np-unique', 'red_cols').size) 1)))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 4)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let coords (app np-argwhere (app (app eq true-board) 3)) (let rows (app (app subscript coords) (pair (slice 0 inf) 0)) (let cols (app (app subscript coords) (pair (slice 0 inf) 1)) (app np-all (app (app eq rows) (app (app subscript rows) 0))))))))",
  "(lam (lam (let positions (app np-argwhere (app (app eq true-board) 1)) (let cols (app (app subscript positions) (pair (slice 0 inf) 1)) (app np-all (app (app eq cols) (app (app subscript cols) 0)))))))"
]